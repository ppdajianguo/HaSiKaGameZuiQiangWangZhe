window.__require=function e(t,n,i){function o(s,c){if(!n[s]){if(!t[s]){var r=s.split("/");if(r=r[r.length-1],!t[r]){var l="function"==typeof __require&&__require;if(!c&&l)return l(r,!0);if(a)return a(r,!0);throw new Error("Cannot find module '"+s+"'")}}var h=n[s]={exports:{}};t[s][0].call(h.exports,function(e){return o(t[s][1][e]||e)},h,h.exports,e,t,n,i)}return n[s].exports}for(var a="function"==typeof __require&&__require,s=0;s<i.length;s++)o(i[s]);return o}({AdsSingleton:[function(e,t,n){"use strict";cc._RF.push(t,"94095IWBKRHYb6qpgHPQ6Bf","AdsSingleton");var i=e("Singleton"),o=cc.Class({lightFrame:null,resHeight:null,resWidth:null,appName:null,initVideoAds:function(){var e,t=this;return window.qg?(console.log("\u662f\u5c0f\u7c73\u5e73\u53f0"),"b40583b13e3b422d922e69697c526f1e",void this.xiaomiVideoFunc("b40583b13e3b422d922e69697c526f1e")):window.tt?("qp5l2lji2mr85ba7dd",this.ttVideoFunc("qp5l2lji2mr85ba7dd"),void tt.getSystemInfo({success:function(e){t.appName=e.appName},fail:function(e){console.log("\u83b7\u53d6\u7cfb\u7edf\u4fe1\u606f\u5931\u8d25")}})):window.qq?(e="02af7c2063e103380e151070ba49e792",void this.qqVideoFunc(e)):"baidu"==i.getInstance().platform?("6732165",void this.baiduVideoFunc("6732165")):CC_WECHATGAME?("adunit-47c3bbb8406da016",void this.wxVideoFunc("adunit-47c3bbb8406da016")):void 0},creatBoxAds:function(){var e=this;console.log("\u521b\u5efa\u76d2\u5b50"),e.appbox=qq.createAppBox({adUnitId:"724314d79d61e7331e356f5c5a9625f8"}),e.appbox.load().then(function(){e.appbox.show()})},createBannerAds:function(e,t){var n;return window.tt?("bqfne09c9850db8i54",void this.ttBannerFunc(e,t,"bqfne09c9850db8i54")):window.qq?(n="d8291564d64027173c3730de71f76862",void this.qqBannerFunc(e,t,n)):"baidu"==i.getInstance().platform?("6732164",void this.baiduBannerFunc(e,t,"6732164")):CC_WECHATGAME?("adunit-30853b1cbe93eede",void this.wxBannerFunc(e,t,"adunit-30853b1cbe93eede")):void 0},showVideoAds:function(e){var t;0!=i.getInstance().ads_Open?(i.getInstance().isPlaying=!1,this.videoAdsType=e,cc.find("Canvas").stopActionByTag("9999"),this.hideBannerAds(),window.tt||window.qq||"baidu"==i.getInstance().platform||window.qg?(t=this).videoAd.show().catch(function(e){console.log("\u5fae\u4fe1\u52a0\u8f7d\u5e7f\u544a\u4e00",e),i.getInstance().isPlaying=!0,t.videoAd.load().then(function(){return t.videoAd.show().catch(function(e){i.getInstance().isPlaying=!0})})}):CC_WECHATGAME&&(t=this).videoAd.show().catch(function(e){i.getInstance().isPlaying=!0})):i.getInstance().doShare("",e)},vivoVideoFunc:function(e){var t=this;console.log("vivo\u89c6\u9891\u5e7f\u544a\u4fe1\u606f",e,qg),this.videoAd=qg.createRewardedVideoAd({posId:e,style:{}}),this.videoAd.onLoad(function(){console.log("\u89c6\u9891\u521d\u59cb\u5316\u6210\u529f")}),this.videoAd.onError(function(e){console.log("\u89c6\u9891\u521d\u59cb\u5316\u5931\u8d25"),i.getInstance().setTipLabelAppear("\u8bf7\u6c42\u9891\u7e41,\u8bf7\u7a0d\u540e\u518d\u8bd5"),cc.find("Canvas").stopActionByTag("9999"),cc.find("Canvas").runAction(t.seq)}),this.videoAd.onClose(function(e){i.getInstance().isPlaying=!0,cc.find("Canvas").getComponent("GameScript70")&&i.getInstance().bgAudioPlay(cc.find("Canvas").getComponent("GameScript70").bgMusic,.6),e&&e.isEnded||void 0===e?(console.log("\u89c6\u9891\u5e7f\u544a\u64ad\u653e\u7ed3\u675f",i.getInstance().gameType,t.videoAdsType),t.videoCallFunc()):i.getInstance().setTipLabelAppear("\u89c6\u9891\u672a\u64ad\u653e\u5b8c\u6bd5"),cc.find("Canvas").stopActionByTag("9999"),cc.find("Canvas").runAction(t.seq)})},xiaomiVideoFunc:function(e){var t=this;console.log("\u5c0f\u7c73\u89c6\u9891\u5e7f\u544a\u4fe1\u606f",e,qg),this.videoAd=qg.createRewardedVideoAd({adUnitId:e}),this.videoAd.onLoad(function(){console.log("\u89c6\u9891\u521d\u59cb\u5316\u6210\u529f")}),this.videoAd.onError(function(e){console.log("\u89c6\u9891\u521d\u59cb\u5316\u5931\u8d25"),i.getInstance().setTipLabelAppear("\u8bf7\u6c42\u9891\u7e41,\u8bf7\u7a0d\u540e\u518d\u8bd5"),cc.find("Canvas").stopActionByTag("9999"),cc.find("Canvas").runAction(t.seq)}),this.videoAd.onClose(function(e){i.getInstance().isPlaying=!0,cc.find("Canvas").getComponent("GameScript70")&&i.getInstance().bgAudioPlay(cc.find("Canvas").getComponent("GameScript70").bgMusic,.6),e&&e.isEnded||void 0===e?(console.log("\u89c6\u9891\u5e7f\u544a\u64ad\u653e\u7ed3\u675f",i.getInstance().gameType,t.videoAdsType),t.videoCallFunc()):i.getInstance().setTipLabelAppear("\u89c6\u9891\u672a\u64ad\u653e\u5b8c\u6bd5"),cc.find("Canvas").stopActionByTag("9999"),cc.find("Canvas").runAction(t.seq)})},wxVideoFunc:function(e){var t=this;this.videoAd=wx.createRewardedVideoAd({adUnitId:e}),this.videoAd.onLoad(function(){console.log("\u89c6\u9891\u521d\u59cb\u5316\u6210\u529f")}),this.videoAd.onError(function(e){console.log("\u89c6\u9891\u521d\u59cb\u5316\u5931\u8d25"),i.getInstance().setTipLabelAppear("\u8bf7\u6c42\u9891\u7e41,\u8bf7\u7a0d\u540e\u518d\u8bd5"),cc.find("Canvas").stopActionByTag("9999"),cc.find("Canvas").runAction(t.seq)}),this.videoAd.onClose(function(e){i.getInstance().isPlaying=!0,e&&e.isEnded||void 0===e?(console.log("\u89c6\u9891\u5e7f\u544a\u64ad\u653e\u7ed3\u675f",i.getInstance().gameType,t.videoAdsType),t.videoCallFunc()):i.getInstance().setTipLabelAppear("\u89c6\u9891\u672a\u64ad\u653e\u5b8c\u6bd5"),cc.find("Canvas").stopActionByTag("9999"),cc.find("Canvas").runAction(t.seq)})},qqVideoFunc:function(e){var t=this;this.videoAd=qq.createRewardedVideoAd({adUnitId:e}),this.videoAd.onLoad(function(){console.log("\u89c6\u9891\u521d\u59cb\u5316\u6210\u529f")}),this.videoAd.onError(function(e){console.log("\u89c6\u9891\u521d\u59cb\u5316\u5931\u8d25"),i.getInstance().setTipLabelAppear("\u8bf7\u6c42\u9891\u7e41,\u8bf7\u7a0d\u540e\u518d\u8bd5"),cc.find("Canvas").stopActionByTag("9999"),cc.find("Canvas").runAction(t.seq)}),this.videoAd.onClose(function(e){i.getInstance().isPlaying=!0,e&&e.isEnded||void 0===e?(console.log("\u89c6\u9891\u5e7f\u544a\u64ad\u653e\u7ed3\u675f",i.getInstance().gameType,t.videoAdsType),t.videoCallFunc()):i.getInstance().setTipLabelAppear("\u89c6\u9891\u672a\u64ad\u653e\u5b8c\u6bd5"),cc.find("Canvas").stopActionByTag("9999"),cc.find("Canvas").runAction(t.seq)})},ttVideoFunc:function(e){var t=this;this.videoAd=tt.createRewardedVideoAd({adUnitId:e}),this.videoAd.onLoad(function(){console.log("\u89c6\u9891\u521d\u59cb\u5316\u6210\u529f")}),this.videoAd.onError(function(e){console.log("\u89c6\u9891\u521d\u59cb\u5316\u5931\u8d25",e),cc.find("Canvas").stopActionByTag("9999")}),this.videoAd.onClose(function(e){i.getInstance().isPlaying=!0,e&&e.isEnded||void 0===e?(console.log("\u89c6\u9891\u5e7f\u544a\u64ad\u653e\u7ed3\u675f",i.getInstance().gameType,t.videoAdsType),t.videoCallFunc()):i.getInstance().setTipLabelAppear("\u89c6\u9891\u672a\u64ad\u653e\u5b8c\u6bd5")})},baiduVideoFunc:function(e){var t=this;this.videoAd=swan.createRewardedVideoAd({adUnitId:e,appSid:"17560754"}),this.videoAd.onLoad(function(){console.log("\u89c6\u9891\u521d\u59cb\u5316\u6210\u529f")}),this.videoAd.onError(function(e){console.log("\u767e\u5ea6\u89c6\u9891\u521d\u59cb\u5316\u5931\u8d25",e),i.getInstance().setTipLabelAppear("\u8bf7\u6c42\u9891\u7e41,\u8bf7\u7a0d\u540e\u518d\u8bd5"),cc.find("Canvas").stopActionByTag("9999"),cc.find("Canvas").runAction(t.seq)}),this.videoAd.onClose(function(e){i.getInstance().isPlaying=!0,e&&e.isEnded||void 0===e?(console.log("\u89c6\u9891\u5e7f\u544a\u64ad\u653e\u7ed3\u675f",i.getInstance().gameType,t.videoAdsType),t.videoCallFunc()):i.getInstance().setTipLabelAppear("\u89c6\u9891\u672a\u64ad\u653e\u5b8c\u6bd5"),cc.find("Canvas").stopActionByTag("9999"),cc.find("Canvas").runAction(t.seq)})},videoCallFunc:function(){i.getInstance().getPropSuccessFunc(this.videoAdsType)},vivoBannerFunc:function(e,t,n){cc.find("Canvas").stopActionByTag("9999"),this.seq=cc.repeatForever(cc.sequence(cc.delayTime(0),cc.callFunc(function(){this.bannerAd&&this.bannerAd.hide(),this.bannerAd&&this.bannerAd.destroy(),this.CocosScreenWidth=cc.view.getVisibleSize().width,this.CocosScreenHeight=cc.view.getVisibleSize().height,this.initOneBanner(e),this.showBannerAds()},this),cc.delayTime(t))),this.seq.setTag("9999"),cc.find("Canvas").runAction(this.seq)},wxBannerFunc:function(e,t,n){cc.find("Canvas").stopActionByTag("9999"),this.seq=cc.repeatForever(cc.sequence(cc.delayTime(0),cc.callFunc(function(){this.bannerAd&&this.bannerAd.hide(),this.bannerAd&&this.bannerAd.destroy(),this.CocosScreenWidth=cc.view.getVisibleSize().width,this.CocosScreenHeight=cc.view.getVisibleSize().height,this.initOneBanner(e),this.showBannerAds()},this),cc.delayTime(t))),this.seq.setTag("9999"),cc.find("Canvas").runAction(this.seq)},qqBannerFunc:function(e,t,n){cc.find("Canvas").stopActionByTag("9999"),this.seq=cc.repeatForever(cc.sequence(cc.delayTime(0),cc.callFunc(function(){this.bannerAd&&this.bannerAd.hide(),this.bannerAd&&this.bannerAd.destroy(),this.CocosScreenWidth=cc.view.getVisibleSize().width,this.CocosScreenHeight=cc.view.getVisibleSize().height,this.initOneBanner(e),this.showBannerAds()},this),cc.delayTime(t))),this.seq.setTag("9999"),cc.find("Canvas").runAction(this.seq)},baiduBannerFunc:function(e,t,n){cc.find("Canvas").stopActionByTag("9999"),this.seq=cc.repeatForever(cc.sequence(cc.delayTime(0),cc.callFunc(function(){this.bannerAd&&this.bannerAd.hide(),this.bannerAd&&this.bannerAd.destroy(),this.CocosScreenWidth=cc.view.getVisibleSize().width,this.CocosScreenHeight=cc.view.getVisibleSize().height,this.initOneBanner(e),this.showBannerAds()},this),cc.delayTime(t))),this.seq.setTag("9999"),cc.find("Canvas").runAction(this.seq)},ttBannerFunc:function(e,t,n){cc.find("Canvas").stopActionByTag("9999"),this.seq=cc.repeatForever(cc.sequence(cc.callFunc(function(){this.bannerAd&&this.bannerAd.hide(),this.bannerAd&&this.bannerAd.destroy()},this),cc.delayTime(0),cc.callFunc(function(){this.CocosScreenWidth=cc.view.getVisibleSize().width,this.CocosScreenHeight=cc.view.getVisibleSize().height,this.initOneBanner(e),this.showBannerAds()},this),cc.delayTime(t))),this.seq.setTag("9999"),cc.find("Canvas").runAction(this.seq)},initOneBanner:function(e){var t,n=this,o=0;n.bannerAd&&(window.tt&&(o=0),n.bannerAd.destroy());var a=cc.sequence(cc.delayTime(o),cc.callFunc(function(){var o=this;if(window.tt){t="bqfne09c9850db8i54",n.screenWidth=tt.getSystemInfoSync().windowWidth,n.screenHeight=tt.getSystemInfoSync().windowHeight,s=600;var a=(n.screenWidth-s)/2;console.log("\u8ddd\u5de6",a,n.screenWidth,s),n.bannerAd=tt.createBannerAd({adUnitId:t,style:{left:a,top:1800,width:s}}),n.bannerAd.onError(function(e){console.log("\u9519\u8bef\u662f",e,t)}),n.bannerAd.onLoad(function(){console.log("banner \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),n.bannerAd.onResize(function(t){console.log("\u8c03\u6574\u4e2d",o.appName,t),"news_article_lite"==o.appName?(console.log("\u5934\u6761\u6781\u901f\u7248"),t.height=t.width/16*9,i.getInstance().currentBannerBaseHeight=t.height,"top"==e?n.bannerAd.style.top=2:"bottom"==e?n.bannerAd.style.top=n.screenHeight-t.height-2:"left"==e||"right"==e||(n.bannerAd.style.top=n.screenHeight-t.height-2+e),n.bannerAd.style.left=n.screenWidth/2-t.width/2,o.rate,o.standerdHeight,n.screenWidth<=n.CocosScreenWidth?o.rate=n.CocosScreenWidth/2/n.screenWidth:o.rate=n.CocosScreenHeight/2/n.screenHeight,1==n.bannerAd._destroyed||n.bannerAd._destroying):(console.log("\u662f\u5934\u6761\u7248\u548c\u5176\u4ed6\u7248"),0!=t.height&&(o.resHeight=t.height,o.resWidth=t.width),i.getInstance().currentBannerBaseHeight=o.resHeight+20,n.bannerAd.style.top=n.screenHeight-o.resHeight-20,n.bannerAd.style.left=(n.screenWidth-o.resWidth)/2,o.rate,o.standerdHeight,n.screenWidth<=n.CocosScreenWidth?o.rate=n.CocosScreenWidth/2/n.screenWidth:o.rate=n.CocosScreenHeight/2/n.screenHeight,1==n.bannerAd._destroyed||n.bannerAd._destroying)})}else if(window.qq){n.bannerAd&&n.bannerAd.destroy(),t="d8291564d64027173c3730de71f76862",n.screenWidth=qq.getSystemInfoSync().windowWidth,n.screenHeight=qq.getSystemInfoSync().windowHeight,s=300;a=(n.screenWidth-s)/2;n.bannerAd=qq.createBannerAd({adUnitId:t,style:{left:a,top:200,width:s}}),n.bannerAd.onError(function(e){}),n.bannerAd.onLoad(function(){console.log("banner \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),n.bannerAd.onResize(function(t){if(console.log("banner\u5e7f\u544a\u7684\u5b9e\u9645\u5bbd\u9ad8",qq.getSystemInfoSync()),console.log("\u8d44\u6e90",t.width,"\u548c",t.height),i.getInstance().currentBannerBaseHeight=t.height,"top"==e)n.bannerAd.style.top=2;else if("bottom"==e){n.bannerAd.style.top=-500;var a=cc.sequence(cc.delayTime(.1),cc.callFunc(function(){this.bannerAd.style.top=n.screenHeight-t.height-2-10},n));cc.find("Canvas").runAction(a)}else"left"==e||"right"==e||(n.bannerAd.style.top=n.screenHeight-t.height-2+e);console.log("\u5de8\u4f5c",n.CocosScreenWidth,n.CocosScreenHeight,n.screenWidth,n.screenHeight),o.rate,o.standerdHeight,n.screenWidth<=n.CocosScreenWidth?o.rate=n.CocosScreenWidth/2/n.screenWidth:o.rate=n.CocosScreenHeight/2/n.screenHeight,1==n.bannerAd._destroyed||n.bannerAd._destroying})}else if("baidu"==i.getInstance().platform){n.bannerAd&&n.bannerAd.destroy(),t="6732164",n.screenWidth=swan.getSystemInfoSync().windowWidth,n.screenHeight=swan.getSystemInfoSync().windowHeight,s=300;a=(n.screenWidth-s)/2;n.bannerAd=swan.createBannerAd({adUnitId:t,appSid:"17560754",style:{left:a,top:200,width:s}}),n.bannerAd.onError(function(e){}),n.bannerAd.onLoad(function(){console.log("banner \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),n.bannerAd.onResize(function(t){if(i.getInstance().currentBannerBaseHeight=t.height,"top"==e)n.bannerAd.style.top=2;else if("bottom"==e){n.bannerAd.style.top=-500;var a=cc.sequence(cc.delayTime(.1),cc.callFunc(function(){this.bannerAd.style.top=n.screenHeight-t.height-2-10},n));cc.find("Canvas").runAction(a)}else"left"==e||"right"==e||(n.bannerAd.style.top=n.screenHeight-t.height-2+e);o.rate,o.standerdHeight,n.screenWidth<=n.CocosScreenWidth?o.rate=n.CocosScreenWidth/2/n.screenWidth:o.rate=n.CocosScreenHeight/2/n.screenHeight,1==n.bannerAd._destroyed||n.bannerAd._destroying})}else if(CC_WECHATGAME){var s;n.bannerAd&&n.bannerAd.destroy(),t="adunit-30853b1cbe93eede",n.screenWidth=wx.getSystemInfoSync().windowWidth,n.screenHeight=wx.getSystemInfoSync().windowHeight,console.log("\u5c4f\u5e55\u9ad8\u5ea6",wx.getSystemInfoSync().width),s=300;a=(n.screenWidth-s)/2;n.bannerAd=wx.createBannerAd({adUnitId:t,style:{left:a,top:200,width:s}}),n.bannerAd.onError(function(e){}),n.bannerAd.onLoad(function(){console.log("banner \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),n.bannerAd.onResize(function(t){console.log("banner\u5e7f\u544a\u7684\u5b9e\u9645\u5bbd\u9ad8",wx.getSystemInfoSync()),console.log("\u8d44\u6e90",t.width,t.height),i.getInstance().currentBannerBaseHeight=t.height,"top"==e?n.bannerAd.style.top=2:"bottom"==e?n.bannerAd.style.top=n.screenHeight-t.height-2:"left"==e||"right"==e||(n.bannerAd.style.top=n.screenHeight-t.height-2+e),console.log("\u5de8\u4f5c",n.CocosScreenWidth,n.CocosScreenHeight,n.screenWidth,n.screenHeight),o.rate,o.standerdHeight,n.screenWidth<=n.CocosScreenWidth?o.rate=n.CocosScreenWidth/2/n.screenWidth:o.rate=n.CocosScreenHeight/2/n.screenHeight,1==n.bannerAd._destroyed||n.bannerAd._destroying})}},this));cc.find("Canvas").runAction(a)},showBannerAds:function(){this.bannerAd&&this.bannerAd.show()},hideBannerAds:function(){console.log("banner\u4fe1\u606f",this.bannerAd),cc.find("Canvas").stopActionByTag("9999"),this.bannerAd&&this.bannerAd&&(this.bannerAd.hide(),console.log("\u9690\u85cfbanner\u5e7f\u544a")),console.log("banner\u4fe1\u606f\u4e8c",this.bannerAd)},adjustBannerAdsPos:function(e){window.tt},stopRepeatBanner:function(){cc.find("Canvas").stopActionByTag("9999")},createTableScreen:function(){var e,t=this;if(window.qg)return this.interstitialAd=qg.createInterstitialAd({adUnitId:"cb589a4e74aa3523eb7f2af37bae001b"}),void((e=this.interstitialAd&&this.interstitialAd.show())&&e.then(function(){}).catch(function(){}));window.tt&&tt.createInterstitialAd&&(this.interstitialAd=tt.createInterstitialAd({adUnitId:"edpi4cpg72526k94le"}),this.interstitialAd.load().then(function(){t.interstitialAd.show()}).catch(function(e){console.log(e)}))},destroyTableScreen:function(){this.interstitialAd&&this.interstitialAd.destroy()},creatInterFunc:function(){},ctor:function(){this.resHeight=0,this.resWidth=0,this.appName=""}});o._instance=null,o.getInstance=function(){if(!o._instance){o._instance=new o,i.getInstance();var e=cc.sequence(cc.delayTime(.2),cc.callFunc(function(){o._instance.initVideoAds()},this));cc.find("Canvas").runAction(e)}return o._instance},t.exports=o,cc._RF.pop()},{Singleton:"Singleton"}],AdvanceView:[function(e,t,n){"use strict";cc._RF.push(t,"f39f7cEn8NPOLPQc+RQ9SjR","AdvanceView");var i=e("AdsSingleton"),o=e("Singleton");cc.Class({extends:cc.Component,properties:{takeBtn:cc.Node,iconType:cc.Sprite,iconVideoFrame:cc.SpriteFrame,iconShareFrame:cc.SpriteFrame},onLoad:function(){},start:function(){this.rewardType=window.facade.getComponent("ShareADModel").getShareADType(),2!=this.rewardType?(this.iconType.spriteFrame=this.iconVideoFrame,this.type="Video"):(this.iconType.spriteFrame=this.iconShareFrame,this.type="Share")},initData:function(){},doClose:function(){window.facade.getComponent("GameModel").newerRewardCancelCount++,window.facade.getComponent("GameModel").passLevelCount=0},takeAward:function(){o.getInstance().gameMode=this,i.getInstance().showVideoAds("AdvanceView")},takeAwardSuccess:function(){window.facade.getComponent("GameModel").takeAdvanceReward(),window.facade.getComponent("GameModel").newerRewardCancelCount--,popUp.getComponent("Pop").removeTop()}}),cc._RF.pop()},{AdsSingleton:"AdsSingleton",Singleton:"Singleton"}],AlertTool:[function(e,t,n){"use strict";cc._RF.push(t,"7128bMwCDpDspZ2dLgOzJGz","AlertTool");var i={showMessage:function(e){cc.sys.platform==cc.sys.WECHAT_GAME&&wx.showToast({title:e,icon:"none",mask:!0,duration:2e3})},showSuccess:function(e){cc.sys.platform==cc.sys.WECHAT_GAME&&wx.showToast({title:e,icon:"success",mask:!0,duration:2e3})},hideToast:function(){cc.sys.platform==cc.sys.WECHAT_GAME&&wx.hideToast()},showLoading:function(e,t){cc.sys.platform==cc.sys.WECHAT_GAME&&wx.showLoading({title:e,mask:t})},hideLoading:function(){cc.sys.platform==cc.sys.WECHAT_GAME&&wx.hideLoading()},showConfirmModal:function(e,t,n){wx.showModal({title:e,content:t,confirm:function(){console.log("\u70b9\u51fb\u786e\u5b9a"),n.confirm&&n.confirm()}})},showModal:function(e,t,n,i){cc.sys.platform==cc.sys.WECHAT_GAME?wx.showModal({title:"\u63d0\u793a",content:e,confirmText:n,confirmColor:"#0a9528",cancelColor:"#646464",cancelText:t,success:function(e){e.confirm?(i.confirm(),console.log("\u7528\u6237\u70b9\u51fb\u786e\u5b9a")):e.cancel&&(i.cancel(),console.log("\u7528\u6237\u70b9\u51fb\u53d6\u6d88"))}}):i.cancel()}};t.exports=i,cc._RF.pop()},{}],AnalyticsUtilities:[function(e,t,n){"use strict";cc._RF.push(t,"06ec5x8XN5OsbnQwv5YN1Ls","AnalyticsUtilities"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){}return e.logEvent=function(e,t){return void 0===t&&(t=null),__awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(i){return n=null,CC_WECHATGAME&&window.wx.aldSendEvent&&(window.wx.aldSendEvent(e,t),n="wx"),console.info("\u6253\u70b9"+n+": event = "+e+", bundle = "+JSON.stringify(t)),[2]})})},e}();n.AnalyticsUtilities=i,cc._RF.pop()},{}],BackEnergyView:[function(e,t,n){"use strict";var i;function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cc._RF.push(t,"3d71e8GYvlJC7FQAW6LcVTe","BackEnergyView");var a=e("ModuleEventEnum"),s=(e("CommonFunc"),e("AdsSingleton")),c=e("Singleton");cc.Class((o(i={extends:cc.Component,properties:{btn:cc.Sprite,shareSkin:cc.SpriteFrame,videoSkin:cc.SpriteFrame,rewardEnergyLabel:cc.Label,recommendPre:cc.Prefab},onLoad:function(){this.frameCount=0},initData:function(e){this.addValue=e},start:function(){this.rewardType=window.facade.getComponent("ShareADModel").getShareADType(),2!=this.rewardType?this.btn.spriteFrame=this.videoSkin:this.btn.spriteFrame=this.shareSkin,this.rewardEnergyLabel.string=this.addValue},onEnable:function(){cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1e4},onDisable:function(){cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1},close:function(){window.facade.getComponent("GameModel").rewardEnergy(this.addValue),popUp.getComponent("FloatTip").showTip("\u6536\u83b7\u4f53\u529b x "+this.addValue),window.popUp.getComponent("Pop").removeTop()}},"onDisable",function(){cc.systemEvent.emit(a.BACK_ENERGY_CLOSED),window.facade.getComponent("BannerModel").hideBanner()}),o(i,"comfirm",function(){if(!facade.isMiniGame)return window.facade.getComponent("GameModel").rewardEnergy(2*this.addValue),popUp.getComponent("FloatTip").showTip("\u6536\u83b7\u4f53\u529b x "+2*this.addValue),void window.popUp.getComponent("Pop").removeTop();c.getInstance().gameMode=this,s.getInstance().showVideoAds("BackEnergyView")}),o(i,"backEnergyViewFunc",function(){window.facade.getComponent("GameModel").rewardEnergy(2*this.addValue),popUp.getComponent("FloatTip").showTip("\u6536\u83b7\u4f53\u529b x "+2*this.addValue),window.popUp.getComponent("Pop").removeTop()}),o(i,"update",function(e){this.frameCount++}),i)),cc._RF.pop()},{AdsSingleton:"AdsSingleton",CommonFunc:"CommonFunc",ModuleEventEnum:"ModuleEventEnum",Singleton:"Singleton"}],BannerModel:[function(e,t,n){"use strict";cc._RF.push(t,"ec605HNWI5PtYwJ6mu+7pcQ","BannerModel");var i=e("Network");cc.Class({extends:cc.Component,properties:{bannerAd:null,isTransfinite:!1,isOpen:!1,isInclude:!1,showCount:0,hideCount:0,delayTime:2e3,mistakeTime:2e3,isRandomLoc:!1,isRandomLocInclude:!1},initConfig:function(){},onLoad:function(){},initBanner:function(){if(window.facade.bannerWidth=300,window.facade.bannerHeight=226,facade.isMiniGame){facade.Screenratio&&1/facade.Screenratio>2.06&&(window.facade.bannerHeight=290),this.leftSize=0,window.facade.windowWidth>window.facade.bannerWidth&&(this.leftSize=(window.facade.windowWidth-window.facade.bannerWidth)/2);var e=this,t={};switch(net.platformName){case"wx":t={adUnitId:"adunit-83ab50403a2e3b36",style:{left:e.leftSize,top:window.facade.windowHeight-93,width:window.facade.bannerWidth}};break;case"swan":t={appid:"a0072267",apid:"6446734",style:{left:e.leftSize,top:facade.windowHeight-93,width:facade.bannerWidth}};break;case"qq":case"tt":t={}}return this.bannerAd=wx.createBannerAd(t),this.bannerAd.onLoad(function(){}),this.bannerAd.onError(function(t){e.bannerAd=null}),this.bannerAd.onResize(function(t){e.bannerHeight=t.height,facade.Screenratio&&1/facade.Screenratio>2.06?window.facade.bannerHeight=2*(t.height+15+20)+30:window.facade.bannerHeight=2*(t.height+20),this.rePosBanner()}.bind(this)),this.bannerAd}},showBanner:function(e){{if(facade.isMiniGame)return e&&facade.isMiniGame?window.facade.SAVE_MODE?(this.delayTime=0,void this.setupDelay(e)):this.isTransfinite?void this.setupDelay(e):this.isOpen?this.isInclude?void this.setupDelay(e):parseInt(this.getBannerCount())%(parseInt(this.hideCount)+parseInt(this.showCount))<this.hideCount?void this.setupDelay(e):void this.setupMistake(e):void this.setupDelay(e):void this.setupBanner();e&&(e.startDelay(),this.delayTimer=setTimeout(function(){e.endDelay()},this.delayTime))}},showVirtualBanner:function(e){var t=function(e){e&&e.endDelay()}.bind(this);if(this.isShowVirBanner=!0,facade.isMiniGame){if(window.facade.SAVE_MODE)return;if(this.isTransfinite)return console.log("lc banner-- \u5c55\u793a\u6b21\u6570\u8d85\u8fc7\u9650\u5236"),void t(e);if(!this.isOpen)return console.log("lc banner-- \u8bef\u70b9\u529f\u80fd\u672a\u5f00\u653e, \u5ef6\u8fdf"),void t(e);if(this.isInclude)return console.log("lc banner-- \u5904\u4e8e\u5173\u95ed\u5217\u8868, \u5ef6\u8fdf"),void t(e);var n=parseInt(this.getBannerCount());console.log("lc banner-- \u5c55\u793a\u6b21\u6570 no = ",this.hideCount," show = ",this.showCount);var i=n%(parseInt(this.hideCount)+parseInt(this.showCount));return console.log("lc banner--  bannerCount = "+n+"  show = "+i),i<this.hideCount?(console.log("lc banner-- \u83b7\u53d6 banner \u7c7b\u578b : \u4e0d\u5904\u4e8e\u5173\u95ed\u5217\u8868, \u5f53\u524d\u4e0d\u51fa\u73b0, \u5ef6\u8fdf"),void t(e)):(console.log("lc banner-- \u83b7\u53d6 banner \u7c7b\u578b : \u4e0d\u5904\u4e8e\u5173\u95ed\u5217\u8868, \u5f53\u524d\u51fa\u73b0, \u8bef\u70b9"),void this.setupMistake(e))}e&&(e.startDelay(),console.log("lc banner-- \u975e\u5fae\u4fe1 \u5f00\u59cb\u5ef6\u8fdf"),this.delayTimer=setTimeout(function(){console.log("lc banner-- \u975e\u5fae\u4fe1 \u7ed3\u675f\u5ef6\u8fdf"),e.endDelay()},this.delayTime))},hideBanner:function(){null!=this.mistakeTimer&&(clearTimeout(this.mistakeTimer),this.mistakeTimer=null),null!=this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null),this.isShowBanner=!1,null!=this.bannerAd&&this.bannerAd.hide()},setupDelay:function(e){e&&(e.startDelay(),this.setupBanner(null),this.delayTime>0?this.delayTimer=setTimeout(function(){e.endDelay()},this.delayTime):e.endDelay())},setupMistake:function(e){var t=this;e&&(this.isRandom=!1,this.isRandomLoc&&!this.isRandomLocInclude&&(this.isRandom=!0),e.startMistake(this.getStartRandomLocation()),this.mistakeTime>0?this.mistakeTimer=setTimeout(function(){t.isShowBanner?e.endMistake(t.getEndRandomLocation()):t.setupBanner(e)},this.mistakeTime):this.isShowBanner?e.endMistake(this.getEndRandomLocation()):this.setupBanner(e))},getStartRandomLocation:function(){var e=0,t=window.facade.bannerHeight/2-20,n=window.facade.windowWidth,i=-40;return this.isRandom&&(e=parseInt(Math.random()*(n-100)-(n-100)/2),t=parseInt(Math.random()*(window.facade.bannerHeight-100)+40),i=parseInt(150*Math.random()+160)),{x:e,bottom:t,top:i}},getEndRandomLocation:function(){var e=0,t=window.facade.bannerHeight+160,n=window.facade.windowWidth;return this.isRandom&&(e=parseInt(Math.random()*(n-100)-(n-100)/2)),{x:e,bottom:t,top:-40}},setupBanner:function(e){var t=this,n=this;this.isShowVirBanner&&(this.isShowVirBanner=!1,null!=e&&e.endMistake(n.getEndRandomLocation())),null!=this.bannerAd?(this.bannerAd.show().then(function(){n.isShowBanner=!0,n.uploadBannerShow(),null!=e&&e.endMistake(n.getEndRandomLocation())}),this.bannerAd.onError(function(i){t.bannerAd=null,console.log("lc banner-- \u663e\u793a err = "+i),null!=e&&e.endMistake(n.getEndRandomLocation())}),this.rePosBanner()):(this.bannerAd=this.initBanner(),this.bannerAd.onError(function(i){t.bannerAd=null,null!=e&&e.endMistake(n.getEndRandomLocation())}),this.bannerAd.show().then(function(){n.uploadBannerShow(),null!=e&&e.endMistake(n.getEndRandomLocation())}),this.rePosBanner())},rePosBanner:function(){facade.Screenratio&&1/facade.Screenratio>2.06?this.bannerAd.style.top=window.facade.windowHeight-window.facade.bannerHeight/2+20+15+15:this.bannerAd.style.top=window.facade.windowHeight-window.facade.bannerHeight/2+20},getBannerCount:function(){var e=cc.sys.localStorage.getItem("bannerCount"),t=cc.sys.localStorage.getItem("bannerTime");return e=e||0,t=t||0,parseInt(t)<window.net.getComponent("Net").getServerToday0Clock()&&(e=0),e},saveBannerCount:function(){var e=this.getBannerCount(),t=window.net.getComponent("Net").getServerTimeSec();e+=1,cc.sys.localStorage.setItem("bannerCount",e),cc.sys.localStorage.setItem("bannerTime",t)},uploadBannerShow:function(){var e=this,t=window.facade.httpServerAdress+"game/adBannerShow",n={game_id:window.facade.GameId,token:window.facade.getComponent("PlayerModel").token};i.postRequest(t,n,{success:function(t){e.isTransfinite=1!=t.is_show,e.saveBannerCount()},failure:function(t){e.isTransfinite=!1}})}}),cc._RF.pop()},{Network:"Network"}],Block:[function(e,t,n){"use strict";cc._RF.push(t,"fcffbre2W5Kz58mIfA72AdH","Block");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){},onBeginContact:function(e,t,n){"prop"==t.node.group&&"body"==n.node.group&&(cc.v2(t.body._b2Body.m_linearVelocity.x-n.body._b2Body.m_linearVelocity.x,t.body._b2Body.m_linearVelocity.y- -n.body._b2Body.m_linearVelocity.y).mag()>2&&this.killSuffer(n.node))},onPreSolve:function(e,t,n){},onPostSolve:function(e,t,n){},killSuffer:function(e){if(!this.suffer||this.suffer!=e.parent){this.suffer=e.parent;var t=cc.instantiate(this.suffer.getChildByName("blood"));t.active=!0,t.getComponent(cc.ParticleSystem).resetSystem(),t.parent=e,cc.systemEvent.emit(i.KILLED,this.suffer.name)}},expolosiveAnimate:function(){},update:function(e){}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],Boom:[function(e,t,n){"use strict";cc._RF.push(t,"1a5b96zuXBLSopJtQGYUVXE","Boom");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{boomPre:cc.Prefab},onLoad:function(){},start:function(){},onBeginContact:function(e,t,n){if(console.log("\u78b0\u649e\u4f53\u4eec",t.node.group,n.node.group),"boom"==t.node.group&&"bullet"==n.node.group)console.log("\u78b0\u649e"),this.explosive();else if("boom"==t.node.group&&"body"==n.node.group){cc.v2(t.body._b2Body.m_linearVelocity.x-n.body._b2Body.m_linearVelocity.x,t.body._b2Body.m_linearVelocity.y- -n.body._b2Body.m_linearVelocity.y).mag()>2&&this.explosive()}else if("boom"==t.node.group&&"boom"==n.node.group){cc.v2(t.body._b2Body.m_linearVelocity.x-n.body._b2Body.m_linearVelocity.x,t.body._b2Body.m_linearVelocity.y- -n.body._b2Body.m_linearVelocity.y).mag()>2&&this.explosive()}},explosive:function(){this.expolosiveAnimate(),this.findSuffer(),this.node.removeFromParent(),window.audio.getComponent("SoundManager").playEffect("bomb")},onPreSolve:function(e,t,n){},findSuffer:function(){var e=window.facade.selectedLevelType,t="other";"vip"==e&&(t="vip"),"injury"==e&&(t="role");for(var n=cc.director.getScene().getChildByName("Canvas").getChildByName("levelPlay").getChildren(),i=this.node.position,o=0;o<n.length;o++){if(n[o].name.match("suffer")||n[o].name.match(t))if(n[o].position.sub(i).mag()<2*this.node.width){var a=n[o];this.killSuffer(a)}}},onPostSolve:function(e,t,n){},killSuffer:function(e){for(var t=e.position.sub(this.node.position).normalizeSelf(),n=0;n<e.getChildren().length;n++){var o=e.getChildren()[n],a=o.getComponent(cc.RigidBody);if("body"==o.group&&a){var s=cc.director.getScene().getChildByName("Canvas").getChildByName("levelPlay").convertToNodeSpaceAR(o.convertToWorldSpaceAR(cc.v2()));a.applyLinearImpulse(t.mulSelf(1.8),s);var c=cc.instantiate(e.getChildByName("blood"));c.active=!0,c.getComponent(cc.ParticleSystem).resetSystem(),c.parent=o}}cc.systemEvent.emit(i.KILLED,e.name)},expolosiveAnimate:function(){var e=cc.instantiate(this.boomPre);e.position=cc.director.getScene().getChildByName("Canvas").getChildByName("levelPlay").convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(cc.v2())),e.getComponent(cc.ParticleSystem).autoRemoveOnFinish=!0,e.getComponent(cc.ParticleSystem).resetSystem(),cc.director.getScene().getChildByName("Canvas").getChildByName("levelPlay").addChild(e)},update:function(e){}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],Bullet:[function(e,t,n){"use strict";cc._RF.push(t,"f3152GumVhKvJSjpOYHIHx4","Bullet");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{crateBoomPre:cc.Prefab},onLoad:function(){this._first=!0,this._kills={},this.frameCount=0,this.reflectCount=0},start:function(){this.node.master.match("suffer")&&(this.node.getChildByName("tail").getComponent(cc.MotionStreak).color=cc.color(255,255,255))},onBeginContact:function(e,t,n){if("bullet"==t.node.group&&"body"==n.node.group){if(this._kills[n.node.parent.name]);else{if(this.reflectCount<=0&&"role"==n.node.parent.name)return;if(this._hitman=n.node.parent,this.hit=!0,this.out=!1,this._hitman&&this._hitman.getChildByName("blood")){var o=cc.instantiate(this._hitman.getChildByName("blood"));o.active=!0,o.getComponent(cc.ParticleSystem).resetSystem(),o.parent=n.node}}return this._kills[n.node.parent.name]=!0,void cc.systemEvent.emit(i.KILLED,n.node.parent.name)}if("bullet"==t.node.group&&this._first&&("border"==n.node.group||"prop"==n.node.group)){var a=cc.instantiate(cc.director.getScene().getChildByName("Canvas").getChildByName("hitEarth"));a.position=cc.director.getScene().getChildByName("Canvas").getChildByName("levelPlay").convertToNodeSpaceAR(t.node.convertToWorldSpaceAR(cc.v2())),a.getComponent(cc.ParticleSystem).autoRemoveOnFinish=!0,a.getComponent(cc.ParticleSystem).resetSystem(),cc.director.getScene().getChildByName("Canvas").getChildByName("levelPlay").addChild(a),this._first=!1}this.reflectCount++,window.audio.getComponent("SoundManager").playEffect("reflect"),this.reflectCount>20&&(window.facade.getComponent("LevelModel").useABullet(),this.node.removeFromParent())},onPreSolve:function(e,t,n){if("bullet"==t.node.group&&"body"==n.node.group)return this.out?void(e.disabled=!0):(e.disabled=!0,void n.node.getComponent(cc.RigidBody).applyForceToCenter(cc.v2(1e4,1e4)));if(t.body.isCross=!1,"bullet"==t.node.group&&"box"==n.node.group){var i=cc.instantiate(this.crateBoomPre);i.position=cc.director.getScene().getChildByName("Canvas").getChildByName("levelPlay").convertToNodeSpaceAR(n.node.convertToWorldSpaceAR(cc.v2())),i.getComponent(cc.ParticleSystem).autoRemoveOnFinish=!0,i.getComponent(cc.ParticleSystem).resetSystem(),cc.director.getScene().getChildByName("Canvas").getChildByName("levelPlay").addChild(i),n.node.removeFromParent()}},onPostSolve:function(e,t,n){"bullet"==t.node.group&&"body"==n.node.group&&(e.disabled=!0,this.out=!0),t.body.isCross=!1},update:function(e){this.frameCount++;var t=this.node.convertToWorldSpaceAR(cc.v2());(t.x<-500||t.x>1300||t.y<=-500||t.y>2e3)&&(window.facade.getComponent("LevelModel").useABullet(),this.node.removeFromParent())}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],ButtonScaler:[function(e,t,n){"use strict";cc._RF.push(t,"a32f2d7UklG8b2ja+3plXvA","ButtonScaler"),cc.Class({extends:cc.Component,properties:{pressedScale:1.1,transDuration:.24},onLoad:function(){var e=this;function t(t){0!=this.getComponent(cc.Button).interactable&&1!=e.pressedScale&&(this.stopAllActions(),this.runAction(e.scaleUpAction))}e.initScale=this.node.scale,e.button=e.getComponent(cc.Button),e.scaleDownAction=cc.scaleTo(e.transDuration,e.pressedScale),e.scaleUpAction=cc.scaleTo(e.transDuration,e.initScale),this.node.on("touchstart",function(t){0!=this.getComponent(cc.Button).interactable&&(1!=e.pressedScale&&(this.stopAllActions(),this.runAction(e.scaleDownAction)),window.audio.getComponent("SoundManager").playEffect("click"))},this.node),this.node.on("touchend",t,this.node),this.node.on("touchcancel",t,this.node)}}),cc._RF.pop()},{}],CarTouch:[function(e,t,n){"use strict";cc._RF.push(t,"8b36dnk0phKprFbi8DjcQ75","CarTouch");var i=e("MathUtils");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.inDragging=!1},initData:function(){this.track=this.node.getComponent("CarOperations").track,this.track.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.track.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.track.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.track.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},releaseData:function(){this.track.off(cc.Node.EventType.TOUCH_START),this.track.off(cc.Node.EventType.TOUCH_MOVE),this.track.off(cc.Node.EventType.TOUCH_END),this.track.off(cc.Node.EventType.TOUCH_CANCEL),this.track=null,this.rangePoints=null},onTouchStart:function(e){var t=e.getLocation();this._startTouchPos=t;var n=this.pickACar(t);n&&(n.park.getComponent("ParkCarJS").getParkStatus()==facade.CAR_GIFT||n.park.getComponent("ParkCarJS").carUId&&""!=n.park.getComponent("ParkCarJS").carUId&&n.park.getComponent("ParkCarJS").getParkStatus()!=facade.CAR_ANIMATION)?this._selectPark=n:this._selectPark=null},onTouchMove:function(e){var t=e.getLocation();if(this._selectPark&&this._selectPark.park.getComponent("ParkCarJS").getParkStatus()!=facade.CAR_RACING&&this._selectPark.park.getComponent("ParkCarJS").getParkStatus()!=facade.CAR_GIFT)if(this.inDragging){var n=this.node.getComponent("CarOperations").parkField.parent.convertToNodeSpaceAR(t);this.dragOne.x=n.x,this.dragOne.y=n.y}else cc.pDistance(this._startTouchPos,t)>=20&&this.startDrag()},onTouchEnd:function(e){if(this._selectPark){var t=this._selectPark.park.getComponent("ParkCarJS");if(!t.isMainPark||1!=t.carState){var n=this.node.getComponent("CarOperations").parkField,i=this.node.getComponent("CarOperations").parks,o=e.getLocation(),a=facade.getComponent("GameModel");if(this._selectPark.park.getComponent("ParkCarJS").getParkStatus()==facade.CAR_GIFT&&cc.pDistance(this._startTouchPos,o)<20){var s=facade.getComponent("UserModel").roleInfo.curSceneId;a.openCarGift(this._selectPark.index,s)}if(this._selectPark.park.getComponent("ParkCarJS").getParkStatus()==facade.CAR_RACING&&cc.pDistance(this._startTouchPos,o)<20)this.node.getComponent("CarOperations").rePark(this._selectPark.index,this._selectPark.park);else if(this.inDragging){var c=facade.getComponent("GuideModel"),r=window.facade.getComponent("UserModel").roleInfo.signinCount;if(!this.inFieldRange(o))return 1==r&&c.curStep<=window.facade.GUIDE_COMPOSE?void this.dragCancel():a.isLaneLimited()?a.hasLowerCarOnRacing(this._selectPark.park.getComponent("ParkCarJS").carUId)?(this.node.getComponent("CarOperations").switchTrack(this._selectPark.index,this._selectPark.park,o),void this.dragEnd()):(window.popUp.getComponent("FloatTip").showTip("\u8d5b\u9053\u5df2\u7ecf\u592a\u62e5\u6324\u5566\uff01"),void this.dragCancel()):(this.node.getComponent("CarOperations").toTrack(this._selectPark.index,this._selectPark.park,o),void this.dragEnd());var l=this.node.getComponent("GameMainJS").recycleNode.convertToWorldSpaceAR(cc.Vec2(0,0));if(cc.pDistance(l,o)<this.node.getComponent("GameMainJS").recycleNode.width/2)return this.node.getComponent("CarOperations").recycle(this._selectPark.index,this._selectPark.park),void this.dragEnd();if(1==r&&c.curStep==window.facade.GUIDE_MOVETO_TRACK)return void this.dragCancel();for(var h=0;h<i.length;h++){var d=i[h].convertToWorldSpaceAR(cc.Vec2(0,0));if(cc.pDistance(d,o)<=i[h].width*n.scaleX/2&&i[h]!=this._selectPark.park){if(i[h].getComponent("ParkCarJS").getParkStatus()==facade.CAR_RACING||i[h].getComponent("ParkCarJS").getParkStatus()==facade.CAR_ANIMATION||i[h].getComponent("ParkCarJS").getParkStatus()==facade.CAR_GIFT)break;a.getBestCarId();if(i[h].getComponent("ParkCarJS").carId==this._selectPark.park.getComponent("ParkCarJS").carId)if(a.getBestCarId()!=this._selectPark.park.getComponent("ParkCarJS").carId){s=facade.getComponent("UserModel").roleInfo.curSceneId;a._mergeTarget={mapId:s,posId:i[h].getComponent("ParkCarJS").parkIndex},this.node.getComponent("CarOperations").mergeCar(h,this._selectPark.index,i[h],this._selectPark.park),this.dragRelease()}else this.dragCancel();else null!=i[h].getComponent("ParkCarJS").carId&&""!=i[h].getComponent("ParkCarJS").carId?(this.node.getComponent("CarOperations").switchPark(h,this._selectPark.index,i[h],this._selectPark.park),this.dragEnd()):(this.node.getComponent("CarOperations").movePark(h,this._selectPark.index,i[h],this._selectPark.park),this.dragEnd());return}}this.dragCancel()}}}},onTouchCancel:function(e){this.onTouchEnd(e)},pickACar:function(e){for(var t=this.node.getComponent("CarOperations").parks,n=this.node.getComponent("CarOperations").parkField,i=0;i<t.length;i++){var o=t[i].convertToWorldSpaceAR(cc.Vec2(0,0));if(cc.pDistance(o,e)<=t[i].width*n.scaleX/2)return{park:t[i],index:i}}return null},startDrag:function(){if(this._selectPark.park.getComponent("ParkCarJS").carUId&&""!=this._selectPark.park.getComponent("ParkCarJS").carUId){this.node.getComponent("GameMainJS").disableBuy(),this.inDragging=!0;var e=window.facade.getComponent("GameModel").getCarLevelById(this._selectPark.park.getComponent("ParkCarJS").carId);this.dragOne=this.node.getComponent("CarOperations").createMoveCar(e);var t=this._selectPark.park.convertToNodeSpaceAR(this._startTouchPos);this.dragOne.x=t.x,this.dragOne.y=t.y;var n=this._selectPark.park.getComponent("ParkCarJS");n.isMainPark&&this.dragOne.getComponent(cc.Sprite)._sgNode.setState(n.carState),this._selectPark.park.getComponent("ParkCarJS").setCarGray(!0),this.node.getComponent("CarOperations").showMergeNote(this._selectPark.park.getComponent("ParkCarJS"))}},startComposeGuide:function(){var e=window.facade.getComponent("GuideModel");if(1==window.facade.getComponent("UserModel").roleInfo.signinCount&&e.curStep==window.facade.GUIDE_COMPOSE){this._selectPark&&this.inDragging&&(this.dragCancel(),this._selectPark=null),this.dragOne&&(this.dragOne.removeFromParent(),this.dragOne=null),this.inDragging=!0;var t=this.node.getComponent("CarOperations").parks;this._selectPark={park:t[0],index:0},this.dragOne=this.node.getComponent("CarOperations").createMoveCar(1),this._selectPark.park.getComponent("ParkCarJS").setCarGray(!0);var n=this._selectPark.park.convertToWorldSpaceAR(cc.v2(0,0));n=this.dragOne.parent.convertToNodeSpaceAR(n),this.dragOne.x=n.x,this.dragOne.y=n.y,this.node.getComponent("CarOperations").showMergeNote(this._selectPark.park.getComponent("ParkCarJS"));var i=t[1].convertToWorldSpaceAR(cc.v2(0,0));i=this.dragOne.parent.convertToNodeSpaceAR(i);var o=cc.sequence(cc.moveTo(.8,i),cc.callFunc(function(){this.node.getComponent("CarOperations").mergeCar(1,this._selectPark.index,t[1],this._selectPark.park),this.dragRelease(),this.endGuide()}.bind(this)));this.dragOne.runAction(o)}},startMovetoTarckGuide:function(){var e=window.facade.getComponent("GuideModel");if(1==window.facade.getComponent("UserModel").roleInfo.signinCount&&e.curStep==window.facade.GUIDE_MOVETO_TRACK){this._selectPark&&this.inDragging&&(this.dragCancel(),this._selectPark=null),this.dragOne&&(this.dragOne.removeFromParent(),this.dragOne=null),this.inDragging=!0;var t=this.node.getComponent("CarOperations").parks;this._selectPark={park:t[1],index:1},this._selectPark.park.getComponent("ParkCarJS").setCarGray(!0);var n=window.facade.getComponent("GameModel").getCarLevelById(this._selectPark.park.getComponent("ParkCarJS").carId);this.dragOne=this.node.getComponent("CarOperations").createMoveCar(n);var i=this.dragOne.parent.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(cc.v2(287,0))).x,o=this.dragOne.parent.convertToNodeSpaceAR(t[1].convertToWorldSpaceAR(cc.v2(0,0))).y,a=t[1].convertToWorldSpaceAR(cc.v2(0,0));a=this.dragOne.parent.convertToNodeSpaceAR(a),this.dragOne.position=a;var s=cc.sequence(cc.moveTo(.8,cc.v2(i,o)),cc.callFunc(function(){this.node.getComponent("CarOperations").toTrack(this._selectPark.index,this._selectPark.park,cc.v2(i,o)),this.dragEnd(),this.endGuide()}.bind(this)));this.dragOne.runAction(s)}},endGuide:function(){this.inDragging=!1,this.dragOne=null,this._selectPark=null,this.node.getComponent("CarOperations").hideMergeNote()},dragCancel:function(){this.node.getComponent("CarOperations").hideMergeNote();var e=this.node.getComponent("CarOperations").parkField.parent.convertToNodeSpaceAR(this._startTouchPos);this.dragOne&&this.dragOne.runAction(cc.sequence(cc.moveTo(.2,e),cc.callFunc(this.dragCancelDeal,this)))},dragCancelDeal:function(){this.node.getComponent("GameMainJS").enableBuy(),this._selectPark.park.getComponent("ParkCarJS").setCarGray(!1),this.dragOne.removeFromParent(),this.dragOne=null,this.inDragging=!1},dragEnd:function(){this.node.getComponent("CarOperations").hideMergeNote(),this.node.getComponent("GameMainJS").enableBuy(),this._selectPark.park.getComponent("ParkCarJS").setCarGray(!1),this.dragOne.removeFromParent(),this.dragOne=null,this.inDragging=!1},dragRelease:function(){this.node.getComponent("CarOperations").hideMergeNote(),this.node.getComponent("GameMainJS").enableBuy(),this.dragOne.removeFromParent(),this.dragOne=null,this.inDragging=!1},inFieldRange:function(e){this.range=this.node.getComponent("CarOperations").range;var t=this.range.node.parent.convertToNodeSpaceAR(e),n=this.getRangePoints();return i.pointIsInPolygon(t,n)},getRangePoints:function(){if(this.rangePoints)return this.rangePoints;for(var e=[],t=this.range.points,n=0;n<t.length;n++){var i=t[n].clone();i.x*=this.range.node.scaleX,i.y*=this.range.node.scaleY,e.push(i)}return this.rangePoints=e,this.rangePoints}}),cc._RF.pop()},{MathUtils:"MathUtils"}],ChangeNameView:[function(e,t,n){"use strict";cc._RF.push(t,"08e3fk0b/BIIZBijkOhvQYv","ChangeNameView");var i=e("ModuleEventEnum");e("CommonFunc");cc.Class({extends:cc.Component,properties:{comfirbtn:cc.Sprite,judgeInput:cc.Sprite,judgeTrue:cc.SpriteFrame,judgeFalse:cc.SpriteFrame,nameEditBox:cc.EditBox,titleLabel:cc.Label},onLoad:function(){if(!window.filterWord.m_wordList){var e=cc.loader.getRes("config/FilterwordDB.txt",cc.TextAsset);this.filterwordDBList=e.text.split(","),window.filterWord.init(this.filterwordDBList)}},start:function(){},initData:function(){},comfirBtn:function(){var e=this.nameEditBox.string,t=window.filterWord.runFilterWord(e);e!=t&&(this.nameEditBox.string=t,e=t,window.popUp.getComponent("FloatTip").showTip("\u5185\u5bb9\u5305\u542b\u654f\u611f\u8bcd\u6c47\uff0c\u5df2\u81ea\u52a8\u5c4f\u853d")),window.facade.getComponent("PlayerModel").nick=e,window.facade.getComponent("PlayerModel").recordRoleProfile(),cc.systemEvent.emit(i.PLAYER_NAME_CHANGE,e),window.popUp.getComponent("Pop").removeTop()},update:function(e){}}),cc._RF.pop()},{CommonFunc:"CommonFunc",ModuleEventEnum:"ModuleEventEnum"}],Chapter:[function(e,t,n){"use strict";cc._RF.push(t,"4c666yQ4flFvoDZdiN7ofuy","Chapter"),cc.Class({extends:cc.Component,properties:{itemPre:cc.Prefab,gird:cc.Node,mask:cc.Node,bg:cc.Sprite},onLoad:function(){},start:function(){this._data=this.node.data,this.currentLevel=window.facade.getComponent("LevelModel").getUnlockedLevelByType(facade.selectedLevelType),console.log("\u5f53\u524d\u7684level",this.currentLevel),this._data[0].Level>this.currentLevel&&(this.locked=!0,this.mask.active=!0);for(var e=0;e<this._data.length;e++){var t=cc.instantiate(this.itemPre);t.config=this._data[e],t.currentLevel=this.currentLevel,this.gird.addChild(t)}this.chapterId=Math.floor(this._data[0].Level/15)+1,this.bgSkinUrl="m_picture/bg/Scene_BG_"+(this.chapterId%4+1),console.log("\u80cc\u666f\u663e\u793a\u4ec0\u4e48\u56fe",this.bgSkinUrl),cc.loader.getRes(this.bgSkinUrl,cc.SpriteFrame)?this.bg.spriteFrame=cc.loader.getRes(this.bgSkinUrl,cc.SpriteFrame):cc.loader.loadRes(this.bgSkinUrl,cc.SpriteFrame,this.onSkinLoaded.bind(this))},onSkinLoaded:function(e,t){this.bg.spriteFrame=cc.loader.getRes(this.bgSkinUrl,cc.SpriteFrame)},update:function(e){}}),cc._RF.pop()},{}],CharacterBox:[function(e,t,n){"use strict";cc._RF.push(t,"68251ETCO9Ac5XoVfKT4OgP","CharacterBox");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{itemPre:cc.Prefab,content:cc.Node,character:cc.Sprite,characterHand:cc.Sprite,btn:cc.Node,priceLabel:cc.Node,buyBtnSprite:cc.SpriteFrame,useBtnSprite:cc.SpriteFrame,videoBtnSprite:cc.SpriteFrame},onLoad:function(){this.datas=[1,2,3,4,5,6,7],this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMoved,this),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancelled,this),cc.systemEvent.on(i.CHARACTER_INFO,this.onGotCharater,this),cc.systemEvent.on(i.SKIN_WATCHED,this.onSKinWatched,this)},_onTouchBegan:function(e,t){var n=e.touch;this._startTouch=n.getLocation().clone(),this._startContentX=this.content.x},_onTouchMoved:function(e,t){var n=e.touch;this.deltaMove=n.getLocation().sub(n.getStartLocation()),this._touchMoved?this.content.x=this._startContentX+this.deltaMove.x:this.deltaMove.mag()>7&&(this.content.x=this._startContentX+this.deltaMove.x,this._touchMoved=!0)},_onTouchEnded:function(e,t){var n=e.touch;this._touchMoved&&e.stopPropagation(),this._touchMoved?(this._touchMoved=!1,this.turnHome()):this.onClick(n)},onClick:function(e){for(var t=this.content.getChildren(),n=null,i=0;i<t.length;i++){var o=t[i];if(o.convertToNodeSpaceAR(e.getLocation()).mag()<120){o.getComponent("CharacterItem").onClick(),n=o;break}}if(n){this._touchMoved=!0;var a=200*Math.round(-n.x/200);this.deltaMove||(this.deltaMove=cc.v2()),this.deltaMove.x=a-this.content.x,this.content.stopAllActions();var s=cc.moveTo(.2,a,0);s.easing(cc.easeSineIn()),this.content.runAction(cc.sequence(s,cc.callFunc(this.selected,this)))}},_onTouchCancelled:function(e,t){this._touchMoved=!1,this.turnHome()},turnHome:function(){var e=200*Math.round(this.content.x/200);this.content.stopAllActions();var t=cc.moveTo(.2,e,0);t.easing(cc.easeSineIn()),this.content.runAction(cc.sequence(t,cc.callFunc(this.selected,this)))},selected:function(){this._touchMoved=!1;for(var e=this.content.getChildren(),t=999999,n=null,i=0;i<e.length;i++){var o=e[i],a=this.node.convertToNodeSpaceAR(o.convertToWorldSpaceAR(cc.v2(0,0))).x,s=Math.abs(a);s<t&&(t=s,n=e[i])}this._selectOne=n,window.facade.getComponent("GameModel").isCharacterLocked(n.data)},onBuyClick:function(){window.facade.getComponent("GameModel").isCharacterLocked(this._selectOne.data)&&(2==this.selectedConfig.CostType||(window.facade.getComponent("GameModel").buyACharacter(this._selectOne.data),this.updateStatus()))},pageChange:function(e,t){if(console.log(e._curPageIdx),e._curPageIdx<this._curPageIdx)for(var n=0;n<this._curPageIdx-e._curPageIdx;n++)this.removeRight(),this.addLeft();else e._curPageIdx,this._curPageIdx;this.removeLeft(),this.addRight()},removeRight:function(){var e=this.node.getComponent(cc.PageView).getPages();this.node.getComponent(cc.PageView).removePageAtIndex(e.length-1)},addLeft:function(){var e=this.node.getComponent(cc.PageView).getPages()[0].data-1;e<=0&&(e=this.datas[this.datas.length-1]);var t=cc.instantiate(this.itemPre);t.data=e,this.node.getComponent(cc.PageView).insertPage(t,0),this.updatePosition()},updatePosition:function(){this.node.getComponent(cc.PageView)._curPageIdx=2,this.content.x=-this.content.width/2,this._curPageIdx=2},removeLeft:function(){},addRight:function(){},start:function(){window.facade.getComponent("GameModel").charaterConfig&&this.onGotCharater()},onGotCharater:function(){this.characterId=window.facade.getComponent("GameModel").characterId;for(var e=[],t=0,n=0;n<this.datas.length;n++)this.characterId==this.datas[n]&&(t=n);for(var i=0;i<5;i++){var o=t-2+i;o<0?o=this.datas.length+o:o>=this.datas.length&&(o-=this.datas.length),e[i]=this.datas[o]}for(i=0;i<5;i++){var a=cc.instantiate(this.itemPre);a.data=e[i],a.x=200*i-400,this.content.addChild(a)}this.updateContent(),this.selected()},onSKinWatched:function(){this.updateStatus()},init:function(){this.content.x=-this.content.width/2},updateContent:function(){this.content.width=200*this.content.getChildren().length},insertToRight:function(e){var t=this.content.getChildren(),n=t[t.length-1],i=n.data+1;i>this.datas[this.datas.length-1]&&(i=this.datas[0]),e.data=i,e.getComponent("CharacterItem").init(),e.x=n.x+200},insertToLeft:function(e){var t=this.content.getChildren()[0],n=t.data-1;n<this.datas[0]&&(n=this.datas[this.datas.length-1]),e.data=n,e.getComponent("CharacterItem").init(),e.x=t.x-200},dealSelection:function(e){e!=this._selectId&&(this._selectId=e,this.setSkin(),this.updateStatus())},setSkin:function(){var e=this;cc.loader.loadRes("m_picture/roleFull/role"+this._selectId,cc.SpriteFrame,function(t,n){e.character.getComponent(cc.Sprite).spriteFrame=n,console.log("\u52a0\u8f7d\u6210\u529f\u4e86\u5417",t,n)}),cc.loader.loadRes("m_picture/roleFull/role"+this._selectId+"_hand",cc.SpriteFrame,function(t,n){e.characterHand.getComponent(cc.Sprite).spriteFrame=n,console.log("\u52a0\u8f7d\u6210\u529f\u4e86\u5417\u4e8c",t,n)})},updateStatus:function(){if(this.selectedConfig=window.facade.getComponent("GameModel").charaterConfig[String(this._selectId)],console.log(this.selectedConfig),window.facade.getComponent("GameModel").isCharacterLocked(this._selectId))if(2==this.selectedConfig.CostType){var e=window.facade.getComponent("GameModel").getWatchCount(this._selectId);this.priceLabel.getComponent("TextureLabel").setText(e+"/"+this.selectedConfig.Cost),this.priceLabel.parent.active=!0,this.priceLabel.parent.getChildByName("cash").active=!1,this.btn.getComponent(cc.Sprite).spriteFrame=this.videoBtnSprite,this.btn.active=!0}else this.priceLabel.getComponent("TextureLabel").setText(String(this.selectedConfig.Cost)),this.priceLabel.parent.getChildByName("cash").active=!0,this.priceLabel.parent.active=!0,this.btn.getComponent(cc.Sprite).spriteFrame=this.buyBtnSprite,this.btn.active=!0;else this.priceLabel.parent.active=!1,this.btn.getComponent(cc.Sprite).spriteFrame=this.useBtnSprite,window.facade.getComponent("GameModel").characterId==this._selectId?this.btn.active=!1:this.btn.active=!0},useSkin:function(){cc.systemEvent.emit(i.ROLE_SELECTED,this._selectId),this.btn.active=!1},btnClick:function(){this.priceLabel.parent.active?this.onBuyClick():this.useSkin()},update:function(e){var t=this.content.getChildren();if(this._touchMoved){for(var n=0;n<t.length;n++){var i=(o=t[n]).convertToWorldSpaceAR(cc.v2(100,0));if(i.x<0&&this.deltaMove.x<0){this.insertToRight(o);break}if(i.x>740&&this.deltaMove.x>0){this.insertToLeft(o);break}}t.sort(function(e,t){return e.x<t.x?-1:1})}for(n=0;n<t.length;n++){var o=t[n],a=this.node.convertToNodeSpaceAR(o.convertToWorldSpaceAR(cc.v2(0,0))).x;o.selection=-1e-5*Math.pow(a,2)+1.3,o.selection>1.25&&this.dealSelection(o.data)}}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],CharacterItem:[function(e,t,n){"use strict";cc._RF.push(t,"a9e02PQyjxNZ6RjSxD3hyzy","CharacterItem");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{man:cc.Sprite,frame:cc.Sprite,frameSkin1:cc.SpriteFrame,frameSkin2:cc.SpriteFrame,effect:cc.Node,freeIcon:cc.Node},onLoad:function(){this.node.opacity=0,cc.systemEvent.on(i.CHARACTER_GOT,this.characterGot,this)},start:function(){this.init()},init:function(){cc.loader.getRes("roles",cc.SpriteAtlas)?this.initSkins():cc.loader.loadRes("roles",cc.SpriteAtlas,this.onAtlasLoad.bind(this)),this.config=window.facade.getComponent("GameModel").charaterConfig[String(this.node.data)],facade.getComponent("GameModel").isCharacterLocked(this.node.data)?this.freeIcon.active=2==this.config.CostType:this.freeIcon.active=!1},onAtlasLoad:function(){this.initSkins()},initSkins:function(){this.node.runAction(cc.fadeIn(.2));var e=this;cc.loader.loadRes("m_picture/roleFull/role"+this.node.data+"_head",cc.SpriteFrame,function(t,n){e.man.spriteFrame=n})},characterGot:function(e){e==this.node.data&&(this.effect.active=!0,this.effect.getComponent(cc.ParticleSystem).resetSystem())},onClick:function(){console.log("click...",this.node.data)},update:function(e){!this.node.selection||this.node.selection<=1.2?this.frame.spriteFrame=this.frameSkin1:this.frame.spriteFrame=this.frameSkin2}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],ClientServerUI:[function(e,t,n){"use strict";cc._RF.push(t,"54d71IO4uJBIJSHenLgyuij","ClientServerUI"),cc.Class({extends:cc.Component,properties:{},start:function(){facade.getComponent("GameModel").checkClientRewardShow()},onClickBack:function(){popUp.getComponent("Pop").removeByName("ClientServerUI")},onClickReward:function(){window.wx&&facade.getComponent("PlayerModel").wxAdaptor.getClientReward()}}),cc._RF.pop()},{}],CollectGift:[function(e,t,n){"use strict";cc._RF.push(t,"9e54b3UIkNBw7LcAA25ZZrU","CollectGift"),cc.Class({extends:cc.Component,properties:{tipNode:cc.Node,content:cc.Node,backBtn:cc.Node,getBtn:cc.Node},start:function(){var e=facade.getComponent("GameModel").lastFetchColectTime;e||(e=0),this.getBtn.active=0==e},viewDidAppear:function(){this.updatePos();var e=cc.moveBy(.3,cc.v2(0,-100)),t=cc.repeatForever(cc.sequence(e,e.reverse()));this.tipNode.runAction(t)},updatePos:function(){var e=facade.getComponent("PlayerModel").wxAdaptor.getMenuPos();null!=e&&(this.tipNode.x=e.x*facade.screenWidth-this.tipNode.width/2,this.tipNode.y=e.y*facade.screenHeight-this.tipNode.height/2,this.backBtn.y=this.tipNode.y+20,this.content.y=this.tipNode.y-30,this.content.scale=.87)},onClickBack:function(){popUp.getComponent("Pop").removeTop()},onClickGet:function(){facade.getComponent("PlayerModel").wxAdaptor.checkCollectCondi()?(facade.getComponent("GameModel").getCollectReward(),popUp.getComponent("Pop").removeTop()):popUp.getComponent("FloatTip").showTip("\u8bf7\u4ece\u6211\u7684\u5c0f\u7a0b\u5e8f\u8fdb\u5165\u6e38\u620f\uff01")}}),cc._RF.pop()},{}],CommonFunc:[function(e,t,n){"use strict";cc._RF.push(t,"7c648/IvX1OzawDZw9kDlHp","CommonFunc");var i={changeNumToTime:function(e){var t=parseInt(e/60),n="",i=parseInt(t/60);i>0&&(n=i+":",t=parseInt(t%60));var o=e%60,a=t+"",s=o+"";return 0===t&&(a="0"),t<10&&(a="0"+t),o<10&&(s="0"+o),n+a+":"+s},setShareADShow:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;switch(e){case 1:t.active=!0,null!=i&&(i.string="\u770b\u89c6\u9891");break;case 2:n.active=!0,null!=i&&(i.string="\u53bb\u5206\u4eab")}}};t.exports=i,cc._RF.pop()},{}],Earth:[function(e,t,n){"use strict";cc._RF.push(t,"068cadzUbpBHavKGexxGZi7","Earth");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{},start:function(){},onBeginContact:function(e,t,n){"border"==t.node.group&&"body"==n.node.group&&(cc.v2(n.body._b2Body.m_linearVelocity.x,n.body._b2Body.m_linearVelocity.y).mag()>2&&this.killSuffer(n.node))},onPreSolve:function(e,t,n){},onPostSolve:function(e,t,n){},killSuffer:function(e){if(!this.suffer){this.suffer=e.parent;var t=cc.instantiate(this.suffer.getChildByName("blood"));t.active=!0,t.getComponent(cc.ParticleSystem).resetSystem(),t.parent=e,cc.systemEvent.emit(i.KILLED,this.suffer.name)}}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],EnergyNeedView:[function(e,t,n){"use strict";cc._RF.push(t,"ad100rUk+lMYIZzty3UDNLp","EnergyNeedView");e("CommonFunc");var i=e("AdsSingleton"),o=e("Singleton");cc.Class({extends:cc.Component,properties:{btn:cc.Sprite,shareSkin:cc.SpriteFrame,videoSkin:cc.SpriteFrame,title:cc.Label},onLoad:function(){this.frameCount=0},initData:function(){},start:function(){this.rewardType=window.facade.getComponent("ShareADModel").getShareADType(),2!=this.rewardType?(this.btn.spriteFrame=this.videoSkin,this.title.string="\u89c2\u770b\u89c6\u9891\u83b7\u5f97"):(this.btn.spriteFrame=this.shareSkin,this.title.string="\u5206\u4eab\u7ed9\u670b\u53cb\u4eec\u83b7\u5f97")},close:function(){window.popUp.getComponent("Pop").removeTop()},onDisable:function(){window.facade.getComponent("BannerModel").hideBanner()},comfirm:function(){if(!facade.isMiniGame)return window.facade.getComponent("GameModel").rewardEnergy(5),popUp.getComponent("FloatTip").showTip("\u6536\u83b7\u4f53\u529b x 5"),void window.popUp.getComponent("Pop").removeTop();o.getInstance().gameMode=this,i.getInstance().showVideoAds("energyNeedView")},energyNeedViewFunc:function(){window.facade.getComponent("GameModel").rewardEnergy(5),popUp.getComponent("FloatTip").showTip("\u6536\u83b7\u4f53\u529b x 5"),window.popUp.getComponent("Pop").removeTop()},update:function(e){this.frameCount++}}),cc._RF.pop()},{AdsSingleton:"AdsSingleton",CommonFunc:"CommonFunc",Singleton:"Singleton"}],EnergyTimer:[function(e,t,n){"use strict";cc._RF.push(t,"b2cacT+nhRPM5WGiPq9O1Ft","EnergyTimer");var i=e("CommonFunc");cc.Class({extends:cc.Component,properties:{energyLabel:cc.Node,energyCD:cc.Node},onLoad:function(){this.frameCount=0},start:function(){},init:function(){},update:function(e){if(this.energyLabel.getComponent("TextureLabel").setText(String(window.facade.getComponent("GameModel").energy)),this.energyCD.active=!window.facade.getComponent("GameModel").isEnergyFull(),this.frameCount++,this.frameCount%30==0){var t=window.facade.getComponent("GameModel").getNextEnergyTime(),n=(new Date).getTime(),o=Math.round((t-n)/1e3),a=String(i.changeNumToTime(o));this.energyCD.getComponent("TextureLabel").setText(a)}}}),cc._RF.pop()},{CommonFunc:"CommonFunc"}],EntranceItem:[function(e,t,n){"use strict";cc._RF.push(t,"ac8cbn8DlJLGawjpwJrejqC","EntranceItem"),cc.Class({extends:cc.Component,properties:{desc:cc.Label,icon:cc.Sprite,btn:cc.Node},start:function(){cc.loader.loadRes("uis",cc.SpriteAtlas,function(e,t){e?console.error(e):this.icon.spriteFrame=t.getSpriteFrame(this.itemData.name)}.bind(this)),this.desc.string=this.itemData.desc,this.btn.getChildByName("strength").active=1==this.itemData.type,this.btn.getChildByName("cash").active=!(1==this.itemData.type),this.btn.getChildByName("Label").getComponent(cc.Label).string=this.itemData.act},setItemData:function(e,t){this.itemId=e,this.itemData=t},onClickSelf:function(){if(""!=this.itemData.target){if("HoverWinUI"==this.itemData.target&&facade.getComponent("PlayerModel").wxAdaptor.checkHoverWinShow())return void facade.getComponent("GameModel").applyHoverWinReward();popUp.getComponent("Pop").addPopByName(this.itemData.target,null,!0,!0,!1),e("VirBannerCtrl").hideVirBanner()}else popUp.getComponent("FloatTip").showTip("\u5f00\u53d1\u4e2d\uff0c\u656c\u8bf7\u671f\u5f85\uff01")}}),cc._RF.pop()},{VirBannerCtrl:"VirBannerCtrl"}],EntranceUI:[function(e,t,n){"use strict";cc._RF.push(t,"53acfRSOfRGJbpC7wdxQJNm","EntranceUI");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{title:cc.Label,scroll:cc.ScrollView,item:cc.Prefab,recommendPre:cc.Prefab,mianfeitili:cc.Node,xinrenhaoli:cc.Node},onLoad:function(){cc.systemEvent.on(i.UPDATE_HOVER_SHOW,this.initContent,this),this.strengthList=[{name:"pop_icon_fc",desc:"\u6dfb\u52a0\u6d6e\u7a97\u5f97\u4f53\u529b",type:1,target:"HoverWinUI",act:"\u53bb\u9886\u53d6"},{name:"pop_icon_yq",desc:"\u9080\u8bf7\u597d\u53cb\u5f97\u4f53\u529b",type:1,target:"InviteDailyUI",act:"\u53bb\u9886\u53d6"}],this.cashList=[{name:"pop_icon_sc",desc:"\u6536\u85cf\u6e38\u620f\u5f97\u597d\u793c",type:0,target:"CollectGift",act:"\u53bb\u6536\u85cf"},{name:"pop_icon_rz",desc:"\u65b0\u624b\u5165\u9a7b\u5f97\u8c6a\u793c",type:0,target:"InviteNewUI",act:"\u53bb\u9080\u8bf7"}]},start:function(){this.initContent()},initData:function(e){this.data=e},onEnable:function(){cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1e4},onDisable:function(){cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1},initContent:function(){if(facade.getComponent("GameModel").checkHoverWinRewardShow()||this.strengthList.shift(),!facade.getComponent("GameModel").checkClientRewardShow()){var e=2==this.strengthList.length?0:1;this.strengthList.splice(e,1)}0!=facade.getComponent("GameModel").lastFetchColectTime&&this.cashList.splice(0,1);var t=1==this.data?this.strengthList:this.cashList;for(var n in this.mianfeitili.active=this.xinrenhaoli.active=!1,1==this.data?this.mianfeitili.active=!0:this.xinrenhaoli.active=!0,0!=this.scroll.content.childrenCount&&this.scroll.content.removeAllChildren(),t){var i=cc.instantiate(this.item);i.getComponent("EntranceItem").setItemData(parseInt(n),t[n]),this.scroll.content.addChild(i)}},doClose:function(){cc.systemEvent.off(i.UPDATE_HOVER_SHOW,this.initContent,this)},onClickBack:function(){popUp.getComponent("Pop").removeTop()}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],ExportLevelDataScript:[function(e,t,n){"use strict";cc._RF.push(t,"f030eMVvglE5IueeScKhSjc","ExportLevelDataScript"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.director.getPhysicsManager().enabled=!0;var e=cc.director.getPhysicsManager();e.enabledAccumulator=!0,e.FIXED_TIME_STEP=1/30,e.VELOCITY_ITERATIONS=8,e.POSITION_ITERATIONS=8},start:function(){for(var e,t=this,n=this,i=function(i){a=cc.sequence(cc.delayTime(5+1*i),cc.callFunc(function(){cc.loader.loadRes("levels/level_"+(i+1),function(t,o){(e=cc.instantiate(o)).x=0,e.y=0,n.node.addChild(e),n.lookData(e,"level_"+(i+1))})},t),cc.delayTime(1),cc.callFunc(function(){},t)),t.node.runAction(a)},o=0;o<0;o++){var a;i(o)}},lookData:function(e,t){this.level=e,console.log("\u5b9e\u9645\u5173\u5361",this.level);for(var n={sun_data:null,earth_data:null,role_data:null,enemy_data:null,back_data:null,block_data:null,moveBlock_data:null,boom_data:null,box_data:null,tu_data:null,staticTex_data:null,axle_data:null,ball_data:null,crossBall_data:null,crossBlock_data:null,grenade_data:null,magicBox_data:null,rope_data:null,vip_data:null,switch_data:null},i={type:null,posX:null,posY:null,width:null,height:null,angle:null,anchorX:null,anchorY:null,moveDirection:null,moveRangeY:null,moveRangeX:null,moveSpeed:null,connectBody:null,target:null,phyWidth:null,phyHeight:null,enabledContact:null,density:null,ropeNums:null},o=[],a=0;a<this.level.children.length;a++){if("sun"==(m=this.level.children[a]).name){var s=m.parent.convertToWorldSpaceAR(m),c=this.level.convertToNodeSpaceAR(s);i.posX=Math.floor(c.x),i.posY=Math.floor(c.y),i.width=m.width,i.height=m.height,i.angle=m.angle,i.anchorX=m.anchorX,i.anchorY=m.anchorY;var r=this.deepCopy(i);o.push(r)}}for(var l=[],h=0;h<this.level.children.length;h++){if("earth"==(m=this.level.children[h]).name){s=m.parent.convertToWorldSpaceAR(m),c=this.level.convertToNodeSpaceAR(s);i.posX=Math.floor(c.x),i.posY=Math.floor(c.y),i.width=m.width,i.height=m.height,i.angle=m.angle,i.anchorX=m.anchorX,i.anchorY=m.anchorY,i.phyWidth=m.getComponent(cc.PhysicsBoxCollider).size.width,i.phyHeight=m.getComponent(cc.PhysicsBoxCollider).size.height;r=this.deepCopy(i);l.push(r)}}for(var d=[],p=0;p<this.level.children.length;p++){if("role"==(m=this.level.children[p]).name){s=m.parent.convertToWorldSpaceAR(m),c=this.level.convertToNodeSpaceAR(s);i.posX=Math.floor(c.x),i.posY=Math.floor(c.y),i.width=m.width,i.height=m.height,i.angle=m.angle,i.anchorX=m.anchorX,i.anchorY=m.anchorY,i.type=1;r=this.deepCopy(i);d.push(r)}else if("rolegnd"==m.name){s=m.parent.convertToWorldSpaceAR(m),c=this.level.convertToNodeSpaceAR(s);i.posX=Math.floor(c.x),i.posY=Math.floor(c.y),i.width=m.width,i.height=m.height,i.angle=m.angle,i.anchorX=m.anchorX,i.anchorY=m.anchorY,i.type=2;r=this.deepCopy(i);d.push(r)}}for(var u=[],g=0;g<this.level.children.length;g++){var m=this.level.children[g];if(console.log("\u654c\u4eba\u88c1\u526a\u540e",m.name.substring(0,5)),"suffer"==m.name.substring(0,6)){s=m.parent.convertToWorldSpaceAR(m),c=this.level.convertToNodeSpaceAR(s);switch(i.posX=Math.floor(c.x),i.posY=Math.floor(c.y),i.width=m.width,i.height=m.height,i.angle=m.angle,i.anchorX=m.anchorX,i.anchorY=m.anchorY,m.name.substring(0,9)){case"suffer_01":i.type=1;break;case"suffer_02":i.type=2;break;case"suffer_03":i.type=3;break;case"suffer_04":i.type=4}r=this.deepCopy(i);u.push(r)}}for(var f=[],v=0;v<this.level.children.length;v++){if((m=this.level.children[v]).getComponent(cc.Sprite)&&null!=m.getComponent(cc.Sprite).spriteFrame)if("_Static_Back"==(b=m.getComponent(cc.Sprite).spriteFrame.name).substring(b.length-12)){s=m.parent.convertToWorldSpaceAR(m),c=this.level.convertToNodeSpaceAR(s);i.posX=Math.floor(c.x),i.posY=Math.floor(c.y),i.width=m.width,i.height=m.height,i.angle=m.angle,i.anchorX=m.anchorX,i.anchorY=m.anchorY,"image_Scene_01_Static_Back"==m.getComponent(cc.Sprite).spriteFrame.name?i.type=1:"image_Scene_02_Static_Back"==m.getComponent(cc.Sprite).spriteFrame.name?i.type=2:"image_Scene_03_Static_Back"==m.getComponent(cc.Sprite).spriteFrame.name?i.type=3:"image_Scene_04_Static_Back"==m.getComponent(cc.Sprite).spriteFrame.name?i.type=4:"image_Scene_05_Static_Back"==m.getComponent(cc.Sprite).spriteFrame.name?i.type=5:"image_Scene_06_Static_Back"==m.getComponent(cc.Sprite).spriteFrame.name?i.type=6:"image_Scene_07_Static_Back"==m.getComponent(cc.Sprite).spriteFrame.name&&(i.type=7);r=this.deepCopy(i);f.push(r)}}for(var C=[],w=0;w<this.level.children.length;w++){if((m=this.level.children[w]).getComponent(cc.Sprite)&&null!=m.getComponent(cc.Sprite).spriteFrame)if("_Static_Front"==(b=m.getComponent(cc.Sprite).spriteFrame.name).substring(b.length-13)){s=m.parent.convertToWorldSpaceAR(m),c=this.level.convertToNodeSpaceAR(s);i.posX=Math.floor(c.x),i.posY=Math.floor(c.y),i.width=m.width,i.height=m.height,i.angle=m.angle,i.anchorX=m.anchorX,i.anchorY=m.anchorY,"image_Scene_01_Static_Front"==m.getComponent(cc.Sprite).spriteFrame.name?i.type=1:"image_Scene_02_Static_Front"==m.getComponent(cc.Sprite).spriteFrame.name?i.type=2:"image_Scene_03_Static_Front"==m.getComponent(cc.Sprite).spriteFrame.name?i.type=3:"image_Scene_04_Static_Front"==m.getComponent(cc.Sprite).spriteFrame.name?i.type=4:"image_Scene_05_Static_Front"==m.getComponent(cc.Sprite).spriteFrame.name?i.type=5:"image_Scene_06_Static_Front"==m.getComponent(cc.Sprite).spriteFrame.name?i.type=6:"image_Scene_07_Static_Front"==m.getComponent(cc.Sprite).spriteFrame.name&&(i.type=7);r=this.deepCopy(i);C.push(r)}for(var S=0;S<m.children.length;S++){if((J=m.children[S]).getComponent(cc.Sprite)&&null!=J.getComponent(cc.Sprite).spriteFrame)if("_Static_Front"==(M=J.getComponent(cc.Sprite).spriteFrame.name).substring(M.length-13)){s=J.parent.convertToWorldSpaceAR(J),c=this.level.convertToNodeSpaceAR(s);i.posX=Math.floor(c.x),i.posY=Math.floor(c.y),i.width=J.width,i.height=J.height,i.angle=J.angle+m.angle,i.anchorX=m.anchorX,i.anchorY=m.anchorY;r=this.deepCopy(i);C.push(r)}}}for(var y=[],_=0;_<this.level.children.length;_++){if("moveBlock"==(m=this.level.children[_]).name.substring(0,4)){s=m.parent.convertToWorldSpaceAR(m),c=this.level.convertToNodeSpaceAR(s);i.posX=Math.floor(c.x),i.posY=Math.floor(c.y),i.width=m.width,i.height=m.height,i.angle=m.angle,i.anchorX=m.anchorX,i.anchorY=m.anchorY,1==m.getComponent("MoveBlock").vertical?i.moveDirection="vertical":i.moveDirection="horizontal",i.moveRangeY=m.getComponent("MoveBlock").moveRangeY,i.moveRangeX=m.getComponent("MoveBlock").moveRangeX,i.moveSpeed=m.getComponent("MoveBlock").moveSpeed,i.density=m.getComponent(cc.PhysicsBoxCollider).density;r=this.deepCopy(i);y.push(r)}}for(var E=[],L=0;L<this.level.children.length;L++){if("crate"==(m=this.level.children[L]).name.substring(0,5)){s=m.parent.convertToWorldSpaceAR(m),c=this.level.convertToNodeSpaceAR(s);i.posX=Math.floor(c.x),i.posY=Math.floor(c.y),i.width=m.width,i.height=m.height,i.angle=m.angle,i.anchorX=m.anchorX,i.anchorY=m.anchorY,1==m.getComponent(cc.RigidBody).enabledContactListener?i.enabledContact=1:i.enabledContact=0,i.density=m.getComponent(cc.PhysicsBoxCollider).density;r=this.deepCopy(i);E.push(r)}}for(var T=[],A=0;A<this.level.children.length;A++){if("boom"==(m=this.level.children[A]).name.substring(0,4)){s=m.parent.convertToWorldSpaceAR(m),c=this.level.convertToNodeSpaceAR(s);i.posX=Math.floor(c.x),i.posY=Math.floor(c.y),i.width=m.width,i.height=m.height,i.angle=m.angle,i.anchorX=m.anchorX,i.anchorY=m.anchorY,1==m.getComponent(cc.RigidBody).enabledContactListener?i.enabledContact=1:i.enabledContact=0,"image_Boom"==m.getComponent(cc.Sprite).spriteFrame.name?i.type="red":"image_BoomY"==m.getComponent(cc.Sprite).spriteFrame.name?i.type="purple":"image_BoomG"==m.getComponent(cc.Sprite).spriteFrame.name?i.type="green":"image_BoomB"==m.getComponent(cc.Sprite).spriteFrame.name&&(i.type="blue"),i.density=m.getComponent(cc.PhysicsBoxCollider).density;r=this.deepCopy(i);T.push(r)}}for(var R=[],I=0;I<this.level.children.length;I++){var b;if((m=this.level.children[I]).getComponent(cc.Sprite)&&null!=m.getComponent(cc.Sprite).spriteFrame)if("_Static_Tex"==(b=m.getComponent(cc.Sprite).spriteFrame.name).substring(b.length-11)){s=m.parent.convertToWorldSpaceAR(m),c=this.level.convertToNodeSpaceAR(s);i.posX=Math.floor(c.x),i.posY=Math.floor(c.y),i.width=m.width,i.height=m.height,i.angle=m.angle,i.anchorX=m.anchorX,i.anchorY=m.anchorY,"image_Scene_01_Static_Tex"==m.getComponent(cc.Sprite).spriteFrame.name?i.type=1:"image_Scene_02_Static_Tex"==m.getComponent(cc.Sprite).spriteFrame.name?i.type=2:"image_Scene_03_Static_Tex"==m.getComponent(cc.Sprite).spriteFrame.name?i.type=3:"image_Scene_04_Static_Tex"==m.getComponent(cc.Sprite).spriteFrame.name?i.type=4:"image_Scene_05_Static_Tex"==m.getComponent(cc.Sprite).spriteFrame.name?i.type=5:"image_Scene_06_Static_Tex"==m.getComponent(cc.Sprite).spriteFrame.name?i.type=6:"image_Scene_07_Static_Tex"==m.getComponent(cc.Sprite).spriteFrame.name&&(i.type=7);r=this.deepCopy(i);R.push(r)}for(var N=0;N<m.children.length;N++){var M;if((J=m.children[N]).getComponent(cc.Sprite)&&null!=J.getComponent(cc.Sprite).spriteFrame)if("_Static_Tex"==(M=J.getComponent(cc.Sprite).spriteFrame.name).substring(M.length-11)){s=J.parent.convertToWorldSpaceAR(J),c=this.level.convertToNodeSpaceAR(s);i.posX=Math.floor(c.x),i.posY=Math.floor(c.y),i.width=J.width,i.height=J.height,i.angle=J.angle,i.anchorX=m.anchorX,i.anchorY=m.anchorY;r=this.deepCopy(i);R.push(r)}}}for(var B=[],F=0;F<this.level.children.length;F++){if("axle"==(m=this.level.children[F]).name.substring(0,4)){s=m.parent.convertToWorldSpaceAR(m),c=this.level.convertToNodeSpaceAR(s);i.posX=Math.floor(c.x),i.posY=Math.floor(c.y),i.width=m.width,i.height=m.height,i.angle=m.angle,i.anchorX=m.anchorX,i.anchorY=m.anchorY,console.log("\u8fde\u63a5\u4f53",m.getComponent(cc.RevoluteJoint).connectedBody.name.split("<")[0]),i.connectBody=m.getComponent(cc.RevoluteJoint).connectedBody.name.split("<")[0];r=this.deepCopy(i);B.push(r)}}for(var k=[],D=0;D<this.level.children.length;D++){if("ball"==(m=this.level.children[D]).name.substring(0,4)){s=m.parent.convertToWorldSpaceAR(m),c=this.level.convertToNodeSpaceAR(s);i.posX=Math.floor(c.x),i.posY=Math.floor(c.y),i.width=m.width,i.height=m.height,i.angle=m.angle,i.anchorX=m.anchorX,i.anchorY=m.anchorY,m.getComponent(cc.RevoluteJoint)&&"node"==m.getComponent(cc.RevoluteJoint).connectedBody.name&&(i.connectBody="node"),i.density=m.getComponent(cc.PhysicsCircleCollider).density;r=this.deepCopy(i);k.push(r)}}for(var P=[],x=0;x<this.level.children.length;x++){if("grenade"==(m=this.level.children[x]).name.substring(0,7)){s=m.parent.convertToWorldSpaceAR(m),c=this.level.convertToNodeSpaceAR(s);i.posX=Math.floor(c.x),i.posY=Math.floor(c.y),i.width=m.width,i.height=m.height,i.angle=m.angle,i.anchorX=m.anchorX,i.anchorY=m.anchorY;r=this.deepCopy(i);P.push(r)}}for(var G=[],O=0;O<this.level.children.length;O++){if("crossBall"==(m=this.level.children[O]).name.substring(0,9)){s=m.parent.convertToWorldSpaceAR(m),c=this.level.convertToNodeSpaceAR(s);i.posX=Math.floor(c.x),i.posY=Math.floor(c.y),i.width=m.width,i.height=m.height,i.angle=m.angle,i.anchorX=m.anchorX,i.anchorY=m.anchorY,"image_Scene_Object_RedLine"==m.getComponent(cc.Sprite).spriteFrame.name?i.type="red":"image_Scene_Object_PurpleLine"==m.getComponent(cc.Sprite).spriteFrame.name?i.type="purple":"image_Scene_Object_GreenLine"==m.getComponent(cc.Sprite).spriteFrame.name?i.type="green":"image_Scene_Object_BlueLine"==m.getComponent(cc.Sprite).spriteFrame.name&&(i.type="blue");r=this.deepCopy(i);G.push(r)}}for(var U=[],V=0;V<this.level.children.length;V++){if("rope"==(m=this.level.children[V]).name.substring(0,4)){s=m.parent.convertToWorldSpaceAR(m),c=this.level.convertToNodeSpaceAR(s);i.posX=Math.floor(c.x),i.posY=Math.floor(c.y),i.width=m.width,i.height=m.height,i.angle=m.angle,i.anchorX=m.anchorX,i.anchorY=m.anchorY,i.ropeNums=m.children.length;r=this.deepCopy(i);U.push(r)}}for(var H=[],W=0;W<this.level.children.length;W++){if("vip"==(m=this.level.children[W]).name.substring(0,3)){s=m.parent.convertToWorldSpaceAR(m),c=this.level.convertToNodeSpaceAR(s);i.posX=Math.floor(c.x),i.posY=Math.floor(c.y),i.width=m.width,i.height=m.height,i.angle=m.angle,i.anchorX=m.anchorX,i.anchorY=m.anchorY;r=this.deepCopy(i);H.push(r)}}for(var q=[],X=0;X<this.level.children.length;X++){if("switch"==(m=this.level.children[X]).name.substring(0,6)){s=m.parent.convertToWorldSpaceAR(m),c=this.level.convertToNodeSpaceAR(s);i.posX=Math.floor(c.x),i.posY=Math.floor(c.y),i.width=m.width,i.height=m.height,i.angle=m.angle,i.anchorX=m.anchorX,i.anchorY=m.anchorY,"image_Scene_BtnRed_01"==m.getComponent(cc.Sprite).spriteFrame.name?i.type="red":"image_Scene_BtnPurple_01"==m.getComponent(cc.Sprite).spriteFrame.name?i.type="purple":"image_Scene_BtnGreen_01"==m.getComponent(cc.Sprite).spriteFrame.name?i.type="green":"image_Scene_BtnBlue_01"==m.getComponent(cc.Sprite).spriteFrame.name&&(i.type="blue");r=this.deepCopy(i);q.push(r)}}for(var Y=[],z=0;z<this.level.children.length;z++){if("image_Scene_01_Static_Tex"==(m=this.level.children[z]).name.substring(0,25)){s=m.parent.convertToWorldSpaceAR(m),c=this.level.convertToNodeSpaceAR(s);i.posX=Math.floor(c.x),i.posY=Math.floor(c.y),i.width=m.width,i.height=m.height,i.angle=m.angle,i.anchorX=m.anchorX,i.anchorY=m.anchorY,"image_Scene_01_Static_Tex"==m.getComponent(cc.Sprite).spriteFrame.name?i.type=1:"image_Scene_02_Static_Tex"==m.getComponent(cc.Sprite).spriteFrame.name?i.type=2:"image_Scene_03_Static_Tex"==m.getComponent(cc.Sprite).spriteFrame.name?i.type=3:"image_Scene_04_Static_Tex"==m.getComponent(cc.Sprite).spriteFrame.name?i.type=4:"image_Scene_05_Static_Tex"==m.getComponent(cc.Sprite).spriteFrame.name?i.type=5:"image_Scene_06_Static_Tex"==m.getComponent(cc.Sprite).spriteFrame.name?i.type=6:"image_Scene_07_Static_Tex"==m.getComponent(cc.Sprite).spriteFrame.name&&(i.type=7);r=this.deepCopy(i);Y.push(r)}for(var K=0;K<m.children.length;K++){var J;if("image_Scene_01_Static_Tex"==(J=m.children[K]).name.substring(0,25)){s=J.parent.convertToWorldSpaceAR(J),c=this.level.convertToNodeSpaceAR(s);i.posX=Math.floor(c.x),i.posY=Math.floor(c.y),i.width=J.width,i.height=J.height,i.angle=J.angle,i.anchorX=m.anchorX,i.anchorY=m.anchorY;r=this.deepCopy(i);Y.push(r)}}}for(var j=[],Q=0;Q<this.level.children.length;Q++){if("block"==(m=this.level.children[Q]).name.substring(0,5)){s=m.parent.convertToWorldSpaceAR(m),c=this.level.convertToNodeSpaceAR(s);i.posX=Math.floor(c.x),i.posY=Math.floor(c.y),i.width=m.width,i.height=m.height,i.angle=m.angle,i.anchorX=m.anchorX,i.anchorY=m.anchorY,i.density=m.getComponent(cc.PhysicsBoxCollider).density;r=this.deepCopy(i);j.push(r)}}for(var Z=[],$=0;$<this.level.children.length;$++){if("crossBall"==(m=this.level.children[$]).name.substring(0,9)){s=m.parent.convertToWorldSpaceAR(m),c=this.level.convertToNodeSpaceAR(s);i.posX=Math.floor(c.x),i.posY=Math.floor(c.y),i.width=m.width,i.height=m.height,i.angle=m.angle,i.anchorX=m.anchorX,i.anchorY=m.anchorY,i.density=m.getComponent(cc.PhysicsCircleCollider).density;r=this.deepCopy(i);Z.push(r)}}for(var ee=[],te=0;te<this.level.children.length;te++){if("crossBlock"==(m=this.level.children[te]).name.substring(0,10)){s=m.parent.convertToWorldSpaceAR(m),c=this.level.convertToNodeSpaceAR(s);i.posX=Math.floor(c.x),i.posY=Math.floor(c.y),i.width=m.width,i.height=m.height,i.angle=m.angle,i.anchorX=m.anchorX,i.anchorY=m.anchorY,i.density=m.getComponent(cc.PhysicsBoxCollider).density;r=this.deepCopy(i);ee.push(r)}}n.sun_data=o,n.earth_data=l,n.role_data=d,n.enemy_data=u,n.back_data=f,n.tu_data=C,n.block_data=j,n.moveBlock_data=y,n.boom_data=T,n.box_data=E,n.axle_data=B,n.ball_data=k,n.crossBall_data=Z,n.crossBlock_data=ee,n.grenade_data=P,n.magicBox_data=G,n.rope_data=U,n.vip_data=H,n.switch_data=q,n.staticTex_data=R,console.log("\u5b9e\u9645\u5173\u5361\u6570\u636e",n),this.saveForBrowser(n,t)},saveForBrowser:function(e,t){if(e=JSON.stringify(e),cc.sys.isBrowser){console.log("\u6d4f\u89c8\u5668");var n=new Blob([e],{type:"application/json"}),i=document.createElement("a");i.download=t,i.innerHTML="Download File",null!=window.webkitURL?i.href=window.webkitURL.createObjectURL(n):(i.href=window.URL.createObjectURL(n),i.onclick=destroyClickedElement,i.style.display="none",document.body.appendChild(i)),i.click()}},deepCopy:function(e){var t=JSON.stringify(e);return JSON.parse(t)}}),cc._RF.pop()},{}],Facade:[function(e,t,n){"use strict";cc._RF.push(t,"fe1be+EMEJAzahMcKCVIdhh","Facade"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.reEnter=!1,this.node.inQQ=!1,this.node.qqAppId="",this.node.qqAppKey="",this.node.VERSION=1002,this.node.token="",this.node.FOR_DEVELOP=!0,this.node.SAVE_MODE=!1,this.node.ResPath="",this.node.ProjName="",this.node.AllowWXInfo=!0,this.node.SkipLogin=!1,this.node.isEnteredGame=!1,this.node.isEnabledPay=!1,this.node.isEnabledGuilde=!0,this.node.isEnabledVideoAd=!0,this.node.SERVER_ID=2,this.node.SERVER_ID_BETA=3,this.node.FIRST_CAR_ID=10101,this.node.PopOrder=9999,this.node.FloatOrder=11e3,this.node.BEHAVE_WELLBEING=5001,this.node.BEHAVE_MAINRECOMMEND=5002,this.node.BEHAVE_COMMONRECOMMEND=5003,this.node.BEHAVE_CPARECOMMEND=5004,this.node.CLICK_MAIN_BOX=3002,this.node.CLICK_ADVENTURE=3003,this.node.BEHAVE_WX_LOGIN=1001,this.node.BEHAVE_LOADING_START=1002,this.node.BEHAVE_LOADING_END=1003,this.node.BEHAVE_CLICK_RACING=3001,this.node.PAY_SUCCESS=13,this.node.BEHAVE_ROLE=12,this.node.BEHAVE_LOGIN=11,this.node.BEHAVE_ALLOWED=10,this.node.BEHAVE_ONSHOW=9,this.node.BEHAVE_FORM_SHARE=8,this.node.BEHAVE_SHARE=7,this.node.BEHAVE_ENTER=1,this.node.BEHAVE_VIDEOSTART=4,this.node.BEHAVE_VIDEOEND=5,this.node.INVITE_LEVERAWARD="1511",this.node.INVITE_RECALL="1517",this.node.INVITE_PARARA="1513",this.node.INVITE_UNLOCK_FRIEND_GUARD="1514",this.node.INVITE_FRIEND_GUARD="1515",this.node.INVITE_UNIVERSAL_FRAGMENT="1516",this.node.INVITE_LOVESEA="1518",this.node.INVITE_AWARDRES="1519",this.node.INVITE_SHAREDOG="1520",this.node.INVITE_SHAREFRIEND="1521",this.node.INVITE_SHARERANK="1522",this.node.INVITE_LUCKYDRAW="1523",this.node.INVITE_TIMEINIVTE="1524",this.node.uiNames={NextLoginView:1,NewerView:2,AdvanceView:3,EnergyNeedView:4,BackEnergyView:5,EntranceUI:6,Rank:8,skinPanel:9},this.node.PlayerAtrriKeys={},this.node.GlobalKeys={},this.node.httpServerAdress="",this.node.behaveReportAdress="",this.node.appLinkReportAdress="",this.node.openapiUrl="",this.node.showRankPage=1,this.node.canShowShareGroup=!0,this.node.lastSessionid="0",this.node.showShareTicket=null,this.node.isEnterGameFirst=!0,this.node.queryRoleID=null,this.node.isShareOut=!1,this.node.isOpenedGiftbag=!1,this.node.logicCode="",this.node.tipsNode=null}}),cc._RF.pop()},{}],FakeInterUI:[function(e,t,n){"use strict";cc._RF.push(t,"2a2e5DCyQZC8IYemZGm5PJC","FakeInterUI");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{item:cc.Prefab,content:cc.Node},onLoad:function(){cc.systemEvent.on(i.MORE_GAME,this.initContent,this),facade.getComponent("MoreGameModel").requestMoreGameList()},initData:function(e){this.mainDatas=e},initContent:function(){var e,t=[];if((t=t.concat(facade.getComponent("MoreGameModel").boxList[0])).sort(function(e,t){return parseInt(e.sort)>parseInt(t.sort)?-1:1}),window.facade.getComponent("PlayerModel").isClickCountLimit(2))for(var n=0;n!=t.length;){var i=t[n].navout_max_cnt;parseInt(i)&&""!=parseInt(i)&&0!=parseInt(i)&&t[n].navout_cnt>=parseInt(i)?t.splice(n,1):n++}if(facade.getComponent("PlayerModel").isIconRandomOrder("interstitial")){var o=facade.getComponent("PlayerModel").getInterstiRecommondRandomCount(),a=t.slice(0,o),s=t.slice(o,t.length);a&&a.length>1&&a.sort(function(){return.5-Math.random()}),t=[],t=a.concat(s)}else t.sort(function(e,t){return Number(e.weight)>Number(t.weight)?-1:1});for(var c in e=t.length>9?t.splice(0,9):t){var r=cc.instantiate(this.item);r.getComponent("RecommendGameItem").setupItemData(e[c]),r.parent=this.content;var l=new cc.Node,h=l.addComponent(cc.Label);h.string=e[c].game_name,h.fontSize=22,r.addChild(l),l.y=-20-r.height/2,l.color=cc.Color.GRAY}},onClickClose:function(){popUp.getComponent("Pop").removeTop()}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],FloatTip:[function(e,t,n){"use strict";cc._RF.push(t,"4d2446SQc9EDZGKyL3AJlKY","FloatTip"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var t=e("ModuleEventEnum");cc.systemEvent.once(t.OPEN_VIDEO,this.hideFloat.bind(this))},start:function(){},showTip:function(e){null==this.floatNode?cc.loader.loadRes("pfb/FloatTip",function(t,n){this.floatNode=cc.instantiate(n),this.floatNode.getChildByName("Label").getComponent(cc.Label).string=e,cc.director.getScene().getChildByName("Canvas").addChild(this.floatNode,window.facade.FloatOrder),this.runFloat()}.bind(this)):(this.floatNode.getChildByName("Label").getComponent(cc.Label).string=e,this.floatNode.stopAllActions(),this.floatNode.opacity=255,this.floatNode.setPosition(0,50),this.runFloat())},runFloat:function(){this.floatNode.opacity=255,this.floatNode.runAction(cc.sequence(cc.delayTime(1),cc.spawn(cc.moveBy(1,cc.v2(0,50)),cc.fadeOut(1)),cc.callFunc(this.hideFloat,this)))},hideFloat:function(){this.floatNode&&(this.floatNode.removeFromParent(),this.floatNode=null)}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],GameConfig:[function(e,t,n){"use strict";cc._RF.push(t,"4686fnufLFIOrxJ7brIUYSD","GameConfig"),Object.defineProperty(n,"__esModule",{value:!0}),window.gameVersion="201901010000";var i=n.GameConfig={gameVersion:window.gameVersion,isOpen:1,adId:1111,PLATFORM:"",SHARE_IMAGE_URL:"",SHARE_STR:"\uff01",clientSecret:"",videoID:"",bannerID:"",gameId:61,userId:0,channelId:0,channelSub:0,boxId:0,boxGid:0,boxUid:0,stDifference:null,GAME_DATA:400,serverTimeStamp:function(){var e=Date.parse(new Date).toString().substr(0,10);return parseInt(e)+parseInt(this.stDifference)},clientTimeStamp:function(){return Date.parse(new Date).toString().substr(0,10)}};"undefined"!=typeof gmbox?i.PLATFORM="viso":cc.sys.platform===cc.sys.WECHAT_GAME?i.PLATFORM="wx":i.PLATFORM="",t.exports=i,cc._RF.pop()},{}],GameEntry:[function(e,t,n){"use strict";cc._RF.push(t,"c70e5ATaVpHbYV6+ew9gJH2","GameEntry");var i=e("ModuleEventEnum"),o=e("AnalyticsUtilities").AnalyticsUtilities;cc.Class({extends:cc.Component,properties:{star:cc.Label,locked:cc.Node,unlockNeed:cc.Label,starItemIcon:cc.Node},onLoad:function(){},start:function(){this.isLocked=!0,this.type=this.node.name.split("_")[1],"classic"==this.type&&(this.isLocked=!1)},onClick:function(){if(o.logEvent("\u70b9\u51fb\u5f00\u59cb\u6e38\u620f"),this.isLocked){var e=facade.getComponent("LevelModel")[this.type+"StarNeed"];return console.log("\u4f24\u5bb31"),e?(console.log("\u4f24\u5bb32",facade.getComponent("GameModel").gotNextReward),"injury"==this.type&&facade.getComponent("GameModel").gotNextReward<=0?void window.popUp.getComponent("Pop").addPopByName("NextLoginView",null,!0,!0):(console.log("\u4f24\u5bb33"),void popUp.getComponent("FloatTip").showTip("\u6536\u96c6\u6ee1"+e+"\u9897\u661f\u661f\u518d\u6765\u5427\uff01"))):void popUp.getComponent("FloatTip").showTip("\u65b0\u7684\u73a9\u6cd5\uff0c\u656c\u8bf7\u671f\u5f85\uff01")}facade.selectedLevelType=this.type,facade.getComponent("LevelModel").setLevelTypeStr(this.type),cc.systemEvent.emit(i.LEVEL_SELECT,this.type)},update:function(e){if("classic"==this.type);else{var t=facade.getComponent("LevelModel")[this.type+"StarNeed"],n=facade.getComponent("LevelModel").getTotalStar();t?n>=t?(this.isLocked=!1,this.unlockNeed.node.active=!1,this.starItemIcon.active=!0,this.star.node.active=!0):"injury"==this.type&&facade.getComponent("GameModel").gotNextReward>=1?(this.isLocked=!1,this.unlockNeed.node.active=!1,this.starItemIcon.active=!0,this.star.node.active=!0):"vip"==this.type&&facade.getComponent("GameModel").gotAdvanceReward>=1?(this.isLocked=!1,this.unlockNeed.node.active=!1,this.starItemIcon.active=!0,this.star.node.active=!0):(this.isLocked=!0,this.unlockNeed.node.active=!0,this.unlockNeed.string="\u5dee"+(t-n)+"\u661f\u89e3\u9501",this.starItemIcon.active=!1,this.star.node.active=!1):(this.isLocked=!0,this.unlockNeed.node.active=!1),this.locked.active=this.isLocked}this.star.string=facade.getComponent("LevelModel").getStarByLevelType(this.type)}}),cc._RF.pop()},{AnalyticsUtilities:"AnalyticsUtilities",ModuleEventEnum:"ModuleEventEnum"}],GameLogic:[function(e,t,n){"use strict";cc._RF.push(t,"33e21/rOHRPZY12lgYJigKO","GameLogic");var i=e("ModuleEventEnum"),o=e("AdsSingleton"),a=e("Singleton");cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.systemEvent.on(i.LEVEL_ADDED,this.onLevelAdded,this),cc.systemEvent.on(i.LEVEL_ELEMENTS_ADDED,this.countLevelData,this),cc.systemEvent.on(i.LEVEL_ONE_SHOT_ADD,this.onLevelAdded,this),cc.systemEvent.on(i.KILLED,this.onKilled,this),cc.systemEvent.on(i.SKIP,this.onSkip,this),cc.systemEvent.on(i.FAILURE,this.onFailure,this)},start:function(){var e=cc.sequence(cc.delayTime(1.5),cc.callFunc(function(){o.getInstance(),a.getInstance()},this));this.node.runAction(e)},rich1111:function(){window.facade.getComponent("GameModel").gainEnergy11111()},onLevelAdded:function(e){this.failure=!1,this.hasPassed=!1,this.levelData=e,this.level=e.node,this.killed=[],this.suffers={},this.vips={};var t=cc.sequence(cc.delayTime(.3),cc.callFunc(function(){this.countLevelData(e)},this));this.node.runAction(t)},countLevelData:function(e){for(var t=this.level.getChildren(),n=0;n<t.length;n++)t[n].name.match("suffer")?this.suffers[t[n].name]=!1:t[n].name.match("vip")?this.vips[t[n].name]=!1:t[n].name.match("role")&&"injury"==e.levelType&&(this.vips[t[n].name]=!1)},onKilled:function(e){if(!(this.failure||window.facade.getComponent("LevelModel").lastBullets<0||1==this.suffers[e]||1==this.vips[e])){if(window.audio.getComponent("SoundManager").playEffect("kill"),null!=this.vips[e])return this.vips[e]=!0,cc.systemEvent.emit(i.FAILURE_BUY_KILL),void(this.levelData.isDebug&&window.popUp.getComponent("FloatTip").showTip("\u6d4b\u8bd5\u4fe1\u606f\uff1a\u5931\u8d25\u4e86"));for(var t in null!=this.suffers[e]&&(this.suffers[e]=!0),this.suffers)if(0==this.suffers[t])return;this.passed()}},onSkip:function(){window.facade.getComponent("LevelModel").shotedBullets=99999,this.passed(!0)},passed:function(e){if(!e){if(this.failure)return;if(this.waitingForPass)return;if("vip"==this.levelData.levelType||"injury"==this.levelData.levelType)for(var t=this.level.getChildren(),n=0;n<t.length;n++)if(t[n].name.match("bullet"))return void(this.waitingForPass=!0)}this.hasPassed||(this.hasPassed=!0,window.facade.getComponent("LevelModel").oneShotLevel?cc.systemEvent.emit(i.LEVEL_SHOT_PASSED,e):cc.systemEvent.emit(i.LEVEL_PASSED,e),this.levelData.isDebug&&window.popUp.getComponent("FloatTip").showTip("\u6d4b\u8bd5\u4fe1\u606f\uff1a\u8fc7\u5173\u4e86"),this.node.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(function(){window.audio.getComponent("SoundManager").playEffect("whisper")}))))},onFailure:function(){this.failure=!0},update:function(e){if(this.waitingForPass){for(var t=this.level.getChildren(),n=0;n<t.length;n++)if(t[n].name.match("bullet"))return;this.waitingForPass=!1,this.passed()}}}),cc._RF.pop()},{AdsSingleton:"AdsSingleton",ModuleEventEnum:"ModuleEventEnum",Singleton:"Singleton"}],GameModel:[function(e,t,n){"use strict";cc._RF.push(t,"ce652vjwuZGupCvFa4Eea6O","GameModel");var i=e("ModuleEventEnum"),o=(e("MathUtils"),e("AdsSingleton"));e("Singleton");cc.Class({extends:cc.Component,properties:{},initConfig:function(){cc.loader.loadRes("config/SignConfig",this.setConfig.bind(this)),cc.loader.loadRes("config/CharacterConfig",cc.JsonAsset,this.characterLoaded.bind(this)),cc.systemEvent.on(i.WX_SHOW,this.onWxShow.bind(this)),cc.systemEvent.on(i.WX_HIDE,this.onWxHide.bind(this))},dealLoadData:function(e){var t=JSON.parse(e);this.gotGameRecord=!0,this.localCash=t||{},console.log("GameModel data:",e),facade.getComponent("LevelModel").httpResDeal(this.localCash),this.formDatas()},httpResDeal:function(e){},getLocalTime:function(){var e=new Date;return e.getTime()-6e4*e.getTimezoneOffset()},getLocalTimeHour:function(){return(new Date).getHours()},formDatas:function(e){this.firstLoginTime1=this.localCash.firstLoginTime1,this.cash=Number(this.localCash.cash),this.energy=Number(this.localCash.energy),this.energyLostTime=Number(this.localCash.energyLostTime),this.characterId=Number(this.localCash.characterId),this.unlockCharacters=this.localCash.unlockCharacters,this.characterVideoCounts=this.localCash.characterVideoCounts,this.lastRewardEnergyTime=Number(this.localCash.lastRewardEnergyTime),this.rewardEnergyCount=Number(this.localCash.rewardEnergyCount),this.lastFetchColectTime=Number(this.localCash.lastFetchColectTime),this.lastFetchSignInTime=Number(this.localCash.lastFetchSignInTime),this.fetchDays=Number(this.localCash.fetchDays),this.aliveFetchList=this.localCash.aliveFetchList,this.newbieFetchList=this.localCash.newbieFetchList,this.lastFetchFloatReward=this.localCash.lastFetchFloatReward,this.lastFetchClientTime=this.localCash.lastFetchClientTime,this.gotNextReward=Number(this.localCash.gotNextReward),this.gotNewerReward=Number(this.localCash.gotNewerReward),this.gotAdvanceReward=Number(this.localCash.gotAdvanceReward),this.oneShotLevelList=this.localCash.oneShotLevelList,this.oneShotLevel=Number(this.localCash.oneShotLevel),this.oneShotLevelCupNum=Number(this.localCash.oneShotLevelCupNum),this.levelShotUpdate=Number(this.localCash.levelShotUpdate),this.chanllenTimes=Number(this.localCash.chanllenTimes),this.cupNumData=Number(this.localCash.cupNumData),this.levelFreeRetry=Number(this.localCash.levelFreeRetry),this.today=this.localCash.today,e||(this.localCash.today?this.today!=(new Date).getMonth()+"_"+(new Date).getDate()&&(this.today=(new Date).getMonth()+"_"+(new Date).getDate(),this.aliveFetchList=[],this.newbieFetchList=[],this.saveData()):(this.today=(new Date).getMonth()+"_"+(new Date).getDate(),this.saveData())),this.levelFreeRetry||(this.levelFreeRetry=0),this.oneShotLevelCupNum||(this.oneShotLevelCupNum=0),this.chanllenTimes||(this.chanllenTimes=0),this.oneShotLevel||(this.oneShotLevel=0),this.cupNumData||(this.cupNumData=0),this.oneShotLevelList||(this.oneShotLevelList=[]),this.levelShotUpdate||(this.levelShotUpdate=0),this.cash||(this.cash=0),this.gotNextReward||(this.gotNextReward=0),this.gotNewerReward||(this.gotNewerReward=0),this.gotAdvanceReward||(this.gotAdvanceReward=0),this.characterId||(this.characterId=1,this.unlockCharacters=[1]),this.characterVideoCounts||(this.characterVideoCounts={}),this.energyLostTime||(this.energyLostTime=0,(!this.energy||this.energy<15)&&(this.energy=this.maxEnergy));var t=Math.floor(this.getLocalTime()/86400/1e3);if(this.lastRewardEnergyTime){var n=Math.floor(this.lastRewardEnergyTime/86400/1e3),o=new Date(86400*n*1e3),a=new Date(86400*t*1e3);console.log("lastRewardDate:",a.toString()),console.log("todayDate:",o.toString()),n<t&&(this.rewardEnergyCount=0,this.lastRewardEnergyTime=this.getLocalTime(),this.levelShotUpdate=0,this.chanllenTimes=0,this.freeLuckyVideoTimes=0,this.cupNumData=0,this.oneShotLevelCupNum=0,this.oneShotLevel=0,this.levelFreeRetry=0)}else this.lastRewardEnergyTime=0;this.getLocalTimeHour()>=21&&0==this.levelShotUpdate&&(this.levelShotUpdate=1),this.levelRetryTouch=!1;var s=new Date;if(this.energy<this.maxEnergy&&this.energyLostTime){var c=s.getTime()-this.energyLostTime,r=Math.floor(c/(2*this.energyCD));r+this.energy>15&&(r=15-this.energy),this.energy+=r,this.energyLostTime+=r*this.energyCD*2,this.energy>=this.maxEnergy&&(this.energyLostTime=0),this.offlineEnergy(r)}this.lastFetchColectTime||(this.lastFetchColectTime=0),this.lastFetchSignInTime||(this.lastFetchSignInTime=0),this.fetchDays||(this.fetchDays=0),this.aliveFetchList||(this.aliveFetchList=[]),this.newbieFetchList||(this.newbieFetchList=[]),this.lastFetchFloatReward||(this.lastFetchFloatReward=0),this.lastFetchClientTime||(this.lastFetchClientTime=0),e||("Game"!=facade.CurrentScene?facade.needShowSign=!0:(facade.needShowSign=!1,this.saveData(),cc.systemEvent.emit(i.INIT_ROLEINFO_COMPLETED)))},setShotUpdateData:function(e){this.levelShotUpdate=e,this.saveData()},setAddChanllenNum:function(){this.chanllenTimes++,this.saveData()},setOneShotLeves:function(){if(facade.getComponent("LevelModel").oneShotConfigList){this.oneShotLevelList=[],this.oneShotLevel=1,this.oneShotLevelCupNum=0;for(var e=facade.getComponent("LevelModel").oneShotConfigList.length;this.oneShotLevelList.length<20;){for(var t=Math.floor(Math.random()*e+1),n=!1,i=0;i<this.oneShotLevelList.length;i++)if(this.oneShotLevelList[i]==t){n=!0;break}n||(this.oneShotLevelList.push(t),0)}this.saveData()}},onLevelShotPassed:function(){this.showLevelOver=!1,this.oneShotLevel<20?this.oneShotLevel++:20==this.oneShotLevel&&(this.showLevelOver=!0);var e=facade.getComponent("LevelModel").nowLevelConfig.LuckyPoint;this.cupNumData+=e,this.oneShotLevelCupNum+=e;var t={game_id:window.facade.GameId,token:window.facade.getComponent("PlayerModel").token,score_type:2,score:this.cupNumData};window.net.getComponent("Net").httpRequest(window.net.SaveScore,t),this.node.runAction(cc.sequence(cc.delayTime(3),cc.callFunc(this.goToShotNextLevel,this))),this.saveData()},goToShotNextLevel:function(){this.showLevelOver?cc.systemEvent.emit(i.SHOT_NOW_OVER_SHOW):cc.systemEvent.emit(i.GO_SHOT_NEXT)},onLevelShotNext:function(){this.oneShotLevel<20?this.oneShotLevel++:20==this.oneShotLevel&&this.setOneShotLeves(),cc.systemEvent.emit(i.GO_SHOT_NEXT),this.saveData()},setOpenRankfFlag:function(e){this.openRankFlag=e},getFreeRetry:function(){var e=facade.getComponent("ShareADModel").GameConfig.Free_Rematch_Cnt.Value;return!!e&&this.levelFreeRetry<=e},setAddFreeRetryNum:function(){this.levelFreeRetry++,this.saveData()},offlineEnergy:function(e){console.log("offlineEnergy:",e),this._offLineEnergy=e,this.saveData()},characterLoaded:function(e,t){console.log("asset:",t),this.charaterConfig=t.json,cc.systemEvent.emit(i.CHARACTER_INFO)},setConfig:function(e,t){if(e)console.error(e);else{var n=t.json;for(var i in n)1==n[i].Type?this.newcomerConfig.push(n[i]):2==n[i].Type&&this.oldConfig.push(n[i]);console.log("\u65b0\u5956\u52b1\u548c\u65e7\u5956\u52b1",this.newcomerConfig,this.oldConfig)}},isCharacterLocked:function(e){for(var t=0;t<this.unlockCharacters.length;t++)if(this.unlockCharacters[t]==e)return!1;return!0},onLoad:function(){this.newcomerConfig=[],this.oldConfig=[],this.initConfig(),this.cash=0,this.energy=15,this.gotNextReward=0,this.gotNewerReward=0,this.gotAdvanceReward=0,this.energyLostTime=0,this.lastRewardEnergyTime=0,this.rewardEnergyCount=0,this.characterId=1,this.unlockCharacters=[1],this.maxEnergy=15,this.energyCD=6e5,this.newerRewardCancelCount=0,this.passLevelCount=0,this.characterVideoCounts={},this.localCash={},this.formDatas(!0),this.oneShotLevelList=[],this.oneShotLevel=1,this.oneShotLevelCupNum=0,this.levelShotUpdate=0,this.chanllenTimes=0,this.cupNumData=0,this.levelFreeRetry=0,cc.systemEvent.on(i.GOT_HTTP_RES,this.httpResDeal.bind(this)),cc.systemEvent.on(i.ROLE_SELECTED,this.onRoleSelected.bind(this)),cc.systemEvent.on(i.ROLE_SELECTED,this.onRoleSelected.bind(this)),cc.systemEvent.on(i.LEVEL_SHOT_PASSED,this.onLevelShotPassed,this),this.readDataFromLocal()},checkNewerShowCondtition:function(){return this.passLevelCount++,this.newerRewardCancelCount>=2&&this.passLevelCount<3?0:this.gotNewerReward?this.gotAdvanceReward?0:"Advance":"Newer"},onGotToken:function(){facade.isMiniGame},delayInitData:function(){this.gotGameRecord||this.formDatas()},readDataFromLocal:function(){var e=cc.sys.localStorage.getItem("Shooter_GameData");console.log("\u8bfb\u6570\u636e",e),e?(console.log("2\u8bfb\u6570\u636e"),this.localCash=JSON.parse(e),this.formDatas()):(console.log("1\u8bfb\u6570\u636e"),this.cash=0,this.energy=15,this.energyLostTime=0,this.characterId=1,this.unlockCharacters=[1],this.characterVideoCounts={})},clearData:function(){cc.sys.localStorage.setItem("Shooter_GameData",JSON.stringify({}))},onWxShow:function(){},onWxHide:function(){facade.FOR_DEVELOP||this.saveData(!0)},saveData:function(e){if(console.log("\u4fdd\u5b58\u4e00",this.gotNextReward),"SkipPage"!=facade.CurrentScene){console.log("\u4fdd\u5b58\u4e8c",this.gotNextReward);var t={};t.firstLoginTime1||(t.firstLoginTime1=(new Date).getTime()),t.cash=this.cash,t.energy=this.energy,t.energyLostTime=this.energyLostTime,t.characterId=this.characterId,t.unlockCharacters=this.unlockCharacters,t.lastRewardEnergyTime=this.lastRewardEnergyTime,t.rewardEnergyCount=this.rewardEnergyCount,t.characterVideoCounts=this.characterVideoCounts,t.lastFetchColectTime=this.lastFetchColectTime,t.lastFetchSignInTime=this.lastFetchSignInTime,t.fetchDays=this.fetchDays,t.aliveFetchList=this.aliveFetchList,t.newbieFetchList=this.newbieFetchList,t.lastFetchFloatReward=this.lastFetchFloatReward,t.lastFetchClientTime=this.lastFetchClientTime,console.log("\u5956\u52b1\u7c7b\u578b",this.gotNextReward),t.gotNextReward=this.gotNextReward,t.gotAdvanceReward=this.gotAdvanceReward,t.gotNewerReward=this.gotNewerReward,t.oneShotLevelList=this.oneShotLevelList,t.oneShotLevel=this.oneShotLevel,t.levelShotUpdate=this.levelShotUpdate,t.chanllenTimes=this.chanllenTimes,t.cupNumData=this.cupNumData,t.oneShotLevelCupNum=this.oneShotLevelCupNum,t.levelFreeRetry=this.levelFreeRetry,t.today=this.today;var n=this;if(window.facade.getComponent("LevelModel")){t.score=window.facade.getComponent("LevelModel").getTotalStar();var i=window.facade.getComponent("LevelModel").localCaCheOnlyThis;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];t[o]=a}cc.sys.localStorage.setItem("Shooter_GameData",JSON.stringify(t))}else setTimeout(function(){n.saveData()},100)}},isEnergyFull:function(){return this.energy>=this.maxEnergy},getNextEnergyTime:function(){return this.energyLostTime+this.energyCD},getFullTime:function(){var e=this.getNextEnergyTime(),t=this.energy+1,n=e;return n+=(this.maxEnergy-t)*this.energyCD},loseEnergy:function(){var e,t=facade.getComponent("LevelModel").getLevelConfig(window.facade.getComponent("LevelModel").playingLevel);if(facade.getComponent("LevelModel").costEnergy=1,e=1==t.BonusType?0:1,this.energy-=e,this.energy<0&&(this.energy=0),this.energy<this.maxEnergy&&0==this.energyLostTime){var n=new Date;this.energyLostTime=n.getTime()}this.saveData()},gainEnergy:function(){var e=new Date;this.energy++,this.energyLostTime=e.getTime(),this.energy>=this.maxEnergy&&(this.energy=this.maxEnergy,this.energyLostTime=0),this.saveData()},gainEnergy11111:function(){this.energy+=5,this.saveData()},isRewardEnergyLimited:function(){return this.rewardEnergyCount>=6},rewardEnergy:function(e){new Date;this.lastRewardEnergyTime=this.getLocalTime(),this.rewardEnergyCount++,this.energy+=e,this.energy>=this.maxEnergy&&(this.energyLostTime=0),this.saveData()},addCash:function(e){this.cash+=e,this.saveData()},onRoleSelected:function(e){this.characterId=e,this.saveData()},buyACharacter:function(e){var t=this.charaterConfig[String(e)];Number(t.Cost)>this.cash?popUp.getComponent("FloatTip").showTip("\u94b1\u94b1\u597d\u50cf\u4e0d\u591f\u54e6\uff01"):(cc.systemEvent.emit(i.CHARACTER_GOT,e),this.cash-=Number(t.Cost),this.unlockCharacters.push(e),this.characterId=e,this.saveData())},watchACharacter:function(e){this._watchingId=e,o.getInstance().showVideoAds("watchACharacter")},watchACharacterFunc:function(){console.log("\u76ae\u80a4\u89c2\u770b\u6210\u529f:",type),this.addAWatchCount()},addAWatchCount:function(){this.characterVideoCounts[this._watchingId+""]?this.characterVideoCounts[this._watchingId+""]++:this.characterVideoCounts[this._watchingId+""]=1;var e=this.charaterConfig[String(this._watchingId)];this.characterVideoCounts[this._watchingId+""]>=e.Cost&&this.unlockCharacters.push(this._watchingId),cc.systemEvent.emit(i.SKIN_WATCHED),this._watchingId=null,this.saveData()},getWatchCount:function(e){return this.characterVideoCounts[e+""]?this.characterVideoCounts[e+""]:0},getCollectReward:function(){var e=facade.getComponent("ShareADModel").GameConfig.CollectValue,t=this.getLocalTime();this.lastFetchColectTime=t,this.addCash(parseInt(e.Value));var n="\u6210\u529f\u9886\u53d6\u5956\u52b1: \u949e\u7968 x "+e.Value;popUp.getComponent("FloatTip").showTip(n),cc.systemEvent.emit(i.UPDATE_COLLECT_SHOW)},gainSkin:function(e){this.unlockCharacters.push(parseInt(e)),this.saveData()},getRewardConfig:function(){var e=this.fetchDays;return null==e&&(e=0),e<=7?this.newcomerConfig:this.oldConfig},applySignReward:function(e,t){console.log("SignIn reward: ",t);var n=this.getLocalTime();this.lastFetchSignInTime=n,this.fetchDays++;var i=e?2*t.AwardNum:t.AwardNum;switch(t.AwardType){case 1:this.addCash(i),popUp.getComponent("FloatTip").showTip("\u949e\u7968 +"+i);break;case 2:this.rewardEnergy(i),popUp.getComponent("FloatTip").showTip("\u4f53\u529b +"+i);break;case 3:break;case 4:this.gainSkin(t.AwardNum);var o=this.charaterConfig[""+t.AwardNum].langName;popUp.getComponent("FloatTip").showTip("\u83b7\u5f97\u76ae\u80a4 "+o)}popUp.getComponent("Pop").removeTop()},applyInviteNewbieReward:function(e,t){var n=facade.getComponent("ShareADModel").GameConfig.InviteB;this.newbieFetchList.length>=4||(this.newbieFetchList.push({id:e,user_id:t}),this.addCash(Number(n.Value)),this.saveData(),cc.systemEvent.emit(i.INVITE_UPDATE_DAILY,e))},applyInviteAliveReward:function(e,t){var n=facade.getComponent("ShareADModel").GameConfig.InviteT;this.aliveFetchList.length>=4||(this.aliveFetchList.push(t),this.rewardEnergy(parseInt(n.Value)),this.saveData(),cc.systemEvent.emit(i.INVITE_UPDATE_DAILY,e))},applyHoverWinReward:function(){var e=facade.getComponent("ShareADModel").GameConfig.Float_Reward.Value;this.lastFetchFloatReward=this.getLocalTime(),this.rewardEnergy(parseInt(e)),popUp.getComponent("FloatTip").showTip("\u606d\u559c\u83b7\u5f97\u4f53\u529b x"+e),cc.systemEvent.emit(i.UPDATE_HOVER_SHOW)},takeNextReward:function(){console.log("\u660e\u65e5\u5956\u52b1\u4e00",this.gotNextReward),this.gotNextReward>0?popUp.getComponent("FloatTip").showTip("\u5df2\u7ecf\u9886\u53d6\u8fc7\u8be5\u5956\u52b1~"):(console.log("\u660e\u65e5\u5956\u52b1\u4e8c",this.gotNextReward),this.rewardEnergy(5),this.unlockCharacters.includes(4)||this.unlockCharacters.push(4),this.gotNextReward=1,this.saveData(),popUp.getComponent("FloatTip").showTip("\u606d\u559c\u83b7\u5f97\u6b21\u65e5\u5927\u793c\u5305\uff01"))},takeAdvanceReward:function(){this.gotAdvanceReward>0?popUp.getComponent("FloatTip").showTip("\u5df2\u7ecf\u9886\u53d6\u8fc7\u8be5\u5956\u52b1~"):(this.rewardEnergy(5),this.addCash(300),this.gotAdvanceReward=1,this.saveData(),popUp.getComponent("FloatTip").showTip("\u606d\u559c\u83b7\u5f97\u8fdb\u9636\u5927\u793c\u5305\uff01"))},takeNewerReward:function(){this.gotNewerReward>0?popUp.getComponent("FloatTip").showTip("\u5df2\u7ecf\u9886\u53d6\u8fc7\u8be5\u5956\u52b1~"):(this.addCash(300),this.rewardEnergy(5),this.unlockCharacters.includes(2)||this.unlockCharacters.push(2),this.gotNewerReward=1,this.saveData(),popUp.getComponent("FloatTip").showTip("\u606d\u559c\u83b7\u5f97\u65b0\u624b\u5927\u793c\u5305\uff01"))},checkClientRewardShow:function(){return console.log("lastFetchClientTime: ",this.lastFetchClientTime),!(Math.floor(this.getLocalTime()/86400/1e3)<=Math.floor(this.lastFetchClientTime/86400/1e3))},applyClientReward:function(){this.lastFetchClientTime=this.getLocalTime();var e=facade.getComponent("ShareADModel").GameConfig.Customer_service_reward.Value;this.rewardEnergy(parseInt(e)),popUp.getComponent("FloatTip").showTip("\u516c\u4f17\u53f7\u6bcf\u65e5\u5956\u52b1\uff1a\u4f53\u529b x"+e),cc.systemEvent.emit(i.UPDATE_HOVER_SHOW)},checkHoverWinRewardShow:function(){return 0==this.lastFetchFloatReward||!(Math.floor(this.getLocalTime()/86400/1e3)<=Math.floor(this.lastFetchFloatReward/86400/1e3))},waitingForBroadcastReward:function(){"Game"==cc.director.getScene().name&&facade.fromBroadcast&&(this.checkClientRewardShow()?(facade.fromBroadcast=!1,this.applyClientReward()):facade.fromBroadcast=!1)},update:function(){this.energy<this.maxEnergy&&((new Date).getTime()>=this.energyLostTime+this.energyCD&&this.gainEnergy());this.waitingForBroadcastReward()},postRequest:function(e,t,n){var i=new XMLHttpRequest;i.onreadystatechange=function(e){if(4==i.readyState&&i.status>=200&&i.status<300){var t=JSON.parse(i.responseText);0!=t.code?n&&n.failure&&n.failure(t.code):n&&n.success&&n.success(t.data)}}.bind(this),i.onerror=function(e){n&&n.failure&&n.failure(e)},i.open("POST",e,!1),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.send(t)}}),cc._RF.pop()},{AdsSingleton:"AdsSingleton",MathUtils:"MathUtils",ModuleEventEnum:"ModuleEventEnum",Singleton:"Singleton"}],GameoverMoreGame:[function(e,t,n){"use strict";cc._RF.push(t,"005d06N/xhE4LEBjmGBLzHl","GameoverMoreGame");var i=e("MoreGameManager");cc.Class({extends:cc.Component,properties:{itemNodeArr:[cc.Node]},initData:function(){var e=this;i.requestMoreGameList(function(t){e.boxList=t,e.showMoreGameList()})},onLoad:function(){this.initData()},onEnable:function(){},showMoreGameList:function(){for(var e=0;e<this.itemNodeArr.length;e++){this.itemNodeArr[e].getComponent("MoreGameItemOne").setupItemData(this.boxList[e])}}}),cc._RF.pop()},{MoreGameManager:"MoreGameManager"}],Game:[function(e,t,n){"use strict";cc._RF.push(t,"76ff8CGK6pFOatu91UBctpm","Game");var i=e("ModuleEventEnum"),o={init:function(){cc.systemEvent.on(i.GO_GAME,this.onGoGame.bind(this)),cc.systemEvent.on(i.ENERGY_NEEDED,this.onEnergyNeeded.bind(this))},onGoGame:function(e,t){window.facade.CurrentScene="Game",cc.director.loadScene(window.facade.CurrentScene,function(){cc.director.getScene().name=window.facade.CurrentScene,facade.runAction(cc.sequence(cc.delayTime(.1),cc.callFunc(function(){cc.systemEvent.emit(i.GAMESENE_ENTERED)})))})},onEnergyNeeded:function(){facade.SAVE_MODE?popUp.getComponent("FloatTip").showTip("\u554a\u5076\uff0c\u5df2\u7ecf\u6ca1\u6709\u4f53\u529b\u5566\uff01"):facade.getComponent("GameModel").isRewardEnergyLimited()?popUp.getComponent("FloatTip").showTip("\u554a\u5076\uff0c\u5df2\u7ecf\u6ca1\u6709\u4f53\u529b\u5566\uff01"):popUp.getComponent("Pop").addPopByName("EnergyNeedView",null,!0,!0)},tag:"game..."};t.exports=o,cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],GetTreeStarView:[function(e,t,n){"use strict";var i;function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cc._RF.push(t,"4b2d6VJaBNOjpJIXPLwCVGP","GetTreeStarView");var a=e("ModuleEventEnum"),s=(e("CommonFunc"),e("AdsSingleton")),c=e("Singleton");cc.Class((o(i={extends:cc.Component,properties:{btn:cc.Sprite,shareSkin:cc.SpriteFrame,videoSkin:cc.SpriteFrame,aimLabel:cc.Sprite,threeStarLabel:cc.SpriteFrame,jumpLevelLabel:cc.SpriteFrame,titleLabel:cc.Sprite,threeStarTitle:cc.SpriteFrame,jumpLevelTitle:cc.SpriteFrame},onLoad:function(){this.frameCount=0},initData:function(e){this.titleLabelFlag=e,this.addValue=20},start:function(){this.rewardType=window.facade.getComponent("ShareADModel").getShareADType(),2!=this.rewardType?this.btn.spriteFrame=this.videoSkin:this.btn.spriteFrame=this.shareSkin,2!=this.titleLabelFlag?(this.titleLabel.spriteFrame=this.threeStarTitle,this.aimLabel.spriteFrame=this.threeStarLabel):(this.titleLabel.spriteFrame=this.jumpLevelTitle,this.aimLabel.spriteFrame=this.jumpLevelLabel)},onEnable:function(){cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1e5},onDisable:function(){cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1},close:function(){window.popUp.getComponent("Pop").removeTop()}},"onDisable",function(){cc.systemEvent.emit(a.BACK_ENERGY_CLOSED)}),o(i,"comfirm",function(){c.getInstance().gameMode=this,s.getInstance().showVideoAds("GetThreeStarView")}),o(i,"confirmFunc",function(){cc.systemEvent.emit(a.STAR_JUMP_CHANGE,this.titleLabelFlag),window.popUp.getComponent("Pop").removeTop()}),o(i,"update",function(e){this.frameCount++}),i)),cc._RF.pop()},{AdsSingleton:"AdsSingleton",CommonFunc:"CommonFunc",ModuleEventEnum:"ModuleEventEnum",Singleton:"Singleton"}],Grenade:[function(e,t,n){"use strict";cc._RF.push(t,"9ccbdRUQntBe7O3D0vFo6kP","Grenade");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{crateBoomPre:cc.Prefab},onLoad:function(){this._first=!0,this._kills={},this.frameCount=0,this.reflectCount=0},start:function(){},onBeginContact:function(e,t,n){},onPreSolve:function(e,t,n){},onPostSolve:function(e,t,n){},findSuffer:function(){for(var e=cc.director.getScene().getChildByName("Canvas").getChildByName("levelPlay").getChildren(),t=this.node.position,n=0;n<e.length;n++)if(e[n].name.match("suffer")||e[n].name.match("vip")){var i=e[n].getChildByName("body_1").convertToWorldSpaceAR(cc.v2());if(e[n].parent.convertToNodeSpaceAR(i).sub(t).mag()<200){var o=e[n];this.killSuffer(o)}}},killSuffer:function(e){for(var t=e.position.sub(this.node.position).normalizeSelf(),n=0;n<e.getChildren().length;n++){var o=e.getChildren()[n],a=o.getComponent(cc.RigidBody);if("body"==o.group&&a){var s=cc.director.getScene().getChildByName("Canvas").getChildByName("levelPlay").convertToNodeSpaceAR(o.convertToWorldSpaceAR(cc.v2()));a.applyLinearImpulse(t.mulSelf(1.8),s);var c=cc.instantiate(e.getChildByName("blood"));c.active=!0,c.getComponent(cc.ParticleSystem).resetSystem(),c.parent=o}}cc.systemEvent.emit(i.KILLED,e.name)},findProp:function(){for(var e=cc.director.getScene().getChildByName("Canvas").getChildByName("levelPlay").getChildren(),t=this.node.position,n=0;n<e.length;n++)if("prop"==e[n].group||"crossprop"==e[n].group){var i=e[n].convertToWorldSpaceAR(cc.v2());e[n].parent.convertToNodeSpaceAR(i).sub(t).mag()<200&&this.applyToProp(e[n])}else if("box"==e[n].group){i=e[n].convertToWorldSpaceAR(cc.v2());e[n].parent.convertToNodeSpaceAR(i).sub(t).mag()<200&&this.applyToBox(e[n])}else if("boom"==e[n].group){i=e[n].convertToWorldSpaceAR(cc.v2());e[n].parent.convertToNodeSpaceAR(i).sub(t).mag()<200&&this.applyToBoom(e[n])}},applyToProp:function(e){var t=e.position.sub(this.node.position).normalizeSelf();e.getComponent(cc.RigidBody).applyForceToCenter(t.mulSelf(1e4))},applyToBox:function(e){var t=cc.instantiate(this.crateBoomPre);t.position=cc.director.getScene().getChildByName("Canvas").getChildByName("levelPlay").convertToNodeSpaceAR(e.convertToWorldSpaceAR(cc.v2())),t.getComponent(cc.ParticleSystem).autoRemoveOnFinish=!0,t.getComponent(cc.ParticleSystem).resetSystem(),cc.director.getScene().getChildByName("Canvas").getChildByName("levelPlay").addChild(t),e.removeFromParent()},applyToBoom:function(e){e.getComponent("Boom").explosive()},explosive:function(){this.findSuffer(),this.findProp();var e=cc.instantiate(this.crateBoomPre);e.position=cc.director.getScene().getChildByName("Canvas").getChildByName("levelPlay").convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(cc.v2())),e.getComponent(cc.ParticleSystem).autoRemoveOnFinish=!0,e.getComponent(cc.ParticleSystem).resetSystem(),cc.director.getScene().getChildByName("Canvas").getChildByName("levelPlay").addChild(e),window.audio.getComponent("SoundManager").playEffect("bomb"),this.node.removeFromParent()},update:function(e){this.frameCount++,180==this.frameCount&&(this.explosive(),window.facade.getComponent("LevelModel").useABullet())}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],Guideclassic:[function(e,t,n){"use strict";cc._RF.push(t,"69a9aMxCshKnIbCB3XtOFht","Guideclassic");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){},doClose:function(){console.log("doClose...guide"),cc.systemEvent.emit(i.GUIDE_CLOSED)},update:function(e){}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],GunMasterRank:[function(e,t,n){"use strict";cc._RF.push(t,"acb984ROcdDg58lmGgnj/EW","GunMasterRank");var i=e("CommonFunc"),o=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{scroll:cc.Node,content:cc.Node,recommendPre:cc.Prefab,changeNameBtn:cc.Sprite,selfRankData:cc.Node,chanllenLabel:cc.Label,getBounsBtn:cc.Node,chanllenBtn:cc.Node,timeNode:cc.Node,timeLabel:cc.Label},onLoad:function(){this.frameCount=0,cc.systemEvent.on(o.RANK_LIST,this.gotRank,this),cc.systemEvent.on(o.PLAYER_RANK_DATA,this.setPlayerSelfData,this),cc.systemEvent.on(o.PLAYER_NAME_CHANGE,this.changeNameBack,this)},onEnable:function(){cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1e5},onDisable:function(){cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1},initData:function(e){(this.setChanllenLabel(),this.frameCount=0,this.lesstimes=0,this.timeNode.active=!1,window.facade.getComponent("GameModel").setOpenRankfFlag(1),0==window.facade.getComponent("GameModel").levelShotUpdate)&&(window.facade.getComponent("GameModel").getLocalTimeHour()>=21?window.facade.getComponent("GameModel").setShotUpdateData(1):this.getTimeLess());0!=window.facade.getComponent("GameModel").oneShotLevel&&1!=window.facade.getComponent("GameModel").oneShotLevel||window.facade.getComponent("GameModel").setOneShotLeves()},start:function(){cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1,window.facade.getComponent("BannerModel").hideBanner(),window.facade.getComponent("RankModel").requestSelfRank(2),window.facade.getComponent("RankModel").requestRankList(2)},doClose:function(){cc.systemEvent.off(o.RANK_LIST,this.gotRank,this)},gotRank:function(e){for(var t=0;t<e.length;t++)e[t].rankNo=t+1;this.scroll.getComponent("ListViewCtrl").setList(e,!1,2)},getTimeLess:function(){var e=new Date,t=60*e.getHours()*60+60*e.getMinutes()+e.getSeconds();this.lesstimes=75600-t;var n=String(i.changeNumToTime(this.lesstimes));this.timeNode.active=!0,this.timeLabel.string=n},setPlayerSelfData:function(e){if(this.selfRankData.getComponent("RankItem").setSelfItem(e),0==window.facade.getComponent("GameModel").levelShotUpdate)window.facade.getComponent("GameModel").chanllenTimes>=facade.getComponent("ShareADModel").GameConfig.OneBulletCnt.Value?(this.chanllenBtn.active=!1,this.getBounsBtn.active=!0):(this.chanllenBtn.active=!0,this.getBounsBtn.active=!1);else if(1==window.facade.getComponent("GameModel").levelShotUpdate){this.chanllenBtn.active=!1,this.getBounsBtn.active=!0;var t=e.rank_order,n=facade.getComponent("ShareADModel").GameConfig.RankReward.Value.split(",");this.rankBouns=0;for(var i=0;i<n.length;i++){if(t<=n[i].split(":")[0]){this.rankBouns=n[i].split(":")[1];break}}0==t&&(this.rankBouns=0)}else 2==window.facade.getComponent("GameModel").levelShotUpdate&&(this.chanllenBtn.active=!1,this.getBounsBtn.active=!0)},jumpWorldRank:function(){window.popUp.getComponent("Pop").removeTop(),window.popUp.getComponent("Pop").addPopByName("Rank",this,!0,!0,!1)},changeNameBack:function(e){window.facade.getComponent("RankModel").selfdata.nick_name=e,this.selfRankData.getComponent("RankItem").nameL.string=e},close:function(){facade.getComponent("BannerModel").showBanner(),window.popUp.getComponent("Pop").removeTop()},changeNameFuc:function(){window.popUp.getComponent("Pop").addPopByName("ChangeNameView",this,!0,!1,!1)},onGoShot:function(){var e=window.facade.getComponent("GameModel").chanllenTimes;if(e>=facade.getComponent("ShareADModel").GameConfig.OneBulletCnt.Value){popUp.getComponent("FloatTip").showTip("\u4eca\u65e5\u6311\u6218\u6b21\u6570\u5df2\u7528\u5b8c\uff0c\u8bf7\u660e\u65e5\u518d\u6765\uff01")}else 0==e&&window.facade.getComponent("GameModel").setAddChanllenNum(),window.facade.getComponent("LevelModel").initShotData(),window.popUp.getComponent("Pop").removeTop()},setChanllenLabel:function(){var e=window.facade.getComponent("GameModel").chanllenTimes,t=facade.getComponent("ShareADModel").GameConfig.OneBulletCnt.Value;this.chanllenLabel.string=t-e+"/"+t},getBounsResult:function(){if(0==window.facade.getComponent("GameModel").levelShotUpdate){var e="\u6bcf\u65e521\u70b9\u7ed3\u7b97\uff0c\u53ef\u9886\u53d6\u5956\u52b1\uff01";popUp.getComponent("FloatTip").showTip(e)}else if(1==window.facade.getComponent("GameModel").levelShotUpdate){window.facade.getComponent("GameModel").addCash(Number(this.rankBouns)),window.facade.getComponent("GameModel").setShotUpdateData(2);e="\u6210\u529f\u9886\u53d6\u5956\u52b1: \u949e\u7968 x "+this.rankBouns;popUp.getComponent("FloatTip").showTip(e)}else if(2==window.facade.getComponent("GameModel").levelShotUpdate){e="\u4eca\u65e5\u5df2\u9886\u53d6\u5956\u52b1\uff0c\u8bf7\u660e\u65e5\u518d\u6765\uff01";popUp.getComponent("FloatTip").showTip(e)}},setupList:function(e){},update:function(e){if(this.lesstimes>0&&(this.frameCount+=e,this.frameCount>=1))if(this.frameCount=0,this.lesstimes--,this.lesstimes>0){var t=String(i.changeNumToTime(this.lesstimes));this.timeNode.active=!0,this.timeLabel.string=t}else window.facade.getComponent("GameModel").setShotUpdateData(1),window.popUp.getComponent("Pop").removeTop(),window.popUp.getComponent("Pop").addPopByName("GunMasterRank",this,!0,!1,!1)}}),cc._RF.pop()},{CommonFunc:"CommonFunc",ModuleEventEnum:"ModuleEventEnum"}],Gunner:[function(e,t,n){"use strict";cc._RF.push(t,"bdedemEGelFypnWu5ALUxqt","Gunner");e("MathUtils");cc.Class({extends:cc.Component,properties:{handGun:cc.Node,muzzel:cc.Node,line:cc.Node,bulletPre:cc.Prefab,smoke:cc.ParticleSystem,isInUI:!1,isSuffer:!1},onLoad:function(){this.isInUI||this.isSuffer||(this.aim=new cc.Node,this.aim.addComponent(cc.Sprite),this.handGun.addChild(this.aim,999),this.aim.active=!1,this.aim.scale=.5,this.aim.y=10)},start:function(){this.node.parent.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.parent.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.parent.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.parent.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},onEnable:function(){this.node.parent.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.parent.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.parent.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.parent.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},onDisable:function(){this.node.parent.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.parent.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.parent.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.parent.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},onDestroy:function(){this.node.parent.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.parent.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.parent.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.parent.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},onTouchStart:function(e){var t=e.getLocation();this._inTouch=!0,this.isInUI||(this.line.active=!0,this.line.runAction(cc.repeatForever(cc.sequence(cc.fadeIn(.5),cc.fadeOut(.5))))),this.gunPos=this.handGun.convertToWorldSpaceAR(cc.v2()),this.gunDir=t.sub(this.gunPos);var n=this.gunDir.signAngle(cc.v2(1,0));this.handGun.angle=-n/Math.PI*180},onTouchMove:function(e){var t=e.getLocation();if(this._inTouch){this.gunPos=this.handGun.convertToWorldSpaceAR(cc.v2()),this.gunDir=t.sub(this.gunPos);var n=this.gunDir.signAngle(cc.v2(1,0));this.handGun.angle=-n/Math.PI*180,this.aim&&(this.aim.active=!0,this.aim.x=this.gunDir.mag())}},onTouchEnd:function(e){this.isInUI?this.createAbullet():(this.aim&&(this.aim.active=!1),window.facade.getComponent("Facade").levelPassed||(facade.getComponent("LevelModel").shotedBullets>=facade.getComponent("LevelModel").bulletFilled?window.audio.getComponent("SoundManager").playEffect("empty"):(this.createAbullet(),window.facade.getComponent("LevelModel").shotABullet())))},createAbullet:function(){var e=cc.instantiate(this.bulletPre);e.position=this.node.parent.convertToNodeSpaceAR(this.muzzel.convertToWorldSpaceAR(cc.v2()));var t=this.gunDir.normalizeSelf();e.getComponent(cc.RigidBody).linearVelocity=t.mulSelf(2e3),e.angle=this.handGun.angle,e.master=this.node.name,this.node.parent.addChild(e),window.audio.getComponent("SoundManager").playEffect("shoot"),this._inTouch=!1,this.smoke.resetSystem(),this.line.stopAllActions(),this.line.active=!1},onTouchCancel:function(e){e.getLocation();this._inTouch=!1,this.line.stopAllActions(),this.line.active=!1,this.handGun.angle=-90},update:function(e){}}),cc._RF.pop()},{MathUtils:"MathUtils"}],HoverWinUI:[function(e,t,n){"use strict";cc._RF.push(t,"8c35f2pz3ZPULEUUGsAaf5y","HoverWinUI"),cc.Class({extends:cc.Component,properties:{backBtn:cc.Node,title:cc.Node,titleLine:cc.Node,showSp1:cc.Node,showSp2:cc.Node},onLoad:function(){this.closeActTime=.2},start:function(){if(window.wx){var t=e("ModuleEventEnum");cc.systemEvent.once(t.UPDATE_HOVER_SHOW,this.onClickBack,this),facade.getComponent("PlayerModel").wxAdaptor.reigsterWXFunc(function(){facade.getComponent("PlayerModel").wxAdaptor.checkHoverWinShow()&&(console.log("aaaaa   check  \u9886\u5956\u5566\u5566\u5566\u5566\u5566\u5566"),facade.getComponent("GameModel").applyHoverWinReward())},!0)}},viewDidAppear:function(){this.backBtn.active=!0,this.title.active=!0,this.titleLine.active=!0,this.showSp1.active=!0,this.showSp2.active=!0;var e=cc.moveBy(.3,cc.v2(0,-200)).easing(cc.easeBackOut());this.backBtn.runAction(e);var t=cc.moveBy(.3,cc.v2(-300,0)).easing(cc.easeBackOut());this.title.runAction(t);var n=cc.moveBy(.3,cc.v2(500,0)).easing(cc.easeBackOut());this.titleLine.runAction(n);var i=cc.scaleTo(.3,.9).easing(cc.easeBackOut());this.count=1,this.actId=setInterval(function(){3!=this.count?(this["showSp"+this.count].runAction(i.clone()),this.count++):clearInterval(this.actId)}.bind(this),300)},doClose:function(){var e=cc.scaleTo(.2,1.1);this.title.runAction(e.clone()),this.titleLine.runAction(e.clone()),this.backBtn.runAction(e.clone()),this.showSp1.runAction(e.clone()),this.showSp2.runAction(e.clone())},onClickBack:function(){popUp.getComponent("Pop").removeByName("HoverWinUI")}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],HttpConnector:[function(e,t,n){"use strict";cc._RF.push(t,"1acd1wFCKFJm77lXtWF8MQP","HttpConnector");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.WxRegister=this.node.checkName+"/checkCode",this.node.WxServerDelivery="weixin/shopBuy",this.node.ServerInfo="gameServer/userData",this.node.ServerInfoTest="test/cargodServerInfo",this.node.BoardCastImage="test/ipartGameNotice",this.node.RefreshUserInfo="weixin/refreshUserInfo",this.node.CheckFuncOpen="game/funcList",this.node.GetRecord="saveRecord/getUserGameRecord",this.node.SaveRecord="saveRecord/saveRecord",this.node.Setting="game/getSettingInfo",this.node.AcceptInvite="game/inviteAccept",this.node.InviteeList="game/inviteeList",this.node.CollectorDa="log/collectorDa",this.node.SaveScore="rank/saveScore",this.node.RankList="rank/getRankList",this.node.SelfRankData="rank/getSelfRankOrder",this.node.QQLogin="qzone/login",this.node.QQBuy="qzone/shopBuy",this.node.QQUserInfo="/v3/user/get_info",this.node.QQGetUionid="/v3/user/get_unionid",this.node.QQGetFriends="/v3/relation/get_app_friends",this.node.QQGetMultiInfo="/v3/user/get_multi_info",this.node.QQGetUserInfo="/v3/user/get_playzone_userinfo",this.node.RecommendGame="game/recommendData",this.node.NavigateOut="game/navigateOut",this.node.MoreGame="game/boxData",this.node.CityList="game/funcList"},start:function(){},dealResponseAb:function(e){},dealResponseJson:function(e){console.log("dealResponseJson:",e),cc.systemEvent.emit(i.GOT_HTTP_RES,e)},refineReport:function(e){},appLinkReport:function(e){if(facade.isMiniGame){this.reqData=null,this.reqData=window.facade.getComponent("PlayerModel").wxAdaptor.getAppLinkParams(),this.reqData.objGmId=e;var t=Date.parse(new Date);this.reqData.timeStr=t/1e3,console.log("====behaveReport:",this.reqData);var n={gmId:this.reqData.gmId,objGmId:this.reqData.objGmId,openid:this.reqData.openid,chan:this.reqData.chan,subChan:this.reqData.subChan,timeStr:this.reqData.timeStr};this.reqData.sign=this.createSign(this.objKeySort(n));var i="",o=0;for(var a in this.reqData)o>0&&(i+="&"),o++,i+=a+"="+this.reqData[a];var s=window.facade.appLinkReportAdress;this.requestUrl(s,i,!0)}},behaveReport:function(e){},objKeySort:function(e){for(var t=Object.keys(e).sort().reverse(),n={},i=0;i<t.length;i++)n[t[i]]=e[t[i]];return n},createSign:function(e){for(var t=Object.keys(e),n="",i=0;i<t.length;i++)i&&(n+="_"),n+=e[t[i]];return cc.md5Encode(n).toLowerCase()},request:function(e,t){var n="",i=0;for(var o in t)i>0&&(n+="&"),i++,n+=o+"="+t[o];this.requestUrl(e,n,!0)},urlencode:function(e){var t=encodeURIComponent(e);return t=t.replace(/[^0-9a-zA-Z\-_\.%]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})},requestQQApi:function(e,t){var n=window.facade.openapiUrl+e,i=[];for(var o in t)i.push(o+"="+t[o]);i.sort(function(e,t){return e>t?1:e<t?-1:0});var a=i.join("&"),s=["GET",this.urlencode(e),this.urlencode(i.join("&"))].join("&"),c=CryptoJS.HmacSHA1(s,window.facade.qqAppKey+"&").toString(CryptoJS.enc.Base64);a+="&sig="+this.urlencode(c),this.requestUrl(n,a,!1)},requestUrl:function(e,t,n,i,o){if(null!=e&&""!=e){var a;a=t&&!n?e+"?"+t:e;var s=new XMLHttpRequest;console.log("requestUrl",e),n?(s.open("POST",e,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded")):s.open("GET",a,!0),s.onerror=function(){null!=i&&1==s.readyState&&s.status},s.onreadystatechange=function(){4==s.readyState&&(200==s.status?"arraybuffer"==o?(s.responseType=o,this.dealResponseAb(s.response)):this.dealResponseJson(JSON.parse(s.responseText)):i&&i(s.status))}.bind(this),facade.isMiniGame&&(s.timeout=5e3),null==t||""==t?s.send():s.send(t)}},getParamString:function(e){var t="";for(var n in e)t+="{0}={1}&".format(n,e[n]);return console.log("params---------\x3e",t),t.substr(0,t.length-1)}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],InterstitialADModel:[function(e,t,n){"use strict";cc._RF.push(t,"b031dS5untDKKiBvcc5QhZG","InterstitialADModel");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.isFake=!1,this.canShowInterstital=!0,this.canShow=!0,facade.isMiniGame&&(cc.systemEvent.on(i.WX_REGISTERED,this.onGotToken.bind(this)),cc.systemEvent.on(i.FUNCOPEN_UPDATE,this.onGotToken.bind(this)))},onGotToken:function(){var e=facade.getComponent("ShareADModel").GameConfig.Fake_Screen;this.showIdCyc=e.Value.split("|"),this.cycId=-1,this.initInterstitialAd()},initInterstitialAd:function(){this.canShow=facade.getComponent("PlayerModel").wxAdaptor.checkInterstitialAd(),this.canShow?facade.getComponent("PlayerModel").isIntersADOpen()?(this.interAd=facade.getComponent("PlayerModel").wxAdaptor.createInterstitialAd({adUnitId:"adunit-dda940b072af5cf3"}),this.interAd?(console.log("----- \u521b\u5efa\u63d2\u5c4f\u5e7f\u544a success---"),this.interAd.onLoad(function(e){console.log("\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d\u4e2d...")}.bind(this)),this.interAd.onError(function(e){this.canShow=!1,console.log(" \u63d2\u5c4f\u5e7f\u544a\u51fa\u9519\uff1a ",e.errCode)}),this.interAd.onClose(this.callBack.bind(this))):(this.canShow=!1,console.log("\u521b\u5efa\u63d2\u5c4f\u5e7f\u544a\u5931\u8d25"))):this.canShow=!1:console.log("\u57fa\u7840\u5e93\u5c0f\u4e8e2.6.0\uff0c \u65e0\u6cd5\u521b\u5efa\u63d2\u5c4f\u5e7f\u544a...")},showInterstitialAd:function(e,t){this.cycId++,this.cycId>=this.showIdCyc.length&&(this.cycId=0);var n=this;if(this.type=e,!this.canShow)return this.canShowInterstital=!1,void(0==e.videoId&&0==e.inviteId?this.showFakeInterAD():facade.getComponent("ShareADModel").showShareAD(n.type,t));if(this.canShowInterstital=!0,this.showId=e.interstitalId,this.callFunc=t,"0"!=this.showIdCyc[this.cycId]){var i=this.interAd.show();i.then(function(e){console.log("report \u63d2\u5c4f\u57cb\u70b9\uff1a",n.showId),n.sendBehaveReport(1)}),i.catch(function(e){e.errCode&&(console.log("\u63d2\u5c4f\u5e7f\u544a \u663e\u793a\u5931\u8d25 ,errCode: ",e.errCode),n.canShowInterstital=!1,n.sendBehaveReport(2),0==n.type.videoId&&0==n.type.inviteId&&n.showFakeInterAD())})}else this.showFakeInterAD()},showADAfterShare:function(){this.canShow&&(this.interAd.show(),this.showId=facade.INTERSTIAL_AFTER_SHARE,this.sendBehaveReport(1))},sendBehaveReport:function(e){},callBack:function(){console.log("callback is : ",this.callFunc),this.callFunc&&this.callFunc.succ(),this.sendBehaveReport(3)},showAfterProp:function(){this.interAd.show(),this.showId=facade.INTERSTIAL_AFTER_PROP,this.sendBehaveReport(1)},showFakeInterAD:function(){facade.SAVE_MODE||popUp.getComponent("Pop").addPopByName("FakeInterUI",this.showIdCyc[this.cycId],!0)}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],InviteDailyItem1:[function(e,t,n){"use strict";cc._RF.push(t,"10e13rjhdZGzqwtUhH39QgD","InviteDailyItem1"),cc.Class({extends:cc.Component,properties:{title:cc.Label,now:cc.Node,isget:cc.Node,rewardCount:cc.Label,mask:cc.Node},onLoad:function(){var t=e("ModuleEventEnum");cc.systemEvent.on(t.INVITE_UPDATE_DAILY,this.updateShow,this)},updateShow:function(e){if(this.itemId==e)return this.mask.active=!1,this.showImg=this.node.getChildByName("cash"),this.showImg.active=!0,this.isget.active=!0,void(this.title.node.color=cc.Color.WHITE);facade.getComponent("GameModel").newbieFetchList.length==this.itemId&&(this.now.active=!0,this.title.color=cc.Color(254,203,24,255))},setItemData:function(e,t){this.itemData=t,this.itemId=e;var n=facade.getComponent("ShareADModel").GameConfig.InviteB;if(this.title.string="\u7b2c"+(e+1)+"\u4e2a\u597d\u53cb",this.rewardCount.string="x"+n.Value,this.showImg=this.node.getChildByName("cash"),this.showImg.active=!0,null==t)this.now.active=!1,this.mask.active=!0,this.isget.active=!1;else{var i=facade.getComponent("GameModel").newbieFetchList;for(var o in this.now.active=i.length==this.itemId,this.mask.active=!1,this.isget.active=!0,i)if(i[o]==this.itemData.user_id){this.isget.active=!0,this.isInList=!0;break}}},onClickRevice:function(){!this.isInList&&this.itemData&&facade.getComponent("GameModel").applyInviteNewbieReward(this.itemId,this.itemData.user_id)}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],InviteDailyItem:[function(e,t,n){"use strict";cc._RF.push(t,"9b817OFkFFMDpkvL3RheKns","InviteDailyItem"),cc.Class({extends:cc.Component,properties:{title:cc.Label,now:cc.Node,isget:cc.Node,rewardCount:cc.Label,mask:cc.Node},onLoad:function(){var t=e("ModuleEventEnum");cc.systemEvent.on(t.INVITE_UPDATE_DAILY,this.updateShow,this)},updateShow:function(e){if(this.itemId==e)return this.mask.active=!1,this.showImg=this.node.getChildByName("strength"),this.showImg.active=!0,this.isget.active=!0,void(this.title.node.color=cc.Color.WHITE);facade.getComponent("GameModel").aliveFetchList.length==this.itemId&&(this.now.active=!0,this.title.color=cc.Color(254,203,24,255))},setItemData:function(e,t){this.itemData=t,this.itemId=e;var n=facade.getComponent("ShareADModel").GameConfig.InviteT;if(this.title.string="\u7b2c"+(e+1)+"\u4e2a\u597d\u53cb",this.rewardCount.string="x"+n.Value,this.showImg=this.node.getChildByName("strength"),this.showImg.active=!0,null==t)this.now.active=!1,this.mask.active=!0,this.isget.active=!1;else{var i=facade.getComponent("GameModel").aliveFetchList;for(var o in this.now.active=i.length==this.itemId,this.mask.active=!1,this.isget.active=!0,i)if(i[o]==this.itemData.user_id){this.isget.active=!0,this.isInList=!0;break}}},onClickRevice:function(){!this.isInList&&this.itemData&&facade.getComponent("GameModel").applyInviteAliveReward(this.itemId,this.itemData.user_id)}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],InviteDailyUI:[function(e,t,n){"use strict";cc._RF.push(t,"5c0ealK3gtN4JzU2R7eiCeo","InviteDailyUI");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{item:cc.Prefab,content:cc.Node,recommendPre:cc.Prefab},onLoad:function(){this.initContent()},onEnable:function(){cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1e4},onDisable:function(){cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1},initRecommond:function(){},initContent:function(){for(var e=facade.getComponent("GameModel").aliveFetchList,t=0;t<4;t++){var n=cc.instantiate(this.item);null!=e[t]?n.getComponent("InviteDailyItem").setItemData(t,e[t]):n.getComponent("InviteDailyItem").setItemData(t,null),this.content.addChild(n)}},onClickInvite:function(){var e={inviteId:1533,videoId:0,assistId:0};window.facade.getComponent("ShareADModel").showShareAD(e,{succ:function(e){console.log("\u62c9\u6d3b \u5206\u4eab/\u89c6\u9891:",e),popUp.getComponent("FloatTip").showTip("\u5206\u4eab\u6210\u529f");var t=facade.getComponent("GameModel").aliveFetchList;facade.getComponent("GameModel").applyInviteAliveReward(t.length,"123")}.bind(this),fail:function(e,t){popUp.getComponent("FloatTip").showTip(e)}.bind(this)})},onClickBack:function(){popUp.getComponent("Pop").removeTop()},doClose:function(){cc.systemEvent.off(i.GAME_OPEN_DAILY_INVITE,this.initContent,this)}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],InviteNewItem:[function(e,t,n){"use strict";cc._RF.push(t,"6cc61JBEQRKR5Hh2QcQoXvj","InviteNewItem"),cc.Class({extends:cc.Component,properties:{awardCount:cc.Label,addTip:cc.Node,notInvite:cc.Node,inviteLab:cc.Node,canGet:cc.Node,reveiceBtn:cc.Node},start:function(){this.addTip.active=!1,this.awardCount.string="x"+facade.getComponent("ShareADModel").GameConfig.InviteB.Value},setItemData:function(e,t,n){this.id=e,this.itemID=t,this.itemData=n,0==n.user_id?(this.notInvite.active=!0,this.addTip.active=!0,this.inviteLab.actiev=!0,this.canGet.active=!1,this.reveiceBtn.active=!1):(this.canGet.active=!0,this.reveiceBtn.active=!0,this.notInvite.active=!1,this.addTip.active=!1,this.inviteLab.actiev=!1)},onClickRevice:function(){facade.getComponent("GameModel").applyInviteNewbieReward(this.itemID,this.itemData.user_id),popUp.getComponent("Pop").removeTop()},onClickInvite:function(){var e={inviteId:1534,videoId:0,assistId:0};window.facade.getComponent("ShareADModel").showShareAD(e,{succ:function(e){console.log("\u62c9\u65b0 \u5206\u4eab/\u89c6\u9891:",e),popUp.getComponent("FloatTip").showTip("\u5206\u4eab\u6210\u529f")}.bind(this),fail:function(e,t){popUp.getComponent("FloatTip").showTip(e)}.bind(this)})}}),cc._RF.pop()},{}],InviteNewUI:[function(e,t,n){"use strict";cc._RF.push(t,"21143532qxHr70CwCYP3ozg","InviteNewUI");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{item:cc.Prefab,content:cc.Node,recommendPre:cc.Prefab},onLoad:function(){this.initContent()},onEnable:function(){cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1e4},onDisable:function(){cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1},initRecommond:function(){},initContent:function(){for(var e=facade.getComponent("GameModel").newbieFetchList,t=0;t<4;t++){var n=cc.instantiate(this.item);null!=e[t]?n.getComponent("InviteDailyItem1").setItemData(t,e[t]):n.getComponent("InviteDailyItem1").setItemData(t,null),this.content.addChild(n)}},onClickInvite:function(){var e={inviteId:1533,videoId:0,assistId:0};window.facade.getComponent("ShareADModel").showShareAD(e,{succ:function(e){console.log("\u62c9\u6d3b \u5206\u4eab/\u89c6\u9891:",e),popUp.getComponent("FloatTip").showTip("\u5206\u4eab\u6210\u529f");var t=facade.getComponent("GameModel").newbieFetchList;facade.getComponent("GameModel").applyInviteNewbieReward(t.length,"123")}.bind(this),fail:function(e,t){popUp.getComponent("FloatTip").showTip(e)}.bind(this)})},onClickBack:function(){popUp.getComponent("Pop").removeTop()},doClose:function(){cc.systemEvent.off(i.GAME_OPEN_DAILY_INVITE,this.initContent,this)}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],LevelData:[function(e,t,n){"use strict";cc._RF.push(t,"484fbOkU9hCD7Py4O3P1jn/","LevelData"),cc.Class({extends:cc.Component,properties:{totalBullet:5,starBullet:[cc.Integer]},onLoad:function(){},start:function(){},update:function(e){}}),cc._RF.pop()},{}],LevelItem:[function(e,t,n){"use strict";cc._RF.push(t,"9b8d4ftUfdHjrFzNCl1Hbbh","LevelItem");var i=e("ModuleEventEnum"),o=e("AdsSingleton"),a=e("Singleton");cc.Class({extends:cc.Component,properties:{lock:cc.SpriteFrame,unlock:cc.SpriteFrame,bg:cc.Sprite,light:cc.Node,stars:cc.Node,label:cc.Node,lockByStar:cc.Node,levelCondition:cc.Sprite},onLoad:function(){},start:function(){this._config=this.node.config;for(var e=1;e<=3;e++)this.stars.getChildByName("star"+e).active=!1;var t=window.facade.getComponent("LevelModel").getLevelStar(facade.selectedLevelType+"_"+this._config.Level),n=facade.getComponent("LevelModel").getTotalStar();for(e=1;e<=t;e++)this.stars.getChildByName("star"+e).active=!0;this.light.active=!1,this.levelCondition.node.active=!1;var i=this._config.BonusType;if(i>0){var o=cc.loader.getRes("uis",cc.SpriteAtlas);this.levelCondition.spriteFrame=o.getSpriteFrame("level_label"+i)}this._config.Level==this.node.currentLevel?(this.light.active=!0,this.bg.spriteFrame=this.unlock,this.stars.active=!1,this._config.Star>n&&(this.label.active=!1,this.lockByStar.active=!0),i>0&&(this.levelCondition.node.active=!0)):this._config.Level<this.node.currentLevel?(this._config.BonusType=0,this.bg.spriteFrame=this.unlock,this.label.y=20,this.stars.active=!0):(this.locked=!0,this.stars.active=!1,this.bg.spriteFrame=this.lock,i>0&&(this.levelCondition.node.active=!0)),this.label.getComponent("TextureLabel").setText(String(this._config.Level))},goLevel:function(){if(!this.locked){if(window.facade.getComponent("LevelModel").getLevelVideo(facade.selectedLevelType+"_"+this._config.Level)>0){if(3==this._config.BonusType)window.facade.getComponent("LevelModel").getLevelStar(facade.selectedLevelType+"_"+this._config.Level)<3&&(this._config.Reward=2*this._config.Reward)}else if(this._config.Level==this.node.currentLevel&&this._config.BonusType>0)return void this.watchVideo();var e=facade.getComponent("LevelModel").costEnergy;if(facade.getComponent("GameModel").energy<e)cc.systemEvent.emit(i.ENERGY_NEEDED);else{var t=facade.getComponent("LevelModel").getTotalStar();this._config.Star>t?popUp.getComponent("FloatTip").showTip("\u6536\u96c6"+this._config.Star+"\u9897\u661f\u661f\u89e3\u9501"):cc.systemEvent.emit(i.GO_LEVEL,this._config.Level)}}},watchVideo:function(){a.getInstance().gameMode=this,o.getInstance().showVideoAds("levelWatchVideo")},levelWatchVideoFunc:function(){this.jumpToLevlUi()},jumpToLevlUi:function(){if(window.facade.getComponent("LevelModel").setOverVideo(this.node.currentLevel),facade.getComponent("LevelModel").costEnergy=1,1==this._config.BonusType){facade.getComponent("LevelModel").costEnergy=0;var e=facade.getComponent("LevelModel").costEnergy;if(facade.getComponent("GameModel").energy<e)return void cc.systemEvent.emit(i.ENERGY_NEEDED)}2==this._config.BonusType&&(this._config.LuckyPoint=2*this._config.LuckyPoint),3==this._config.BonusType&&(this._config.Reward=2*this._config.Reward);var t=facade.getComponent("LevelModel").getTotalStar();this._config.Star>t?popUp.getComponent("FloatTip").showTip("\u6536\u96c6"+this._config.Star+"\u9897\u661f\u661f\u89e3\u9501"):cc.systemEvent.emit(i.GO_LEVEL,this._config.Level)},update:function(e){}}),cc._RF.pop()},{AdsSingleton:"AdsSingleton",ModuleEventEnum:"ModuleEventEnum",Singleton:"Singleton"}],LevelLoader:[function(e,t,n){"use strict";cc._RF.push(t,"f32202lWMxAJZ+3qEvZhZFv","LevelLoader");var i=e("ModuleEventEnum"),o=e("AnalyticsUtilities").AnalyticsUtilities,a=(e("AdsSingleton"),e("Singleton"));cc.Class({extends:cc.Component,properties:{ropeJointPre:cc.Prefab,back_spriteFrames:{default:[],type:[cc.SpriteFrame]},tu_spriteFrames:{default:[],type:[cc.SpriteFrame]},tex_spriteFrames:{default:[],type:[cc.SpriteFrame]},Rhand_2_spriteFrames:{default:[],type:[cc.SpriteFrame]},Rhand_1_spriteFrames:{default:[],type:[cc.SpriteFrame]},Rleg_1_spriteFrames:{default:[],type:[cc.SpriteFrame]},Rleg_2_spriteFrames:{default:[],type:[cc.SpriteFrame]},body_2_spriteFrames:{default:[],type:[cc.SpriteFrame]},body_1_spriteFrames:{default:[],type:[cc.SpriteFrame]},head_spriteFrames:{default:[],type:[cc.SpriteFrame]},Lleg_1_spriteFrames:{default:[],type:[cc.SpriteFrame]},Lleg_2_spriteFrames:{default:[],type:[cc.SpriteFrame]},Lhand_2_spriteFrames:{default:[],type:[cc.SpriteFrame]},Lhand_1_spriteFrames:{default:[],type:[cc.SpriteFrame]},role_bodyPart_spriteFrames:{default:[],type:[cc.SpriteFrame]},role_gunPart_spriteFrames:{default:[],type:[cc.SpriteFrame]}},onLoad:function(){cc.loader.loadRes("roles",cc.SpriteAtlas),cc.systemEvent.on(i.GO_LEVEL,this.onGoLevel,this),cc.systemEvent.on(i.RELOAD_LEVEL,this.onReloadLevel,this),cc.systemEvent.on(i.GO_NEXT,this.onGoNext,this),cc.systemEvent.on(i.GO_SHOT_NEXT,this.onGoShotNext,this),cc.systemEvent.on(i.LEVEL_ONE_SHOT_GO,this.shotLoadLevel,this)},start:function(){},onGoLevel:function(e){console.log("onGoLevel:",e);var t=facade.selectedLevelType;if("classic"==t&&(t="level"),this.loadLevel(t+"_"+e),window.tt){var n=cc.sequence(cc.delayTime(1),cc.callFunc(function(){console.log("\u6dfb\u52a0\u5f55\u5c4f\u76d1\u542c\u4e8b\u4ef6"),tt.getGameRecorderManager().onStop(function(e){console.log("\u5f55\u5c4f\u7ed3\u675f"),a.getInstance().videoPath=e.videoPath}),window.tt&&tt.getGameRecorderManager().start({duration:60}),a.getInstance().gameLastTime=0},this));this.node.runAction(n)}},shotLoadLevel:function(e){if(!this.inLoading&&!this.node.getChildByName("levelPlay")){if(window.audio.getComponent("SoundManager").pauseBGM("Bgm"),window.facade.getComponent("Facade").levelPassed=!1,this.levelType=e.split("_")[0],this._levelPre=cc.loader.getRes("pfb/levelPre",cc.Prefab),this._levelPre)return this.level=cc.instantiate(this._levelPre),this.level.position=cc.v2(),this.level.name="levelPlay",this.node.addChild(this.level,100),this.generateLevelData(),cc.systemEvent.emit(i.LEVEL_ONE_SHOT_ADD,this.levelData),this.addLevelData(e),this.changeShotSkins(),void this.changeShotBg();this.inLoading=!0,cc.loader.loadRes("pfb/levelPre",cc.Prefab,this.onShotLoaded.bind(this)),this.addLevelData(e)}},onShotLoaded:function(e,t){this.inLoading=!1,console.log("onLoaded...",t),this._levelPre=t,this.level=cc.instantiate(this._levelPre),this.level.position=cc.v2(),this.level.name="levelPlay",this.node.addChild(this.level,100),this.changeShotSkins(),this.changeShotBg(),this.generateLevelData(),cc.systemEvent.emit(i.LEVEL_ONE_SHOT_ADD,this.levelData)},loadLevel:function(e){console.log("\u540d\u5b57\u662f",e);var t=e.split("_")[0];if("level"==t&&(t="classic"),facade.selectedLevelType=t,!this.inLoading&&!this.node.getChildByName("levelPlay"))if(window.audio.getComponent("SoundManager").pauseBGM("Bgm"),window.facade.getComponent("Facade").levelPassed=!1,this.levelType=e.split("_")[0],this._levelPre=cc.loader.getRes("pfb/levelPre",cc.Prefab),this._levelPre){this.level=cc.instantiate(this._levelPre),this.level.position=cc.v2(),this.level.name="levelPlay",this.node.addChild(this.level,2),this.generateLevelData(),cc.systemEvent.emit(i.LEVEL_ADDED,this.levelData),console.log("\u52a0\u8f7d\u4e00"),this.addLevelData(e),this.changeBg();var n=cc.sequence(cc.delayTime(.2),cc.callFunc(function(){this.changeSkins()},this));this.node.runAction(n)}else console.log("\u52a0\u8f7d\u4e8c"),this.inLoading=!0,cc.loader.loadRes("pfb/levelPre",cc.Prefab,this.onLoaded.bind(this)),this.addLevelData(e),o.logEvent("\u8fdb\u5165\u6e38\u620f\u754c\u9762")},addLevelData:function(e){var t=this;cc.loader.loadRes("levelDatas/"+e,function(e,n){t.addLevelElements(n.json)})},setAnchorPointStay:function(e,t,n){var i=(t-e.anchorX)*e.width,o=(n-e.anchorY)*e.height;e.setAnchorPoint(cc.v2(t,n)),e.getComponent(cc.PhysicsBoxCollider)?(e.getComponent(cc.PhysicsBoxCollider).offset.x-=i,e.getComponent(cc.PhysicsBoxCollider).offset.y-=o):e.getComponent(cc.PhysicsCircleCollider)&&(e.getComponent(cc.PhysicsCircleCollider).offset.x-=i,e.getComponent(cc.PhysicsCircleCollider).offset.y-=o)},addLevelElements:function(e){for(var t=this,n=e.back_data,o=function(e){cc.loader.loadRes("character/back",function(i,o){var a=cc.instantiate(o);switch(a.x=n[e].posX,a.y=n[e].posY,a.width=n[e].width,a.height=n[e].height,a.angle=n[e].angle,t.setAnchorPointStay(a,n[e].anchorX,n[e].anchorY),a.getComponent(cc.PhysicsBoxCollider).size.width=n[e].width,a.getComponent(cc.PhysicsBoxCollider).size.height=n[e].height,a.getComponent(cc.PhysicsBoxCollider).apply(),a.type=n[e].type,n[e].type){case 1:a.getComponent(cc.Sprite).spriteFrame=t.back_spriteFrames[0];break;case 2:a.getComponent(cc.Sprite).spriteFrame=t.back_spriteFrames[1];break;case 3:a.getComponent(cc.Sprite).spriteFrame=t.back_spriteFrames[2];break;case 4:a.getComponent(cc.Sprite).spriteFrame=t.back_spriteFrames[3];break;case 5:a.getComponent(cc.Sprite).spriteFrame=t.back_spriteFrames[0];break;case 6:a.getComponent(cc.Sprite).spriteFrame=t.back_spriteFrames[1];break;case 7:a.getComponent(cc.Sprite).spriteFrame=t.back_spriteFrames[2]}a.parent=t.level,console.log("\u5bbd\u9ad8",a)})},a=0;a<n.length;a++)o(a);var s=e.tu_data,c=function(e){cc.loader.loadRes("character/tu",function(n,i){var o=cc.instantiate(i);switch(o.x=s[e].posX,o.y=s[e].posY,o.width=s[e].width,o.height=s[e].height,o.angle=s[e].angle,t.setAnchorPointStay(o,s[e].anchorX,s[e].anchorY),o.type=s[e].type,s[e].type){case 1:o.getComponent(cc.Sprite).spriteFrame=t.tu_spriteFrames[0];break;case 2:o.getComponent(cc.Sprite).spriteFrame=t.tu_spriteFrames[1];break;case 3:o.getComponent(cc.Sprite).spriteFrame=t.tu_spriteFrames[2];break;case 4:o.getComponent(cc.Sprite).spriteFrame=t.tu_spriteFrames[3];break;case 5:o.getComponent(cc.Sprite).spriteFrame=t.tu_spriteFrames[0];break;case 6:o.getComponent(cc.Sprite).spriteFrame=t.tu_spriteFrames[1];break;case 7:o.getComponent(cc.Sprite).spriteFrame=t.tu_spriteFrames[2]}o.parent=t.level})};for(a=0;a<s.length;a++)c(a);var r=e.sun_data,l=function(e){cc.loader.loadRes("character/sun",function(n,i){var o=cc.instantiate(i);o.x=r[e].posX,o.y=r[e].posY,o.width=r[e].width,o.height=r[e].height,o.angle=r[e].angle,t.setAnchorPointStay(o,r[e].anchorX,r[e].anchorY),o.parent=t.level})};for(a=0;a<r.length;a++)l(a);var h=e.moveBlock_data,d=function(e){cc.loader.loadRes("character/moveBlock",function(n,i){var o=cc.instantiate(i);o.x=h[e].posX,o.y=h[e].posY,o.width=h[e].width,o.height=h[e].height,o.angle=h[e].angle,t.setAnchorPointStay(o,h[e].anchorX,h[e].anchorY),o.getComponent(cc.PhysicsBoxCollider).size.width=h[e].width,o.getComponent(cc.PhysicsBoxCollider).size.height=h[e].height,o.getComponent(cc.PhysicsBoxCollider).density=h[e].density,o.getComponent(cc.PhysicsBoxCollider).apply(),"vertical"==h[e].moveDirection?(o.getComponent("MoveBlock").vertical=!0,o.getComponent("MoveBlock").horizontal=!1):(o.getComponent("MoveBlock").vertical=!1,o.getComponent("MoveBlock").horizontal=!0),o.getComponent("MoveBlock").moveRangeY=h[e].moveRangeY,o.getComponent("MoveBlock").moveRangeX=h[e].moveRangeX,o.getComponent("MoveBlock").moveSpeed=h[e].moveSpeed,o.parent=t.level})};for(a=0;a<h.length;a++)d(a);var p=e.box_data,u=function(e){cc.loader.loadRes("character/crate",function(n,i){var o=cc.instantiate(i);o.x=p[e].posX,o.y=p[e].posY,o.width=p[e].width,o.height=p[e].height,o.angle=p[e].angle,t.setAnchorPointStay(o,p[e].anchorX,p[e].anchorY),o.getComponent(cc.PhysicsBoxCollider).size.width=p[e].width,o.getComponent(cc.PhysicsBoxCollider).size.height=p[e].height,1==p[e].enabledContact?o.getComponent(cc.RigidBody).enabledContactListener=!0:o.getComponent(cc.RigidBody).enabledContactListener=!1,o.getComponent(cc.PhysicsBoxCollider).density=p[e].density,o.getComponent(cc.PhysicsBoxCollider).apply(),o.parent=t.level})};for(a=0;a<p.length;a++)u(a);var g=e.boom_data,m=function(e){cc.loader.loadRes("character/boom",function(n,i){var o=cc.instantiate(i);o.x=g[e].posX,o.y=g[e].posY,o.width=g[e].width,o.height=g[e].height,o.angle=g[e].angle,t.setAnchorPointStay(o,g[e].anchorX,g[e].anchorY),o.getComponent(cc.PhysicsBoxCollider).size.width=g[e].width,o.getComponent(cc.PhysicsBoxCollider).size.height=g[e].height,1==g[e].enabledContact?o.getComponent(cc.RigidBody).enabledContactListener=!0:o.getComponent(cc.RigidBody).enabledContactListener=!1,o.getComponent(cc.PhysicsBoxCollider).density=g[e].density,o.getComponent(cc.PhysicsBoxCollider).apply(),o.type=g[e].type,g[e].type,o.parent=t.level})};for(a=0;a<g.length;a++)m(a);var f=e.staticTex_data,v=function(e){cc.loader.loadRes("character/static_Tex",function(n,i){var o=cc.instantiate(i);switch(o.x=f[e].posX,o.y=f[e].posY,o.angle=f[e].angle,t.setAnchorPointStay(o,f[e].anchorX,f[e].anchorY),f[e].type){case 1:o.getComponent(cc.Sprite).spriteFrame=t.tex_spriteFrames[0];break;case 2:o.getComponent(cc.Sprite).spriteFrame=t.tex_spriteFrames[1];break;case 3:o.getComponent(cc.Sprite).spriteFrame=t.tex_spriteFrames[2];break;case 4:o.getComponent(cc.Sprite).spriteFrame=t.tex_spriteFrames[3];break;case 5:o.getComponent(cc.Sprite).spriteFrame=t.tex_spriteFrames[0];break;case 6:o.getComponent(cc.Sprite).spriteFrame=t.tex_spriteFrames[1];break;case 7:o.getComponent(cc.Sprite).spriteFrame=t.tex_spriteFrames[2]}o.parent=t.level})};for(a=0;a<f.length;a++)v(a);var C=e.grenade_data,w=function(e){cc.loader.loadRes("character/grenade",function(n,i){var o=cc.instantiate(i);o.x=C[e].posX,o.y=C[e].posY,o.width=C[e].width,o.height=C[e].height,o.angle=C[e].angle,t.setAnchorPointStay(o,C[e].anchorX,C[e].anchorY),o.getComponent(cc.PhysicsCircleCollider).radius=C[e].width/2,o.getComponent(cc.PhysicsCircleCollider).apply(),o.parent=t.level})};for(a=0;a<C.length;a++)w(a);var S=e.magicBox_data,y=function(e){cc.loader.loadRes("character/magicBox",function(n,i){var o=cc.instantiate(i);o.x=S[e].posX,o.y=S[e].posY,o.width=S[e].width,o.height=S[e].height,o.angle=S[e].angle,t.setAnchorPointStay(o,S[e].anchorX,S[e].anchorY),o.getComponent(cc.PhysicsBoxCollider).size.width=S[e].width,o.getComponent(cc.PhysicsBoxCollider).size.height=S[e].height,o.getComponent(cc.PhysicsBoxCollider).apply(),S[e].type,o.parent=t.level})};for(a=0;a<C.length;a++)y(a);var _=e.vip_data,E=function(e){cc.loader.loadRes("character/vip",function(n,i){var o=cc.instantiate(i);o.x=_[e].posX,o.y=_[e].posY,o.width=_[e].width,o.height=_[e].height,o.angle=_[e].angle,t.setAnchorPointStay(o,_[e].anchorX,_[e].anchorY),o.parent=t.level})};for(a=0;a<_.length;a++)E(a);var L=e.switch_data,T=function(e){cc.loader.loadRes("character/switch",function(n,i){var o=cc.instantiate(i);o.x=L[e].posX,o.y=L[e].posY,o.width=L[e].width,o.height=L[e].height,o.angle=L[e].angle,t.setAnchorPointStay(o,L[e].anchorX,L[e].anchorY),o.getComponent(cc.PhysicsBoxCollider).size.width=L[e].width,o.getComponent(cc.PhysicsBoxCollider).size.height=L[e].height,o.getComponent(cc.PhysicsBoxCollider).apply(),o.type=L[e].type,L[e].type,o.parent=t.level})};for(a=0;a<L.length;a++)T(a);var A=e.block_data,R=function(e){cc.loader.loadRes("character/block",function(n,i){var o=cc.instantiate(i);o.x=A[e].posX,o.y=A[e].posY,o.width=A[e].width,o.height=A[e].height,o.angle=A[e].angle,t.setAnchorPointStay(o,A[e].anchorX,A[e].anchorY),o.getComponent(cc.PhysicsBoxCollider).size.width=A[e].width,o.getComponent(cc.PhysicsBoxCollider).size.height=A[e].height,o.getComponent(cc.PhysicsBoxCollider).density=A[e].density,o.getComponent(cc.PhysicsBoxCollider).apply(),o.parent=t.level})};for(a=0;a<A.length;a++)R(a);var I=e.rope_data,b=function(e){N=I[e].ropeNums,console.log("\u51e0\u4e2a\u5173\u8282",N),cc.loader.loadRes("character/rope"+N,function(n,i){var o=cc.instantiate(i);o.x=I[e].posX,o.y=I[e].posY,o.width=I[e].width,o.height=I[e].height,o.angle=I[e].angle,t.setAnchorPointStay(o,I[e].anchorX,I[e].anchorY),o.type="rope",o.parent=t.level})};for(a=0;a<I.length;a++){var N;b(a)}var M=e.axle_data,B=function(e){cc.loader.loadRes("character/axle",function(n,i){var o=cc.instantiate(i);if(o.x=M[e].posX,o.y=M[e].posY,o.width=M[e].width,o.height=M[e].height,o.angle=M[e].angle,t.setAnchorPointStay(o,M[e].anchorX,M[e].anchorY),"block"==M[e].connectBody.substring(0,5)){for(var a=0;a<t.level.children.length;a++)if("block"==t.level.children[a].name.substring(0,5)){o.getComponent(cc.RevoluteJoint).connectedBody=t.level.children[a].getComponent(cc.RigidBody),o.getComponent(cc.RevoluteJoint).apply();break}}else if("node"==M[e].connectBody.substring(0,4))for(var s=0;s<t.level.children.length;s++)if("rope"==t.level.children[s].name.substring(0,4)){o.getComponent(cc.RevoluteJoint).connectedBody=t.level.children[s].children[0].getComponent(cc.RigidBody),o.getComponent(cc.RevoluteJoint).apply();break}o.parent=t.level})};for(a=0;a<M.length;a++)B(a);var F=e.ball_data;console.log("all\u7684\u6570\u636e",F);var k=function(e){console.log("\u5236\u9020ball"),cc.loader.loadRes("character/ball",function(n,i){var o=cc.instantiate(i);if(o.x=F[e].posX,o.y=F[e].posY,o.width=F[e].width,o.height=F[e].height,o.angle=F[e].angle,t.setAnchorPointStay(o,F[e].anchorX,F[e].anchorY),o.getComponent(cc.PhysicsCircleCollider).density=F[e].density,o.getComponent(cc.PhysicsCircleCollider).radius=F[e].width/2,o.getComponent(cc.RevoluteJoint).apply(),null!=F[e].connectBody&&"node"==F[e].connectBody.substring(0,4))for(var a=0;a<t.level.children.length;a++)if(console.log("\u7403\u7403\u8fde\u7ef3\u5b50"),"rope"==t.level.children[a].name.substring(0,4)){var s=t.level.children[a].children.length;console.log("\u8fde\u4e0a\u4e86",a,s-1),t.level.children[a].children[s-1].getComponent(cc.RevoluteJoint).connectedBody=o.getComponent(cc.RigidBody),t.level.children[a].children[s-1].getComponent(cc.RevoluteJoint).apply();break}o.zIndex=5,o.parent=t.level})};for(a=0;a<F.length;a++)k(a);var D=e.enemy_data,P=function(e){cc.loader.loadRes("character/suffer",function(n,i){var o=cc.instantiate(i);o.x=D[e].posX,o.y=D[e].posY,o.width=D[e].width,o.height=D[e].height,o.angle=D[e].angle,t.setAnchorPointStay(o,D[e].anchorX,D[e].anchorY),o.name="suffer"+e,o.parent=t.level})};for(a=0;a<D.length;a++)P(a);var x=e.role_data,G=function(e){1==x[e].type?cc.loader.loadRes("character/level_role",function(n,i){var o=cc.instantiate(i);o.x=x[e].posX,o.y=x[e].posY,o.width=x[e].width,o.height=x[e].height,o.angle=x[e].angle,o.opacity=0,o.parent=t.level}):2==x[e].type&&cc.loader.loadRes("character/rolegnd",function(n,i){var o=cc.instantiate(i);o.x=x[e].posX,o.y=x[e].posY,o.width=x[e].width,o.height=x[e].height,o.angle=x[e].angle,o.opacity=0,o.parent=t.level})};for(a=0;a<x.length;a++)G(a);var O=e.earth_data,U=function(e){cc.loader.loadRes("character/earth",function(n,i){var o=cc.instantiate(i);o.x=O[e].posX,o.y=O[e].posY,o.width=O[e].width,o.height=O[e].height,o.angle=O[e].angle,t.setAnchorPointStay(o,O[e].anchorX,O[e].anchorY),o.getComponent(cc.PhysicsBoxCollider).size.width=O[e].phyWidth,o.getComponent(cc.PhysicsBoxCollider).size.height=O[e].phyHeight,console.log("\u5237\u65b0\u524d",O[e].posY,O[e].phyHeight),o.getComponent(cc.PhysicsBoxCollider).apply(),console.log("\u5237\u65b0\u540e",O[e].posY,O[e].phyHeight),o.parent=t.level})};for(a=0;a<O.length;a++)U(a);var V=e.crossBall_data,H=function(e){cc.loader.loadRes("character/crossBall",function(n,i){var o=cc.instantiate(i);if(o.x=V[e].posX,o.y=V[e].posY,o.width=V[e].width,o.height=V[e].height,o.angle=V[e].angle,t.setAnchorPointStay(o,V[e].anchorX,V[e].anchorY),o.getComponent(cc.PhysicsCircleCollider).radius=V[e].width/2,o.getComponent(cc.PhysicsCircleCollider).density=V[e].density,o.getComponent(cc.PhysicsCircleCollider).apply(),null!=V[e].connectBody&&"node"==V[e].connectBody.substring(0,4))for(var a=0;a<t.level.children.length;a++)if(console.log("cross\u7403\u7403\u8fde\u7ef3\u5b50"),"rope"==t.level.children[a].name.substring(0,4)){var s=t.level.children[a].children.length;console.log("\u8fde\u4e0a\u4e86",a,s-1),t.level.children[a].children[s-1].getComponent(cc.RevoluteJoint).connectedBody=o.getComponent(cc.RigidBody),t.level.children[a].children[s-1].getComponent(cc.RevoluteJoint).apply();break}o.parent=t.level})};for(a=0;a<V.length;a++)H(a);var W=e.crossBlock_data,q=function(e){cc.loader.loadRes("character/crossBlock",function(n,i){var o=cc.instantiate(i);if(o.x=W[e].posX,o.y=W[e].posY,o.width=W[e].width,o.height=W[e].height,o.angle=W[e].angle,t.setAnchorPointStay(o,W[e].anchorX,W[e].anchorY),o.getComponent(cc.PhysicsBoxCollider).size.width=W[e].width,o.getComponent(cc.PhysicsBoxCollider).size.height=W[e].height,o.getComponent(cc.PhysicsBoxCollider).density=W[e].density,o.getComponent(cc.PhysicsBoxCollider).apply(),null!=W[e].connectBody&&"node"==W[e].connectBody.substring(0,4))for(var a=0;a<t.level.children.length;a++)if(console.log("cross\u5757\u5757\u8fde\u7ef3\u5b50"),"rope"==t.level.children[a].name.substring(0,4)){var s=t.level.children[a].children.length;console.log("\u8fde\u4e0a\u4e86",a,s-1),t.level.children[a].children[s-1].getComponent(cc.RevoluteJoint).connectedBody=o.getComponent(cc.RigidBody),t.level.children[a].children[s-1].getComponent(cc.RevoluteJoint).apply();break}o.parent=t.level})};for(a=0;a<W.length;a++)q(a);cc.systemEvent.emit(i.LEVEL_ELEMENTS_ADDED,this.levelData)},onLoaded:function(e,t){this.inLoading=!1,console.log("onLoaded...",t),this._levelPre=t,this.level=cc.instantiate(this._levelPre),this.level.position=cc.v2(),this.level.name="levelPlay",this.node.addChild(this.level,2),this.generateLevelData(),cc.systemEvent.emit(i.LEVEL_ADDED,this.levelData),this.changeBg();var n=cc.sequence(cc.delayTime(.2),cc.callFunc(function(){this.changeSkins()},this));this.node.runAction(n)},generateLevelData:function(){this.levelData={},this.levelData.levelType=this.levelType,this.levelData.isDebug=this.isDebug,this.levelData.node=this.level},changeSkins:function(){if(window.facade.getComponent("LevelModel").playingLevelConfig)for(var e=this.level.getChildren(),t=(cc.loader.getRes("roles",cc.SpriteAtlas),0);t<e.length;t++)if(null!=e[t].name.match("suffer"))for(var n=window.facade.getComponent("LevelModel").playingLevelConfig.Enemy,i=e[t].getChildren(),o=0;o<i.length;o++)if("blood"!=i[o].name){var a;switch(i[o].getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.TRIMMED,a=n.charAt(n.length-1)%2==0?7:8,i[o].name){case"Rhand_2":i[o].getComponent(cc.Sprite).spriteFrame=this.Rhand_2_spriteFrames[a];break;case"Rhand_1":i[o].getComponent(cc.Sprite).spriteFrame=this.Rhand_1_spriteFrames[a];break;case"Rleg_1":i[o].getComponent(cc.Sprite).spriteFrame=this.Rleg_1_spriteFrames[a];break;case"Rleg_2":i[o].getComponent(cc.Sprite).spriteFrame=this.Rleg_2_spriteFrames[a];break;case"body_2":i[o].getComponent(cc.Sprite).spriteFrame=this.body_2_spriteFrames[a];break;case"body_1":i[o].getComponent(cc.Sprite).spriteFrame=this.body_1_spriteFrames[a];break;case"head":i[o].getComponent(cc.Sprite).spriteFrame=this.head_spriteFrames[a];break;case"Lleg_1":i[o].getComponent(cc.Sprite).spriteFrame=this.Lleg_1_spriteFrames[a];break;case"Lleg_2":i[o].getComponent(cc.Sprite).spriteFrame=this.Lleg_2_spriteFrames[a];break;case"Lhand_2":i[o].getComponent(cc.Sprite).spriteFrame=this.Lhand_2_spriteFrames[a];break;case"Lhand_1":i[o].getComponent(cc.Sprite).spriteFrame=this.Lhand_1_spriteFrames[a]}}else{var s=cc.Color.BLACK;i[o].getComponent(cc.ParticleSystem).startColor=s.fromHEX("#94F8F0"),i[o].getComponent(cc.ParticleSystem).endColor=s.fromHEX("#94F8F0")}else if("level_role"==e[t].name){if("injury"==this.levelType){var c=e[t].getChildByName("blood");s=cc.Color.BLACK;c.getComponent(cc.ParticleSystem).startColor=s.fromHEX("#94F8F0"),c.getComponent(cc.ParticleSystem).endColor=s.fromHEX("#94F8F0"),this.changeRoleSkin2(e[t])}else this.changeRoleSkin1(e[t]);e[t].zIndex=9999,e[t].runAction(cc.fadeIn(.2))}else if(null!=e[t].name.match("vip")){c=e[t].getChildByName("blood"),s=cc.Color.BLACK;c.getComponent(cc.ParticleSystem).startColor=s.fromHEX("#94F8F0"),c.getComponent(cc.ParticleSystem).endColor=s.fromHEX("#94F8F0")}},changeShotSkins:function(){if(window.facade.getComponent("LevelModel").nowLevelConfig)for(var e=this.level.getChildren(),t=cc.loader.getRes("roles",cc.SpriteAtlas),n=0;n<e.length;n++)if(null!=e[n].name.match("suffer"))for(var i=window.facade.getComponent("LevelModel").nowLevelConfig.Enemy,o=e[n].getChildren(),a=0;a<o.length;a++)if("blood"!=o[a].name)o[a].getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.TRIMMED,o[a].getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame(i+"_"+o[a].name);else{var s=cc.Color.BLACK;o[a].getComponent(cc.ParticleSystem).startColor=s.fromHEX("#94F8F0"),o[a].getComponent(cc.ParticleSystem).endColor=s.fromHEX("#94F8F0")}else if("role"==e[n].name){if("injury"==this.levelType){var c=e[n].getChildByName("blood");s=cc.Color.BLACK;c.getComponent(cc.ParticleSystem).startColor=s.fromHEX("#94F8F0"),c.getComponent(cc.ParticleSystem).endColor=s.fromHEX("#94F8F0"),this.changeRoleSkin2(e[n])}else this.changeRoleSkin1(e[n]);e[n].zIndex=9999}else if(null!=e[n].name.match("vip")){c=e[n].getChildByName("blood"),s=cc.Color.BLACK;c.getComponent(cc.ParticleSystem).startColor=s.fromHEX("#94F8F0"),c.getComponent(cc.ParticleSystem).endColor=s.fromHEX("#94F8F0")}},changeRoleSkin1:function(e){var t=window.facade.getComponent("GameModel").characterId;e.getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.TRIMMED,e.getChildByName("handGun").getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.TRIMMED,console.log("\u770b\u770b\u89d2\u8272\u7684ID",t),e.getComponent(cc.Sprite).spriteFrame=this.role_bodyPart_spriteFrames[t-1],e.getChildByName("handGun").getComponent(cc.Sprite).spriteFrame=this.role_gunPart_spriteFrames[t-1]},changeRoleSkin2:function(e){for(var t=window.facade.getComponent("GameModel").characterId,n=cc.loader.getRes("roles",cc.SpriteAtlas),i=e.getChildren(),o=0;o<i.length;o++){var a=i[o];a.getComponent(cc.Sprite)?a.getComponent(cc.Sprite).spriteFrame=n.getSpriteFrame("Role_0"+t+"_"+a.name):a.getChildByName("skin")&&(a.getChildByName("skin").getComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.TRIMMED,a.getChildByName("skin").getComponent(cc.Sprite).spriteFrame=n.getSpriteFrame("Role_0"+t+"_"+a.name)),a.getChildByName("handGun")&&(a.getChildByName("handGun").getComponent(cc.Sprite).spriteFrame=n.getSpriteFrame("MrBullet_Role_AimArm_0"+t))}},changeBg:function(){if(window.facade.getComponent("LevelModel").playingLevelConfig){var e;switch(window.facade.getComponent("LevelModel").playingLevelConfig.BgImage){case"Scene_BG_1":e="Scene_BG_1";break;case"Scene_BG_2":e="Scene_BG_2";break;case"Scene_BG_3":e="Scene_BG_3";break;case"Scene_BG_4":e="Scene_BG_4";break;case"Scene_BG_5":e="Scene_BG_1";break;case"Scene_BG_6":e="Scene_BG_2";break;case"Scene_BG_7":e="Scene_BG_3";break;case"Scene_BG_8":e="Scene_BG_4";break;case"Scene_BG_9":e="Scene_BG_1";break;case"Scene_BG_10":e="Scene_BG_2"}this.bgSkinUrl="m_picture/bg/"+e+".png",this.bg=this.level.getChildByName("bg"),console.log("\u8981\u6539\u80cc\u666f\u56fe\u7684\u540d\u5b57",this.bgSkinUrl),cc.loader.getRes(this.bgSkinUrl,cc.SpriteFrame)?(this.bg.getComponent(cc.Sprite).spriteFrame=cc.loader.getRes(this.bgSkinUrl,cc.SpriteFrame),cc.director.getScene().getChildByName("Canvas").getChildByName("bg").getComponent(cc.Sprite).spriteFrame=cc.loader.getRes(this.bgSkinUrl,cc.SpriteFrame)):cc.loader.loadRes(this.bgSkinUrl,cc.SpriteFrame,this.onSkinLoaded.bind(this))}},onSkinLoaded:function(e,t){this.bg.spriteFrame=cc.loader.getRes(this.bgSkinUrl,cc.SpriteFrame),cc.director.getScene().getChildByName("Canvas").getChildByName("bg").getComponent(cc.Sprite).spriteFrame=cc.loader.getRes(this.bgSkinUrl,cc.SpriteFrame)},changeShotBg:function(){window.facade.getComponent("LevelModel").nowLevelConfig&&(this.bgSkinUrl="scene/"+window.facade.getComponent("LevelModel").nowLevelConfig.BgImage+".jpg",this.bg=this.level.getChildByName("bg"),cc.loader.getRes(this.bgSkinUrl,cc.SpriteFrame)?(this.bg.getComponent(cc.Sprite).spriteFrame=cc.loader.getRes(this.bgSkinUrl,cc.SpriteFrame),cc.director.getScene().getChildByName("Canvas").getChildByName("bg").getComponent(cc.Sprite).spriteFrame=cc.loader.getRes(this.bgSkinUrl,cc.SpriteFrame)):cc.loader.loadRes(this.bgSkinUrl,cc.SpriteFrame,this.onSkinLoaded.bind(this)))},onLevelPassed:function(e){console.log("onLevelPassed...",e),window.facade.getComponent("Facade").levelPassed=!0,setTimeout(this.changeLevel.bind(this),5e3)},onGoNext:function(){window.facade.getComponent("LevelModel").playingLevel++,window.facade.getComponent("Facade").levelPassed=!0,this.level.removeFromParent(),cc.systemEvent.emit(i.GO_LEVEL,window.facade.getComponent("LevelModel").playingLevel)},onGoShotNext:function(){this.level.removeFromParent(),window.facade.getComponent("LevelModel").initShotData()},onReloadLevel:function(){this.level.removeFromParent(),cc.systemEvent.emit(i.GO_LEVEL,window.facade.getComponent("LevelModel").playingLevel)},changeLevel:function(){this.levelId++,this.levelId>10||(this.level.removeFromParent(),this.loadLevel("level_"+this.levelId))}}),cc._RF.pop()},{AdsSingleton:"AdsSingleton",AnalyticsUtilities:"AnalyticsUtilities",ModuleEventEnum:"ModuleEventEnum",Singleton:"Singleton"}],LevelModel:[function(e,t,n){"use strict";cc._RF.push(t,"20c51pvCCRL3LRTgR9OiLfO","LevelModel");var i=e("ModuleEventEnum");e("MathUtils");cc.Class({extends:cc.Component,properties:{},initConfig:function(){this.CLASSIC_ID=1e3,this.VIP_ID=2e3,this.INJURY_ID=3e3,this.GRENADE_ID=4e3,cc.loader.loadRes("config/LevelConfig",cc.JsonAsset,this.loaded.bind(this)),cc.loader.loadRes("config/OneBulletConfig",cc.JsonAsset,this.shotloaded.bind(this)),cc.systemEvent.on(i.WX_SHOW,this.onWxShow.bind(this)),cc.systemEvent.on(i.WX_HIDE,this.onWxHide.bind(this))},shotloaded:function(e,t){for(var n in this.oneShotConfig=t.json,this.oneShotConfigList=[],this.oneShotConfig)this.oneShotConfigList.push(this.oneShotConfig[n])},loaded:function(e,t){for(var n in this.levelConfig=t.json,this.levelType=1,this.levelConfigList=[],this.chaterConfigs={},this.levelConfig)this.levelConfigList.push(this.levelConfig[n]),null==this.chaterConfigs[this.levelConfig[n].Type+"_"+this.levelConfig[n].Chapter]&&(this.chaterConfigs[this.levelConfig[n].Type+"_"+this.levelConfig[n].Chapter]=[]),this.chaterConfigs[this.levelConfig[n].Type+"_"+this.levelConfig[n].Chapter].push(this.levelConfig[n]);this.initData()},setLevelTypeStr:function(e){"vip"==e?(this.levelType=2,this.costEnergy=2):"injury"==e?(this.levelType=3,this.costEnergy=3):"gnd"==e?(this.levelType=4,this.costEnergy=1):(this.levelType=1,this.costEnergy=1),this.costEnergy=1},getChapters:function(){var e={};for(var t in this.chaterConfigs){var n=t.split("_")[0],i=t.split("_")[1];Number(n)==this.levelType&&(e[i]=this.chaterConfigs[t])}return e},onLoad:function(){cc.systemEvent.on(i.GO_LEVEL,this.onGoLevel,this),cc.systemEvent.on(i.LEVEL_PASSED,this.onLevelPassed,this),this.costEnergy=1,this.oneShotLevel=!1,this.initConfig(),cc.systemEvent.on(i.GOT_HTTP_RES,this.httpResDeal.bind(this))},onGotToken:function(){},httpResDeal:function(e){this.localCaChe=e||{},this.formDatas()},formDatas:function(){for(var e in this.localCaCheOnlyThis={},this.classicLevel=Number(this.localCaChe.classicLevel),this.vipLevel=Number(this.localCaChe.vipLevel),this.injuryLevel=Number(this.localCaChe.injuryLevel),this.gndLevel=Number(this.localCaChe.gndLevel),this.vipLevel||(this.vipLevel=1),this.injuryLevel||(this.injuryLevel=1),this.gndLevel||(this.gndLevel=1),this.classicLevel||(this.classicLevel=1),this.levelStars=this.localCaChe.levelStars,this.levelStars||(this.levelStars={}),this.levelStars)("number"==typeof e||Number(e)>0)&&delete this.levelStars[e];for(var e in this.levelVideo=this.localCaChe.levelVideo,this.levelVideo||(this.levelVideo={}),this.levelVideo)("video"==typeof e||Number(e)>0)&&delete this.levelVideo[e];this.localCaCheOnlyThis.vipLevel=this.vipLevel,this.localCaCheOnlyThis.injuryLevel=this.injuryLevel,this.localCaCheOnlyThis.gndLevel=this.gndLevel,this.localCaCheOnlyThis.classicLevel=this.classicLevel,this.localCaCheOnlyThis.levelStars=this.levelStars,this.localCaCheOnlyThis.levelVideo=this.levelVideo},update:function(){this.localCaCheOnlyThis=this.localCaCheOnlyThis||{},this.localCaCheOnlyThis.vipLevel=this.vipLevel,this.localCaCheOnlyThis.injuryLevel=this.injuryLevel,this.localCaCheOnlyThis.gndLevel=this.gndLevel,this.localCaCheOnlyThis.classicLevel=this.classicLevel,this.localCaCheOnlyThis.levelStars=this.levelStars,this.localCaCheOnlyThis.levelVideo=this.levelVideo},readLocalDatas:function(){var e=cc.sys.localStorage.getItem("Shooter_LevelData");console.log("\u8bfb\u53d6\u672c\u5730\u5b58\u50a8\u7684\u5173\u5361\u6570\u636e",e),e?(this.localCaChe=JSON.parse(e),this.formDatas()):(this.localCaChe={},this.localCaChe[facade.selectedLevelType+"Level"]=this[facade.selectedLevelType+"Level"],this.levelStars={},this.levelVideo={})},getUnlockedLevelByType:function(e){return this[e+"Level"]?this[e+"Level"]:1},initData:function(){this.classicLevel||(this.classicLevel=1,this.vipLevel=1,this.injuryLevel=1,this.gndLevel=1),this.lastBullets=1e3,this.readLocalDatas()},initShotData:function(){this.oneShotLevel=!0,this.shotNowLevel=window.facade.getComponent("GameModel").oneShotLevel;var e=window.facade.getComponent("GameModel").oneShotLevelList;0==e.length?this.nowLevelConfig=this.oneShotConfigList[0]:this.nowLevelConfig=this.oneShotConfigList[Number(e[Number(this.shotNowLevel-1)]-1)];var t=this.nowLevelConfig.Type,n=this.nowLevelConfig.Level,o="level_1";1==t?o="level_"+n:2==t&&(o="vip_"+n),this.lastBullets=1,this.bulletFilled=1,this.shotedBullets=0,cc.systemEvent.emit(i.LEVEL_ONE_SHOT_GO,o)},onGoLevel:function(e){this.playingLevel=e,this.shotedBullets=0;var t=1e3;"classic"==facade.selectedLevelType?t=this.CLASSIC_ID:"vip"==facade.selectedLevelType?t=this.VIP_ID:"injury"==facade.selectedLevelType?t=this.INJURY_ID:"gnd"==facade.selectedLevelType&&(t=this.GRENADE_ID),this.playingLevelConfig=this.levelConfig[String(t+e)];var n=this.playingLevelConfig.Bullet.split(":");this.lastBullets=Number(n[0]),this.bulletFilled=Number(n[0]),this.starNeeds=[Number(n[1]),Number(n[2]),Number(n[3])]},getLevelConfig:function(e){var t=1e3;return"classic"==facade.selectedLevelType?t=this.CLASSIC_ID:"vip"==facade.selectedLevelType?t=this.VIP_ID:"injury"==facade.selectedLevelType?t=this.INJURY_ID:"gnd"==facade.selectedLevelType&&(t=this.GRENADE_ID),this.levelConfig[String(t+e)]},getLevelNumByType:function(e){var t=1;switch(e){case"vip":t=2;break;case"injury":t=3;break;case"gnd":t=4;break;default:t=1}for(var n=0,i=0;i<this.levelConfigList.length;i++)this.levelConfigList[i].Type==t&&n++;return n},resetLevel:function(){this.onGoLevel(this.playingLevel)},isLastLevel:function(){return this.playingLevel>=this.getLevelNumByType(this.levelType)},isNewLevel:function(){return this.playingLevel>=this[facade.selectedLevelType+"Level"]},onLevelPassed:function(){if(this.starNeeds){this.hasWon=this.isCurrentLevelWon(),this.playingLevel>=this[facade.selectedLevelType+"Level"]&&this[facade.selectedLevelType+"Level"]++,this.star=0;for(var e=0;e<this.starNeeds.length;e++)if(this.starNeeds[e]>=this.shotedBullets){this.star=3-e;break}this.levelStars||(this.levelStars={}),this.levelStars[facade.selectedLevelType+"_"+this.playingLevel]?this.levelStars[facade.selectedLevelType+"_"+this.playingLevel]<this.star&&(this.levelStars[facade.selectedLevelType+"_"+this.playingLevel]=this.star):this.levelStars[facade.selectedLevelType+"_"+this.playingLevel]=this.star,this.saveData()}},setOverVideo:function(e){this.levelVideo||(this.levelVideo={}),this.levelVideo[facade.selectedLevelType+"_"+e]||(this.levelVideo[facade.selectedLevelType+"_"+e]=e),this.saveData()},force3Star:function(){this.star=3,this.levelStars[facade.selectedLevelType+"_"+this.playingLevel]=3,this.saveData()},onSkip:function(){this.playingLevel<this[facade.selectedLevelType+"Level"]||(this[facade.selectedLevelType+"Level"]++,this.star=0,this.saveData(),cc.systemEvent.emit(i.GO_NEXT))},saveData:function(e){"SkipPage"!=facade.CurrentScene&&(this.localCaChe[facade.selectedLevelType+"Level"]=this[facade.selectedLevelType+"Level"],this.localCaChe.levelStars=this.levelStars,this.localCaChe.levelVideo=this.levelVideo,console.log("\u5199\u5165\u672c\u5730\u5b58\u50a8\u7684\u5173\u5361\u6570\u636e",this.localCaChe),cc.sys.localStorage.setItem("Shooter_LevelData",JSON.stringify(this.localCaChe)))},onWxShow:function(){},onWxHide:function(){facade.FOR_DEVELOP||this.saveData(!0)},isCurrentLevelWon:function(){return!!(this.levelStars[facade.selectedLevelType+"_"+this.playingLevel]&&this.levelStars[facade.selectedLevelType+"_"+this.playingLevel]>=3)},getLevelStar:function(e){return this.levelStars?this.levelStars[e]:0},getLevelVideo:function(e){return this.levelVideo?this.levelVideo[e]:0},getTotalStar:function(){if(!this.levelStars)return 0;var e=0;for(var t in this.levelStars)e+=this.levelStars[t];return e},getStarByLevelType:function(e){if(!this.levelStars)return 0;var t=0;for(var n in this.levelStars)"string"==typeof n&&null!=n.match(e)&&(t+=this.levelStars[n]);return t},shotABullet:function(){this.shotedBullets++,cc.systemEvent.emit(i.BULLET_SHOTED)},useABullet:function(){this.lastBullets--,this.oneShotLevel?this.node.runAction(cc.sequence(cc.delayTime(2),cc.callFunc(this.goToFialure,this))):(this.oneShotLevel=!1,cc.systemEvent.emit(i.BULLET_USED))},goToFialure:function(){cc.systemEvent.emit(i.LEVEL_SHOT_BULLET_USE)}}),cc._RF.pop()},{MathUtils:"MathUtils",ModuleEventEnum:"ModuleEventEnum"}],LevelPanel:[function(e,t,n){"use strict";cc._RF.push(t,"66d725KWAVCgKkmDsoq6jAK","LevelPanel");var i=e("AnalyticsUtilities").AnalyticsUtilities;cc.Class({extends:cc.Component,properties:{chapterPre:cc.Prefab,scrollContent:cc.Node,prograssLabel:cc.Node,listView:cc.ScrollView},onLoad:function(){},start:function(){},init:function(){i.logEvent("\u8fdb\u5165\u9009\u5173\u754c\u9762");var e=Number(window.facade.getComponent("LevelModel").getUnlockedLevelByType(facade.selectedLevelType))-1;e<0&&(e=0);var t=e+"/"+window.facade.getComponent("LevelModel").getLevelNumByType(facade.selectedLevelType);this.prograssLabel.getComponent("TextureLabel").setText(t),this.chapters=window.facade.getComponent("LevelModel").getChapters(),this.scrollContent.removeAllChildren();var n=0;for(var o in console.log("\u7ae0\u8282\u6253\u5370",this.chapters),this.chapters){n++;var a=cc.instantiate(this.chapterPre);a.data=this.chapters[o],this.scrollContent.addChild(a),this.scrollContent.height=n*a.height,this.scrollContent.height}console.log("\u6709\u51e0\u4e2a\u7ae0\u8282",n),this.inited=!0,setTimeout(this.delayScroll.bind(this),100)},delayScroll:function(){this.currentLevel=window.facade.getComponent("LevelModel").getUnlockedLevelByType(facade.selectedLevelType);var e=Math.floor((this.currentLevel-1)/15),t=this.scrollContent.getChildren();t.length<=2||this.listView.scrollToPercentVertical((t.length-e)/t.length)},onClose:function(){cc.director.getScene().getChildByName("Canvas").getComponent("MainUI").hideSelectPanel()},onDisable:function(){this.inited=!1},update:function(e){this.node.active&&!this.inited&&this.init()}}),cc._RF.pop()},{AnalyticsUtilities:"AnalyticsUtilities"}],LevelUI:[function(e,t,n){"use strict";cc._RF.push(t,"ec81c1kuJJHsoRab1n7hnEA","LevelUI");var i=e("ModuleEventEnum"),o=e("AnalyticsUtilities").AnalyticsUtilities,a=e("AdsSingleton"),s=e("Singleton");cc.Class({extends:cc.Component,properties:{bulletsBox:cc.Node,result:cc.Node,skipBtn:cc.Node,retryBtn:cc.Node,skipPanel:cc.Node,cashLabel:cc.Node,backBtn:cc.Node,replayUI:cc.Node,shareBtn:cc.Node,shareVideoNode:cc.Node},onLoad:function(){cc.systemEvent.on(i.BULLET_SHOTED,this.bulletShoted,this),cc.systemEvent.on(i.BULLET_USED,this.bulletUsed,this),cc.systemEvent.on(i.LEVEL_PASSED,this.onLevelPassed,this),cc.systemEvent.on(i.FAILURE_BUY_KILL,this.onFailureKill,this),cc.systemEvent.on(i.GUIDE_CLOSED,this.onGuideClosed,this),cc.systemEvent.on(i.STAR_JUMP_CHANGE,this.getThreeStarOrJumpResult,this)},onEnable:function(){console.log("\u5c42\u7ea7\u5173\u7cfb",cc.find("Canvas")),cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1e4,this.recordTime=0},init:function(){(this.passed=!1,this.failed=!1,this.replayUI.active=!1,console.log("levelUI init..."),window.facade.getComponent("LevelModel").isNewLevel()&&!facade.SAVE_MODE)?this.skipBtn.active=!0:(this.skipBtn.active=!1,window.facade.getComponent("LevelModel").getLevelStar(facade.selectedLevelType+"_"+window.facade.getComponent("LevelModel").playingLevel)<3&&popUp.getComponent("Pop").addPopByName("GetTreeStarView",1,!0,!0,!1));window.facade.getComponent("BannerModel").hideBanner(),window.facade.getComponent("GameModel").levelRetryTouch?window.facade.getComponent("GameModel").levelRetryTouch=!1:window.facade.getComponent("GameModel").loseEnergy(),this.retryBtn.active=!0,this.bulletsBox.active=!0,this.result.active=!1,this.skipPanel.active=!1,this.backBtn.active=!0,this.config=window.facade.getComponent("LevelModel").playingLevelConfig,this.bulletsBox.removeAllChildren(),this.lastBullets=window.facade.getComponent("LevelModel").lastBullets,this.bestScoreLimit=window.facade.getComponent("LevelModel").starNeeds[0];for(var e=0;e<this.lastBullets;e++){var t=new cc.Node;this.bulletsBox.addChild(t),this.lastBullets-e<=this.bestScoreLimit?t.addComponent(cc.Sprite).spriteFrame=cc.loader.getRes("uis",cc.SpriteAtlas).getSpriteFrame("bullet_light"):t.addComponent(cc.Sprite).spriteFrame=cc.loader.getRes("uis",cc.SpriteAtlas).getSpriteFrame("bullet_dark")}window.audio.getComponent("SoundManager").stopAllEffects(),window.audio.getComponent("SoundManager").playEffect("gameInBg",!1,30),this.checkGuide()},onGuideClosed:function(){if("classic"==facade.selectedLevelType){var e=cc.rotateTo(.8,-30),t=cc.rotateTo(.8,0);e.easing(cc.easeSineOut()),t.easing(cc.easeSineIn())}},checkGuide:function(){window.facade.getComponent("LevelModel").playingLevel>1||window.facade.getComponent("LevelModel").isNewLevel()&&popUp.getComponent("Pop").addPopByName("Guide"+facade.selectedLevelType,null,!0,!0)},bulletShoted:function(){var e=this.bulletsBox.getChildren();e.length<=0?window.audio.getComponent("SoundManager").playEffect("empty"):e[e.length-1].removeFromParent()},bulletUsed:function(){if(this.bulletsBox.getChildren().length<=0){if(this.passed)return;this.failure()}},isBulletFlying:function(){for(var e=cc.director.getScene().getChildByName("Canvas").getChildByName("levelPlay").getChildren(),t=0;t<e.length;t++)if(e[t].name.match("bullet"))return!0;return!1},backMain:function(){this.isBulletFlying()&&!this.result.active||(cc.systemEvent.emit(i.BACK_MAIN),o.logEvent("\u5de6\u4e0a\u89d2\u8fd4\u56de\u8fd9\u754c\u9762\u6309\u94ae"))},retryLabelHandler:function(){this.replayUI.active=!0},retry:function(){window.facade.getComponent("LevelModel").resetLevel(),this.result.active=!1,cc.systemEvent.emit(i.RELOAD_LEVEL)},retryCostEnergy:function(){var e=facade.getComponent("LevelModel").costEnergy;facade.getComponent("GameModel").energy<e?cc.systemEvent.emit(i.ENERGY_NEEDED):(facade.getComponent("GameModel").loseEnergy(),window.facade.getComponent("LevelModel").resetLevel(),this.result.active=!1,cc.systemEvent.emit(i.RELOAD_LEVEL))},onFailureKill:function(){this.node.stopAllActions(),this.failure(!0)},failure:function(e){console.log("\u5931\u8d25\u9e1f"),window.tt&&this.stopRecord(),cc.director.getScene().getChildByName("Canvas").getComponent("GameLogic").hasPassed&&!e||this.failed||(window.audio.getComponent("SoundManager").playEffect("lose"),cc.systemEvent.emit(i.FAILURE),window.facade.getComponent("LevelModel").resultLevel=window.facade.getComponent("LevelModel").playingLevel,this.failed=!0,e?this.node.runAction(cc.sequence(cc.delayTime(3),cc.callFunc(this.showResult2,this))):this.showResult(!1))},onLevelPassed:function(e){console.log("\u80dc\u5229\u9e1f"),window.tt&&this.stopRecord(),this.node.stopAllActions(),this.passed=!0,this.skipBtn.active=!1,this.retryBtn.active=!1,this.bulletsBox.active=!1,this.backBtn.active=!1,window.facade.getComponent("LevelModel").resultLevel=window.facade.getComponent("LevelModel").playingLevel,e?this.showResult():this.node.runAction(cc.sequence(cc.delayTime(3),cc.callFunc(this.showResult,this)))},showResult2:function(){this.showResult(!1)},showResult:function(e){this.backBtn.active=!0,cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1,window.facade.getComponent("LevelModel").resultLevel==window.facade.getComponent("LevelModel").playingLevel&&(0!=e&&(e=!0),this.result.active=!0,this.result.getComponent("ResultPanel").init(e))},getThreeStarOrJumpResult:function(e){2!=e&&(this.backBtn.active=!0,cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1,this.result.active=!0,this.result.getComponent("ResultPanel").take3StarGet())},showSkip:function(){this.skipBtn.active=!1,this.retryBtn.active=!1,this.skipPanel.active=!0,this.skipPanel.opacity=0,this.skipPanel.runAction(cc.fadeIn(.2)),this.skipPanel.getComponent("SkipPanel").init()},hideSkip:function(){this.skipBtn.active=!0,this.retryBtn.active=!0,this.skipPanel.active=!1,this.bulletsBox.getChildren().length<=0&&this.retry()},update:function(e){this.align()},align:function(){if(!this.reAligned){var e=this.node.getChildren();if(window.facade.Screenratio&&window.facade.Screenratio<.47){for(var t=0;t<e.length;t++)"resultPanel"!=e[t].name&&"skipPanel"!=e[t].name&&e[t].getComponent(cc.Widget)&&(e[t].getComponent(cc.Widget).top+=50,e[t].getComponent(cc.Widget).updateAlignment());this.reAligned=!0}}},postRequest:function(e,t,n){var i=new XMLHttpRequest;i.onreadystatechange=function(e){if(4==i.readyState&&i.status>=200&&i.status<300){var t=JSON.parse(i.responseText);0!=t.code?n&&n.failure&&n.failure(t.code):n&&n.success&&n.success(t.data)}}.bind(this),i.onerror=function(e){n&&n.failure&&n.failure(e)},i.open("POST",e,!1),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.send(t)},stopRecord:function(){window.tt&&(1==tt.getGameRecorderManager()._recording&&(s.getInstance().isShareRecordVideo=!1,tt.getGameRecorderManager().stop()),this.recordTime=s.getInstance().gameLastTime)},shareBtnClick:function(){window.tt?this.recordTime>3?(s.getInstance().gameMode=this,s.getInstance().doShare("video","doShare")):s.getInstance().setTipLabelAppear("\u5f55\u5c4f\u65f6\u95f4\u4e0d\u8db33\u79d2"):CC_WECHATGAME&&s.getInstance().doShare("video","doShare")},onDisable:function(){window.tt?(a.getInstance().initOneBanner("bottom"),a.getInstance().destroyTableScreen()):a.getInstance().createBannerAds("bottom",60)}}),cc._RF.pop()},{AdsSingleton:"AdsSingleton",AnalyticsUtilities:"AnalyticsUtilities",ModuleEventEnum:"ModuleEventEnum",Singleton:"Singleton"}],Light:[function(e,t,n){"use strict";cc._RF.push(t,"1a4cb7RE4FIYLcW04K1HMy3","Light"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){this.node.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(2,.9),cc.scaleTo(2,1.6)))),this.node.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(1,0),cc.fadeTo(1,80))))},update:function(e){this.node.angle+=200*e}}),cc._RF.pop()},{}],ListViewCtrl:[function(e,t,n){"use strict";cc._RF.push(t,"39954MoSZ1Fb4qgNVX3dBtk","ListViewCtrl"),cc.Class({extends:cc.Component,properties:{itemName:"",spawnCount:0,spacing:0,bufferZone:0,itemAnchor:1,vertical:!0,itemTemplate:cc.Node,scrollView:cc.ScrollView,content:cc.Node},onLoad:function(){this.items=[],this.totalCount=0,this.lastContentPosY=0,this.lastContentPosX=0,this.initialize(),this.content.originY=this.content.y,this.content.originX=this.content.x},initialize:function(){for(var e=0;e<this.spawnCount;++e){var t=null;t=window.pool.has(this.itemName)?window.pool.get(this.itemName):cc.instantiate(this.itemTemplate),this.content.addChild(t),this.vertical?1==this.itemAnchor?t.setPosition(0,-t.height*e-this.spacing*(e+1)):t.setPosition(0,-t.height*(.5+e)-this.spacing*(e+1)):0==this.itemAnchor?t.setPosition((t.width+this.spacing)*e,0):t.setPosition((t.width+this.spacing)*e+(t.width+this.spacing)/2,0),this.items.push(t)}},setList:function(e,t,n){if(this.showData=e,this.custom=n,this.totalCount=this.showData.length,this.vertical){if(this.content.y=this.content.originY,this.content.height=this.totalCount*(this.itemTemplate.height+this.spacing)+this.spacing,this.content.height<this.scrollView.height&&(this.content.height=this.scrollView.height),this.items&&this.items.length>0)for(var i=0;i<this.items.length;i++){var o=this.items[i];this.showData[i]?(o.active=!0,o.getComponent(this.itemName).setItemData(i,i,this.showData[i],this.custom),1==this.itemAnchor?o.setPosition(0,-o.height*i-this.spacing*(i+1)):o.setPosition(0,-o.height*(.5+i)-this.spacing*(i+1)),t&&this.iteamAction(i,o)):o.active=!1}}else if(this.content.x=this.content.originX,this.content.width=this.totalCount*(this.itemTemplate.width+this.spacing)+this.spacing,this.content.width<this.scrollView.width&&(this.content.width=this.scrollView.width),this.items&&this.items.length>0)for(var a=0;a<this.items.length;a++){var s=this.items[a];this.showData[a]?(s.active=!0,s.getComponent(this.itemName).setItemData(a,a,this.showData[a],this.custom),1==this.itemAnchor?s.setPosition((s.width+this.spacing)*a,0):s.setPosition((s.width+this.spacing)*a+(s.width+this.spacing)/2,0)):s.active=!1}},refreshList:function(){this.totalCount=this.showData.length,this.vertical?this.content.height=this.totalCount*(this.itemTemplate.height+this.spacing)+this.spacing:this.content.width=this.totalCount*(this.itemTemplate.width+this.spacing)+this.spacing;for(var e=0;e<this.items.length;e++){var t=this.items[e];if(this.showData[e]){t.active=!0;var n=t.getComponent(this.itemName),i=n.itemID;n.setItemData(e,i,this.showData[i],this.custom)}else t.active=!1}},iteamAction:function(e,t){var n=t;n.opacity=0,n.x=-300;var i=cc.spawn(cc.fadeIn(.2),cc.moveBy(.2,cc.v2(300,0)));n.runAction(cc.sequence(cc.delayTime(.08*e),i,cc.callFunc(function(){n.stopAllActions(),n.x=0,n.opacity=255}.bind(this))))},scrollEvent:function(e,t){4!=t&&9!=t||this.doUpdateList()},getPositionInView:function(e){var t=e.parent.convertToWorldSpaceAR(e.position);return this.scrollView.node.convertToNodeSpaceAR(t)},doUpdateList:function(e){if(this.vertical){var t=this.items;if(0==t.length)return;for(var n=this.bufferZone,i=this.scrollView.content.y<this.lastContentPosY,o=(this.itemTemplate.height+this.spacing)*t.length,a=0;a<t.length;++a){var s=this.getPositionInView(t[a]);if(i){if(s.y<-n&&t[a].y+o<0){t[a].y=t[a].y+o;var c=t[a].getComponent(this.itemName),r=c.itemID-t.length;c.setItemData(a,r,this.showData[r],this.custom)}}else if(s.y>n&&t[a].y-o>-this.content.height){t[a].y=t[a].y-o;var l=t[a].getComponent(this.itemName),h=l.itemID+t.length;l.setItemData(a,h,this.showData[h],this.custom)}}this.lastContentPosY=this.scrollView.content.y}else{var d=this.items;if(0==d.length)return;for(var p=this.bufferZone,u=this.scrollView.content.x<this.lastContentPosX,g=(this.itemTemplate.width+this.spacing)*d.length,m=0;m<d.length;m++){var f=this.getPositionInView(d[m]);if(u){if(f.x<-p&&d[m].x+g<this.scrollView.content.width){d[m].setPositionX(d[m].x+g);var v=d[m].getComponent(this.itemName),C=v.itemID+d.length;v.setItemData(m,C,this.showData[C],this.custom)}}else if(f.x>p&&d[m].x-g>0){d[m].setPositionX(d[m].x-g);var w=d[m].getComponent(this.itemName),S=w.itemID-d.length;w.setItemData(m,S,this.showData[S],this.custom)}}this.lastContentPosX=this.scrollView.content.x}},close:function(){if(window.pool.has(this.itemName))for(var e=0;e<this.items.length;e++){var t=this.items[e];window.pool.put(this.itemName,t)}else window.pool.create(this.itemName,this.spawnCount,cc.instantiate(this.itemTemplate))}}),cc._RF.pop()},{}],MConfig:[function(e,t,n){"use strict";cc._RF.push(t,"bfee8wL3oVIc5xtWAFk4XHB","MConfig");t.exports={Game:{key:"Game",open:!0}},cc._RF.pop()},{}],Magic:[function(e,t,n){"use strict";cc._RF.push(t,"3aaebyd87JH77c8LlcpIrTu","Magic");e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{target:cc.Node},onLoad:function(){},start:function(){},trigger:function(){this.target&&(this.target.active=!0),this.node.removeFromParent()},update:function(e){}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],MainUI:[function(e,t,n){"use strict";cc._RF.push(t,"ac9baAUfTpI0Kjxci4S1aYw","MainUI");var i=e("ModuleEventEnum"),o=e("AnalyticsUtilities").AnalyticsUtilities,a=e("AdsSingleton"),s=e("Singleton");cc.Class({extends:cc.Component,properties:{mainUI:cc.Node,cashLabel:cc.Node,moreGameBtn:cc.Node,bottomBar:cc.Node,buttonClassic:cc.Node,characterShow:cc.Node,soundButton:cc.Node,cashBar:cc.Node,energyBar:cc.Node,titleLogo:cc.Node,recommendBar:cc.Node,totalStar:cc.Node,btnNextGift:cc.Node,btnContent:cc.Node,moreGame:cc.Node},onLoad:function(){cc.systemEvent.on(i.INIT_ROLEINFO_COMPLETED,this.initUI,this),cc.systemEvent.on(i.WX_REGISTERED,this.onGameEntered,this),cc.systemEvent.on(i.FUNCOPEN_UPDATE,this.onFuncOpen.bind(this)),cc.systemEvent.on(i.LEVEL_SELECT,this.onGoLevelSelected,this),cc.systemEvent.on(i.LEVEL_ADDED,this.onGoLevel,this),cc.systemEvent.on(i.LEVEL_ONE_SHOT_ADD,this.onShotGoLevel,this),cc.systemEvent.on(i.BACK_MAIN,this.onBackMain,this),cc.systemEvent.on(i.SAVE_MODE_CHANGE,this.onSaveModeChange,this),this.btnNextGift.active=!1},start:function(){window.facade.isMiniGame=""!=window.net.platformName,facade.isMiniGame&&(window.wx=window[window.net.platformName],wx.hideLoading()),o.logEvent("\u8fdb\u5165\u6e38\u620f\u4e3b\u754c\u9762"),window.audio.getComponent("SoundManager").setBGM("Bgm"),this.moreGameBtn.active=!facade.SAVE_MODE,this.recommendBar.active=!facade.SAVE_MODE,this.soundButton.zIndex=100,this.cashBar.zIndex=100,this.energyBar.zIndex=100,facade.needShowSign&&this.initUI(),s.getInstance().gameType=100},initUI:function(){this.btnNextGift.active=!window.facade.getComponent("GameModel").gotNextReward;var e=facade.getComponent("GameModel").lastFetchSignInTime;(e=null==e?0:Math.floor(e/864e5))<Math.floor(facade.getComponent("GameModel").getLocalTime()/86400/1e3)&&!popUp.getComponent("Pop").getPopByName("BackEnergyView")&&popUp.getComponent("Pop").addPopByName("SignIn",null,!0)},onFuncOpen:function(){facade.getComponent("PlayerModel").isLoginInterOpen()&&facade.getComponent("InterstitialADModel").showFakeInterAD()},onGameEntered:function(){facade.isMiniGame&&window.facade.getComponent("PlayerModel").wxAdaptor.wxGetUserInfo()},onClickEarnRes:function(e,t){popUp.getComponent("Pop").addPopByName("EntranceUI",t,!0)},onClickCollect:function(){window.wx&&popUp.getComponent("Pop").addPopByName("CollectGift",null,!0,!0)},update:function(e){this.totalStar.getComponent("TextureLabel").setText(String(window.facade.getComponent("LevelModel").getTotalStar())),this.cashLabel.getComponent("TextureLabel").setText(String(window.facade.getComponent("GameModel").cash)),this.align(),this.checkAddEnergy(),this.updateCharater(),s.getInstance().gameLastTime+=e},align:function(){if(!this.reAligned){var e=this.node.getChildren();if(window.facade.Screenratio&&window.facade.Screenratio<.47){for(var t=0;t<e.length;t++)e[t].getComponent(cc.Widget)&&(e[t].getComponent(cc.Widget).top+=50,e[t].getComponent(cc.Widget).updateAlignment());this.reAligned=!0}}},checkAddEnergy:function(){facade.SAVE_MODE||window.facade.getComponent("GameModel")._offLineEnergy&&0!=window.facade.getComponent("GameModel")._offLineEnergy&&(popUp.getComponent("Pop").addPopByName("BackEnergyView",window.facade.getComponent("GameModel")._offLineEnergy,!0,!1),window.facade.getComponent("GameModel")._offLineEnergy=0)},updateCharater:function(){facade.getComponent("GameModel").charaterConfig[String(facade.getComponent("GameModel").characterId)]||facade.getComponent("GameModel").onRoleSelected(1);var e=facade.getComponent("GameModel").characterId,t=cc.find("Canvas").getComponent("LevelLoader").role_bodyPart_spriteFrames,n=cc.find("Canvas").getComponent("LevelLoader").role_gunPart_spriteFrames;this.characterShow.getChildByName("role").getComponent(cc.Sprite).spriteFrame=t[e-1],this.characterShow.getChildByName("role").getChildByName("hand").getComponent(cc.Sprite).spriteFrame=n[e-1]},onGoLevelSelected:function(e){if(console.log("\u52a0\u8f7d\u5173\u5361",e),1!=this.inUILoading)if(this.bottomBar.active=!1,this.moreGameBtn.active=!1,this.btnContent.active=this.moreGameBtn.active,this.buttonClassic.active=!1,this.characterShow.active=!1,this.mainUI.active=!0,this.selectPanel)this.selectPanel.active=!0;else{if(this._selectPanelPre=cc.loader.getRes("ui/levelSelects",cc.Prefab),this._selectPanelPre)return this.selectPanel=cc.instantiate(this._selectPanelPre),this.selectPanel.name="selectPanel",this.mainUI.addChild(this.selectPanel),void(this.mainUI.active=!0);this.inUILoading=!0,cc.loader.loadRes("ui/levelSelects",cc.Prefab,this.onSelectLoaded.bind(this))}},onGoLevel:function(){this.selectPanel&&(this.selectPanel.active=!1,this.mainUI.active=!1,this.addLevelUI()),this.recommendBar.zIndex=1e4},onShotGoLevel:function(){this.mainUI.active=!1,this.addShotLevelUI(),this.recommendBar.zIndex=1e3},onSaveModeChange:function(){this.moreGameBtn.active=!facade.SAVE_MODE},onSelectLoaded:function(e,t){this.inUILoading=!1,console.log("onSelectLoaded...",t),this._selectPanelPre=t,this.selectPanel=cc.instantiate(this._selectPanelPre),this.selectPanel.name="selectPanel",this.mainUI.active=!0,this.mainUI.addChild(this.selectPanel)},onGoSkin:function(){if(1!=this.inUILoading){if(this.mainUI.active=!0,this.skinPanel)return this.skinPanel.active=!0,this.bottomBar.active=!1,this.moreGameBtn.active=!1,this.btnContent.active=this.moreGameBtn.active,this.buttonClassic.active=!1,this.characterShow.active=!1,this.titleLogo.stopAllActions(),void this.titleLogo.runAction(cc.fadeOut(.3));if(this._skinPanelPre=cc.loader.getRes("ui/skinSelects",cc.Prefab),this._skinPanelPre)return this.skinPanel=cc.instantiate(this._skinPanelPre),this.skinPanel.name="skinPanel",this.mainUI.addChild(this.skinPanel),this.bottomBar.active=!1,this.moreGameBtn.active=!1,this.btnContent.active=this.moreGameBtn.active,this.buttonClassic.active=!1,this.characterShow.active=!1,this.titleLogo.stopAllActions(),void this.titleLogo.runAction(cc.fadeOut(.3));this.inUILoading=!0,cc.loader.loadRes("ui/skinSelects",cc.Prefab,this.onSkinLoaded.bind(this))}},onSkinLoaded:function(e,t){this.inUILoading=!1,console.log("onSkinLoaded...",t),this._skinPanelPre=t,this.skinPanel=cc.instantiate(this._skinPanelPre),this.skinPanel.name="skinPanel",this.mainUI.active=!0,this.mainUI.addChild(this.skinPanel),this.bottomBar.active=!1,this.moreGameBtn.active=!1,this.btnContent.active=this.moreGameBtn.active,this.buttonClassic.active=!1,this.characterShow.active=!1,this.titleLogo.stopAllActions(),this.titleLogo.runAction(cc.fadeOut(.3))},onClickBanner:function(){var t=e("VirBannerCtrl");facade.getComponent("RewardCPAModel").navigateToGame(t.gameInfo,{success:function(){t.hideVirBanner()},failure:function(e){console.log("\u8df3\u8f6c\u5931\u8d25: ",e)}},!1)},addShotLevelUI:function(){return this.levelShotUI?(this.levelShotUI.active=!0,this.levelShotUI.zIndex=this.node.getChildByName("levelPlay").zIndex+1,void this.levelShotUI.getComponent("OneShotUI").init()):(this.bottomBar.active=!1,this.moreGameBtn.active=!1,this.btnContent.active=this.moreGameBtn.active,this.buttonClassic.active=!1,this.characterShow.active=!1,this._levelShotUIPre=cc.loader.getRes("ui/OneShotUI",cc.Prefab),this._levelShotUIPre?(this.levelShotUI=cc.instantiate(this._levelShotUIPre),this.levelShotUI.name="levelShotUI",this.node.addChild(this.levelShotUI),void(this.levelShotUI.zIndex=this.node.getChildByName("levelPlay").zIndex+1)):void cc.loader.loadRes("ui/OneShotUI",cc.Prefab,this.onLevelShotUILoaded.bind(this)))},onLevelShotUILoaded:function(e,t){console.log("onLevelshotUILoaded..."),this._levelShotUIPre=t,this.levelShotUI=cc.instantiate(this._levelShotUIPre),this.levelShotUI.name="levelShotUI",this.node.addChild(this.levelShotUI),this.levelShotUI.zIndex=this.node.getChildByName("levelPlay").zIndex+1},addLevelUI:function(){return this.levelUI?(this.levelUI.active=!0,this.levelUI.zIndex=this.node.getChildByName("levelPlay").zIndex+1,void this.levelUI.getComponent("LevelUI").init()):(this.bottomBar.active=!1,this.moreGameBtn.active=!1,this.btnContent.active=this.moreGameBtn.active,this.buttonClassic.active=!1,this.characterShow.active=!1,this._levelUIPre=cc.loader.getRes("ui/levelUI",cc.Prefab),this._levelUIPre?(this.levelUI=cc.instantiate(this._levelUIPre),this.levelUI.name="levelUI",this.node.addChild(this.levelUI),this.levelUI.getComponent("LevelUI").init(),void(this.levelUI.zIndex=this.node.getChildByName("levelPlay").zIndex+1)):void cc.loader.loadRes("ui/levelUI",cc.Prefab,this.onLevelUILoaded.bind(this)))},onLevelUILoaded:function(e,t){console.log("onLevelUILoaded..."),this._levelUIPre=t,this.levelUI=cc.instantiate(this._levelUIPre),this.levelUI.name="levelUI",this.node.addChild(this.levelUI),this.levelUI.getComponent("LevelUI").init(),this.levelUI.zIndex=this.node.getChildByName("levelPlay").zIndex+1},onBackMain:function(){this.levelShotUI?this.levelShotUI.active?(this.levelShotUI.active=!1,window.facade.getComponent("LevelModel").oneShotLevel=!1):this.levelUI.active&&(this.levelUI.active=!1):this.levelUI.active=!1,this.node.getChildByName("levelPlay").removeFromParent(),window.facade.getComponent("BannerModel").hideBanner(),this.mainUI.active=!0,this.bottomBar.active=!0,this.moreGameBtn.active=!0,this.moreGameBtn.active=!facade.SAVE_MODE,this.btnContent.active=this.moreGameBtn.active,this.buttonClassic.active=!0,this.characterShow.active=!0,this.titleLogo.stopAllActions(),this.titleLogo.runAction(cc.fadeIn(.3)),window.audio.getComponent("SoundManager").stopAllEffects(),window.audio.getComponent("SoundManager").resumeBGM(),this.recommendBar.zIndex=1},onShowMore:function(){window.popUp.getComponent("Pop").addPopByName("MoreGame",this,!0,!0,!1)},onShowRank:function(){window.popUp.getComponent("Pop").addPopByName("Rank",this,!0,!1,!1)},onShowNext:function(){window.popUp.getComponent("Pop").addPopByName("NextLoginView",null,!0,!0)},hideSelectPanel:function(){this.selectPanel.active=!1,this.bottomBar.active=!0,this.moreGameBtn.active=!0,this.moreGameBtn.active=!facade.SAVE_MODE,this.btnContent.active=this.moreGameBtn.active,this.buttonClassic.active=!0,this.characterShow.active=!0},hideSkinPanel:function(){this.skinPanel.active=!1,this.bottomBar.active=!0,this.moreGameBtn.active=!0,this.moreGameBtn.active=!facade.SAVE_MODE,this.btnContent.active=this.moreGameBtn.active,this.buttonClassic.active=!0,this.characterShow.active=!0,this.titleLogo.stopAllActions(),this.titleLogo.runAction(cc.fadeIn(.3))},onGotLoginInfo:function(){},getFreeCashClick:function(){a.getInstance().showVideoAds("getFreeCash")},getFreeCashFunc:function(){facade.getComponent("GameModel").addCash(100);popUp.getComponent("FloatTip").showTip("\u6210\u529f\u9886\u53d6\u5956\u52b1: \u949e\u7968 x 100")},getFreeEnergyClick:function(){a.getInstance().showVideoAds("getFreeEnergy")},getFreeEnergyFunc:function(){facade.getComponent("GameModel").rewardEnergy(5);popUp.getComponent("FloatTip").showTip("\u6210\u529f\u9886\u53d6\u5956\u52b1: \u80fd\u91cf x 5")},showTip:function(e){popUp.getComponent("FloatTip").showTip(e)}}),cc._RF.pop()},{AdsSingleton:"AdsSingleton",AnalyticsUtilities:"AnalyticsUtilities",ModuleEventEnum:"ModuleEventEnum",Singleton:"Singleton",VirBannerCtrl:"VirBannerCtrl"}],MathUtils:[function(e,t,n){"use strict";cc._RF.push(t,"5e9beSyq19GKaycQ6rdU3W/","MathUtils");var i={getRad:function(e,t){var n=e.x,i=e.y,o=t.x,a=t.y,s=(o-n)/cc.pDistance(e,t),c=Math.acos(s);return a<i&&(c=-c),c},getVectorRadians:function(e,t,n,i){return Math.acos((e*n+t*i)/Math.sqrt(e*e+t*t)*Math.sqrt(n*n+i*i))},pointIsInPolygon:function(e,t){var n,i,o,a;n=e,i={x:-1e4,y:e.y};for(var s=0,c=0;c<t.length-1;c++)o=t[c],a=t[c+1],1==this.checkCross(n,i,o,a)&&s++;return o=t[t.length-1],a=t[0],1==this.checkCross(n,i,o,a)&&s++,s%2!=0},crossMul:function(e,t){return e.x*t.y-e.y*t.x},checkCross:function(e,t,n,i){var o={x:e.x-n.x,y:e.y-n.y},a={x:t.x-n.x,y:t.y-n.y},s={x:i.x-n.x,y:i.y-n.y},c=this.crossMul(o,s)*this.crossMul(a,s);return o={x:n.x-e.x,y:n.y-e.y},a={x:i.x-e.x,y:i.y-e.y},s={x:t.x-e.x,y:t.y-e.y},c<=0&&this.crossMul(o,s)*this.crossMul(a,s)<=0}};t.exports=i,cc._RF.pop()},{}],ModuleEventEnum:[function(e,t,n){"use strict";var i;function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cc._RF.push(t,"8f272fdIARI/6D++v4JtcwP","ModuleEventEnum");var a=(o(i={GO_LOADING:"GO_LOADING",LOADING_END:"LOADING_END",GO_GAME:"GO_GAME",GO_UNIT:"GO_UNIT",SHOW_OPPONENT:"SHOW_OPPONENT",CLOSE_RANK:"CLOSE_RANK",GAME_ENTERD:"GAME_ENTERD",RE_ENTERED:"RE_ENTERED",CHANGE_SCENE:"CHANGE_SCENE",GAMESENE_ENTERED:"GAMESENE_ENTERED",LEVEL_PASSED:"LEVEL_PASSED",LEVEL_SELECT:"LEVEL_SELECT",MORE_GAME:"MORE_GAME",SAVE_MODE_CHANGE:"SAVE_MODE_CHANGE",STAR_JUMP_CHANGE:"STAR_JUMP_CHANGE",PLAYER_NAME_CHANGE:"PLAYER_NAME_CHANGE",PLAYER_RANK_DATA:"PLAYER_RANK_DATA",LEVEL_ONE_SHOT_GO:"LEVEL_ONE_SHOT_GO",LEVEL_ONE_SHOT_ADD:"LEVEL_ONE_SHOT_ADD",LEVEL_SHOT_BULLET_USE:"LEVEL_SHOT_BULLET_USE",LEVEL_SHOT_PASSED:"LEVEL_SHOT_PASSED",GO_SHOT_NEXT:"GO_SHOT_NEXT",SHOT_NOW_OVER_SHOW:"SHOT_NOW_OVER_SHOW",TURN_TABLE_TO_LEVEL:"TURN_TABLE_TO_LEVEL",BACK_TO_APP:"BACK_TO_APP",USER_INFO_ALLOWED:"USER_INFO_ALLOWED",LOGIN_GATE_SUCCESS:"LOGIN_GATE_SUCCESS",RELOGIN_SUCCESS:"RELOGIN_SUCCESS",ADD_NOTICE:"ADD_NOTICE",WX_SHOW:"WX_SHOW",WX_HIDE:"WX_HIDE",ADD_SUBSCRIBE:"ADD_SUBSCRIBE",ASKFOR_LIST:"ASKFOR_LIST",REJECT_ASKFOR:"REJECT_ASKFOR",ACCEPT_ASKFOR:"ACCEPT_ASKFOR",ASKFOR_SEND_SUCC:"ASKFOR_SEND_SUCC",ASKFOR_INFO:"ASKFOR_INFO",OPEN_VIDEO:"OPEN_VIDEO",CONNECTING_HTTP_SERVER:"CONNECTING_HTTP_SERVER",GOT_HTTP_RES:"GOT_HTTP_RES",GOT_SERVER_INFO:"GOT_SERVER_INFO",SERVER_CONNECTED:"SERVER_CONNECTED",NEED_INPUT_ID:"NEED_INPUT_ID",ROLE_INFO_SUCCESS:"ROLE_INFO_SUCCESS",ROLE_ATTRIBUTE_UPDATED:"ROLE_ATTRIBUTE_UPDATED",SERVER_RESPONSE:"SERVER_RESPONSE",SERVER_VERSION:"SERVER_VERSION",POP_ADDED:"POP_ADDED",POP_REMOVED:"POP_REMOVED",POP_FADED:"POP_FADED",RECOMMEND_GAME:"RECOMMEND_GAME"},"MORE_GAME","MORE_GAME"),o(i,"SIGN_IN_SUC","SIGN_IN_SUC"),o(i,"RANK_LIST","RANK_LIST"),o(i,"EFFECT_CHANGE","EFFECT_CHANGE"),o(i,"VOICE_CHANGE","VOICE_CHANGE"),o(i,"TRACK_UNLOCK_CLOSE","TRACK_UNLOCK_CLOSE"),o(i,"SHARE_AD_SUC","SHARE_AD_SUC"),o(i,"COLLECT_GET_REWARD","COLLECT_GET_REWARD"),o(i,"SIGN_CLOSE","SIGN_CLOSE"),o(i,"HOME_RECOMMEND","HOME_RECOMMEND"),o(i,"CAN_FREE_BUY_CAR","CAN_FREE_BUY_CAR"),o(i,"DAILY_SHARE_CLICK","DAILY_SHARE_CLICK"),o(i,"INVITE_FRIEND_CLOCK","INVITE_FRIEND_CLOCK"),o(i,"RESULT_RECOMMEND","RESULT_RECOMMEND"),o(i,"GUIDE_SHOW_BUY","GUIDE_SHOW_BUY"),o(i,"GUIDE_SHOW_COMPOSE","GUIDE_SHOW_COMPOSE"),o(i,"GUIDE_SHOW_MOVETO_TRACK","GUIDE_SHOW_MOVETO_TRACK"),o(i,"GUIDE_SHOW_RECOVER_CAR","GUIDE_SHOW_RECOVER_CAR"),o(i,"GUIDE_SHOW_START","GUIDE_SHOW_START"),o(i,"GUIDE_COMPLETED","GUIDE_COMPLETED"),o(i,"GAMESCENE_START","GAMESCENE_START"),o(i,"PROP_CLOSE","PROP_CLOSE"),o(i,"GET_FUNC_OPEN","GET_FUNC_OPEN"),o(i,"ADVENTURE_UPDATE","ADVENTURE_UPDATE"),o(i,"ADVENTURE_UPDATE_PHY","ADVENTURE_UPDATE_PHY"),o(i,"SCENE_CHANGED","SCENE_CHANGED"),o(i,"PARK_LEFT_CHANGED","PARK_LEFT_CHANGED"),o(i,"ADD_NEW_CAR_TIP","ADD_NEW_CAR_TIP"),o(i,"UPDATE_FULL_TIP","UPDATE_FULL_TIP"),o(i,"UNLOCK_NEW_SCENE","UNLOCK_NEW_SCENE"),o(i,"BACK_MAIN","BACK_MAIN"),o(i,"GO_LEVEL","GO_LEVEL"),o(i,"BULLET_USED","BULLET_USED"),o(i,"BULLET_SHOTED","BULLET_SHOTED"),o(i,"GO_NEXT","GO_NEXT"),o(i,"SKIP","SKIP"),o(i,"FAILURE","FAILURE"),o(i,"FAILURE_BUY_KILL","FAILURE_BUY_KILL"),o(i,"FUNCOPEN_UPDATE","FUNCOPEN_UPDATE"),o(i,"RELOAD_LEVEL","RELOAD_LEVEL"),o(i,"ROLE_SELECTED","ROLE_SELECTED"),o(i,"ENERGY_NEEDED","ENERGY_NEEDED"),o(i,"SKIN_WATCHED","SKIN_WATCHED"),o(i,"CHARACTER_INFO","CHARACTER_INFO"),o(i,"CHARACTER_GOT","CHARACTER_GOT"),o(i,"WX_REGISTERED","WX_REGISTERED"),o(i,"GUIDE_CLOSED","GUIDE_CLOSED"),o(i,"GUIDE_CLEAR","GUIDE_CLEAR"),o(i,"KILLED","KILLED"),o(i,"LEVEL_ADDED","LEVEL_ADDED"),o(i,"LEVEL_ELEMENTS_ADDED","LEVEL_ELEMENTS_ADDED"),o(i,"UPDATE_COLLECT_SHOW","UPDATE_COLLECT_SHOW"),o(i,"INIT_ROLEINFO_COMPLETED","INIT_ROLEINFO_COMPLETED"),o(i,"GAME_OPEN_NEWBIE_INVITE","GAME_OPEN_NEWBIE_INVITE"),o(i,"GAME_OPEN_DAILY_INVITE","GAME_OPEN_DAILY_INVITE"),o(i,"INVITE_UPDATE_DAILY","INVITE_UPDATE_DAILY"),o(i,"UPDATE_HOVER_SHOW","UPDATE_HOVER_SHOW"),o(i,"SHOW_SKIP_PAGE","SHOW_SKIP_PAGE"),o(i,"LOGININFO_GOT","LOGININFO_GOT"),o(i,"CPA_JUMPED","CPA_JUMPED"),i);t.exports=a,cc._RF.pop()},{}],MoreGameItemOne:[function(e,t,n){"use strict";cc._RF.push(t,"bb2c3XLpqlORKbjbwM4wM0X","MoreGameItemOne");var i=e("MoreGameManager"),o=e("AnalyticsUtilities").AnalyticsUtilities;cc.Class({extends:cc.Component,properties:{iconImg:cc.Sprite,nameL:cc.Label,countL:cc.Label,startC:0,endC:0,count:0,pointL:cc.Label,getNode:cc.Node},onLoad:function(){},setupItemData:function(e){if(this.data=e,e&&e.name){this.node.active=!0;var t=e.name;if(void 0!=t&&(this.nameL.string=t),e.icon&&0==e.icon.indexOf("http")){var n=this;cc.loader.load({url:e.icon,type:"png"},function(e,t){n.iconImg&&t&&(n.iconImg.spriteFrame=new cc.SpriteFrame(t))})}}else this.node.active=!1},update:function(){},btnGoGameOnClick:function(e){1==e&&o.logEvent("\u4e3b\u754c\u9762_\u66f4\u591a\u6e38\u620f",{appId:this.data.appId});var t=this.data.appId,n=this.data.extra;t&&i.navigateToMiniProgram(t,n)}}),cc._RF.pop()},{AnalyticsUtilities:"AnalyticsUtilities",MoreGameManager:"MoreGameManager"}],MoreGameManager:[function(e,t,n){"use strict";cc._RF.push(t,"c82565WzYtIY75m/zF8kaT5","MoreGameManager");var i=e("Network"),o=(e("GameConfig"),{requestMoreGameList:function(e){},navigateToMiniProgram:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";wx.getSystemInfo({success:function(n){if(e){var o={appId:"wxf88c93d96e079e42",devModel:n.model,devBrand:n.brand,gameVersion:window.gameVersion,WXVersion:n.version,SDKVersion:n.SDKVersion,system:n.system,benchmarkLevel:n.benchmarkLevel,lan:n.language,tAppId:e,uId:window.facade.getComponent("PlayerModel").userId};wx.navigateToMiniProgram({appId:e,path:t,success:function(){o.result=1,i.postRequest("https://games.qdos.com/open/api/record","p="+JSON.stringify(o),{success:function(e){},failure:function(e){}})},fail:function(e){o.result=2,o.errMsg=e,i.postRequest("https://games.qdos.com/open/api/record","p="+JSON.stringify(o),{success:function(e){},failure:function(e){}})}})}}})},initRecommendItems:function(e){this.requestMoreGameList(function(t){for(var n=0;n<e.length;n++){e[n].getComponent("RecommendGameItem").setupItemData(JSON.parse(JSON.stringify(t[n])))}})},updateRecommendItems:function(e){this.requestMoreGameList(function(t){for(var n=0;n<e.length;n++)for(var i=0;i<t.length;i++){var o=e[n],a=t[i];if(!o.getComponent("RecommendGameItem").isInHistory(a))return void o.getComponent("RecommendGameItem").setupItemData(a)}})},getData:function(){return this._data}});t.exports=o,cc._RF.pop()},{GameConfig:"GameConfig",Network:"Network"}],MoreGame:[function(e,t,n){"use strict";var i;function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cc._RF.push(t,"82792L6lzxNDoW+gsddwrMl","MoreGame");var a=e("MoreGameManager");cc.Class((o(i={extends:cc.Component,properties:{scrollView:cc.Node,itemNode:cc.Node,listNode:cc.Node,bg:cc.Node},initData:function(){var e=this;a.requestMoreGameList(function(t){e.boxList=t,e.showMoreGameList()})},onLoad:function(){this.initData()},onDisable:function(){},onEnable:function(){this.node.active=!0}},"onDisable",function(){this.node.active=!1}),o(i,"showMoreGameList",function(){this.listNode.active=!0;this.node.width;for(var e=0;e<this.boxList.length;e++){var t=cc.instantiate(this.itemNode);t.active=!0,t.getComponent("MoreGameItemOne").setupItemData(this.boxList[e]),this.scrollView.addChild(t)}}),o(i,"closeHandler",function(){this.node.active=!1}),o(i,"openHandler",function(){this.node.active=!this.node.active}),i)),cc._RF.pop()},{MoreGameManager:"MoreGameManager"}],MoveBlock:[function(e,t,n){"use strict";cc._RF.push(t,"3b772fRSC9Inax8SQL1xPqD","MoveBlock"),cc.Class({extends:cc.Component,properties:{vertical:{default:!0},horizontal:{default:!1},moveRangeY:100,moveRangeX:100,speed:.5},onLoad:function(){},start:function(){this.originPos=this.node.position,this.rangePos=this.originPos.clone(),this.vertical?this.rangePos.y+=this.moveRangeY:this.rangePos.x+=this.moveRangeX,this.rangeDis=this.rangePos.sub(this.originPos).mag(),this.normalizeVec=this.rangePos.sub(this.originPos).normalizeSelf(),this.dir=1},update:function(e){var t=this.originPos.sub(this.node.position).mag(),n=this.rangePos.sub(this.node.position).mag();t>this.rangeDis?this.dir=-1:n>this.rangeDis&&(this.dir=1),this.node.x+=this.normalizeVec.x*this.speed*this.dir,this.node.y+=this.normalizeVec.y*this.speed*this.dir}}),cc._RF.pop()},{}],Net:[function(e,t,n){"use strict";cc._RF.push(t,"e2a6923pGVIh5GYR0jcVxsZ","Net");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.init()},start:function(){},init:function(){},fakeLogin:function(){console.log("\u8c03\u7528\u964c\u751f\u4eba"),this.node.getComponent("FakeInfoLogic")||(this.node.addComponent("FakeInfoLogic"),this.node.getComponent("FakeInfoLogic").init()),this.node.getComponent("FakeInfoLogic").fakeLogin()},connect:function(e){this._connector.connect(e)},send:function(e){this._connector.send(e)},close:function(){this.inConnecting=!1,this._connector.close()},onConnected:function(){console.log("server connect..."),this.inError=!1,this.inConnecting=!0,cc.systemEvent.emit(i.SERVER_CONNECTED)},updateServerTime:function(e){this.serverTimeSec=e.currTs,this.serverTimeMs=e.currMs,this.serverLaunchMs=e.runTs,this._timeUpdateFlag=(new Date).getTime(),this._canSendHeart=!0},getServerLaunchMs:function(){var e=(new Date).getTime()-this._timeUpdateFlag;return this.serverLaunchMs+e},getServerTimeSec:function(){var e=(new Date).getTime()-this._timeUpdateFlag;return Math.floor(this.serverTimeSec+e/1e3)},getServerToday0Clock:function(){var e=new Date(1e3*window.net.getComponent("Net").getServerTimeSec());return e.setHours(0,0,0,0),Math.floor(e.getTime()/1e3)},onResponse:function(e){switch(console.log("onResponse:",JSON.stringify(e)),e.messageName=e.GetMessageName(),e.messageName){case"Message_login.GCResHeartMessage":this.updateServerTime(e)}cc.systemEvent.emit(i.SERVER_RESPONSE,e)},sendHeart:function(){if(console.log("sendHeart..."),this._canSendHeart){var e=new Message_login.CGReqHeartMessage;e.ctor(this.getServerLaunchMs()),window.net.getComponent("Net").send(e)}},httpRequest:function(e,t){t.hasOwnProperty("token")&&void 0==t.token||this._httpConnector.request(e,t)},requestQQApi:function(e,t){t||(t={}),t.appid=window.facade.qqAppId,t.openid=window.facade.openId,t.openkey=window.facade.openKey,t.pf=window.facade.pF,t.format="json",this._httpConnector.requestQQApi(e,t)},behaveReport:function(e){this._httpConnector.behaveReport(e)},appLinkReport:function(e){this._httpConnector.appLinkReport(e)},requestUrl:function(e,t,n,i,o){this._httpConnector.requestUrl(e,t,n,i,o)},socketErrorDeal:function(){this.inConnecting=!1,this.inError=!0,this.node.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(this.alertNetError,this)))},alertNetError:function(){"Title"!=window.facade.CurrentScene&&this.inError&&window.popUp.getComponent("Pop").addAlert("\u7f51\u7edc\u597d\u50cf\u51fa\u95ee\u9898\u4e86\u54e6\uff01\u70b9\u201c\u786e\u8ba4\u201d\u91cd\u65b0\u767b\u5f55\u8bd5\u8bd5\u5427~",function(){window.facade.reEnter=!0,window.popUp.getComponent("Pop").reset(),cc.systemEvent.emit(i.RE_ENTERED,!0)},!1)}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],Network1:[function(e,t,n){"use strict";cc._RF.push(t,"ae8ccTMnw5Jo7BCZT8puGT+","Network1");var i={getRequest:function(e,t,n){var i=new XMLHttpRequest;i.onreadystatechange=function(e){if(4==i.readyState&&i.status>=200&&i.status<300){var t=JSON.parse(i.responseText);n.success&&n.success(t)}}.bind(this),i.onerror=function(e){n.failure()&&n.failure(e)},i.open("GET",e,!1),i.send(t)},postRequest:function(e,t,n){var i=new XMLHttpRequest;i.onreadystatechange=function(e){if(4==i.readyState&&i.status>=200&&i.status<300){var t=JSON.parse(i.responseText);0!=t.code?n.failure&&n.failure(t.code):n.success&&n.success(t.data)}}.bind(this),i.onerror=function(e){n.failure()&&n.failure(e)},i.open("POST",e,!1),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.send(t)},saveGameData:function(e){var t=window.Config.RECORD_SAVE;e.value=0==e.value?-1:e.value,e.value=JSON.stringify(e.value);var n="record_type="+e.key+"&record="+e.value;this.postRequest(t,n,{success:function(t){e.suc(t)},failure:function(t){e.fail&&e.fail(t)}})},getGameData:function(e){var t=window.Config.RECORD_GET,n="record_type="+e.key;this.postRequest(t,n,{success:function(t){t.record=JSON.parse(t.record),t.record=-1==t.record?0:t.record,e.suc(t)},failure:function(t){e.fail&&e.fail(t)}})}};t.exports=i,cc._RF.pop()},{}],Network:[function(e,t,n){"use strict";cc._RF.push(t,"5af39uL7I1I8o6u+xkxZo9F","Network");var i={getRequest:function(e,t,n){var i=new XMLHttpRequest;i.onreadystatechange=function(e){if(4==i.readyState&&i.status>=200&&i.status<300){var t=JSON.parse(i.responseText);n.success&&n.success(t)}}.bind(this),i.onerror=function(e){n.failure()&&n.failure(e)},i.open("GET",e,!1),i.send(t)},postRequest:function(e,t,n){var i=new XMLHttpRequest;i.onreadystatechange=function(e){if(4==i.readyState&&i.status>=200&&i.status<300){var t=JSON.parse(i.responseText);0!=t.code?n.failure&&n.failure(t.code):n.success&&n.success(t.data)}}.bind(this),i.onerror=function(e){n.failure()&&n.failure(e)},i.open("POST",e,!1),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.send(t)},saveGameData:function(e){var t=window.Config.RECORD_SAVE;e.value=0==e.value?-1:e.value,e.value=JSON.stringify(e.value);var n="record_type="+e.key+"&record="+e.value;this.postRequest(t,n,{success:function(t){e.suc(t)},failure:function(t){e.fail&&e.fail(t)}})},getGameData:function(e){var t=window.Config.RECORD_GET,n="record_type="+e.key;this.postRequest(t,n,{success:function(t){t.record=JSON.parse(t.record),t.record=-1==t.record?0:t.record,e.suc(t)},failure:function(t){e.fail&&e.fail(t)}})}};t.exports=i,cc._RF.pop()},{}],NewerView:[function(e,t,n){"use strict";cc._RF.push(t,"f4556TLwwdJvJjT6mi4rpWe","NewerView");var i=e("AdsSingleton"),o=e("Singleton");cc.Class({extends:cc.Component,properties:{takeBtn:cc.Node,iconType:cc.Sprite,iconVideoFrame:cc.SpriteFrame,iconShareFrame:cc.SpriteFrame},onLoad:function(){},start:function(){this.rewardType=window.facade.getComponent("ShareADModel").getShareADType(),2!=this.rewardType?(this.iconType.spriteFrame=this.iconVideoFrame,this.type="Video"):(this.iconType.spriteFrame=this.iconShareFrame,this.type="Share")},initData:function(){},doClose:function(){window.facade.getComponent("GameModel").newerRewardCancelCount++,window.facade.getComponent("GameModel").passLevelCount=0},takeAward:function(){o.getInstance().gameMode=this,i.getInstance().showVideoAds("NewerView")},takeAwardSuccess:function(){window.facade.getComponent("GameModel").takeNewerReward(),window.facade.getComponent("GameModel").newerRewardCancelCount--,popUp.getComponent("Pop").removeTop()}}),cc._RF.pop()},{AdsSingleton:"AdsSingleton",Singleton:"Singleton"}],NextLoginView:[function(e,t,n){"use strict";cc._RF.push(t,"1014b8fE5BCo5l10Ujpz+5B","NextLoginView");e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{takeBtn:cc.Node,tipBtn:cc.Node},onLoad:function(){},start:function(){var e=window.facade.getComponent("GameModel").firstLoginTime1,t=window.facade.getComponent("GameModel").gotNextReward;!t&&(new Date).getTime()-e>864e5?(this.takeBtn.active=!0,this.tipBtn.active=!1):(this.takeBtn.active=!1,this.tipBtn.active=!0),t&&(this.takeBtn.active=!1)},initData:function(){},takeAward:function(){window.facade.getComponent("GameModel").takeNextReward(),popUp.getComponent("Pop").removeTop()}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],OneShotUI:[function(e,t,n){"use strict";cc._RF.push(t,"36bbc6FyzdPE6mejvUiTSvD","OneShotUI");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{result:cc.Node,levelLabel:cc.Label,backBtn:cc.Node,cupLabel:cc.Node},onLoad:function(){cc.systemEvent.on(i.BULLET_SHOTED,this.bulletShoted,this),cc.systemEvent.on(i.LEVEL_SHOT_BULLET_USE,this.bulletUsed,this),cc.systemEvent.on(i.LEVEL_SHOT_PASSED,this.onLevelShotPassed,this),cc.systemEvent.on(i.SHOT_NOW_OVER_SHOW,this.levelShotShowTotal,this)},start:function(){this.init(),cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1e3},init:function(){this.passed=!1,this.failed=!1,console.log("levelUI init..."),this.result.active=!1,this.cupLabel.getComponent("TextureLabel").setText(String(window.facade.getComponent("GameModel").cupNumData)),this.levelLabel.string="\u7b2c"+window.facade.getComponent("GameModel").oneShotLevel+"\u5173"},onGuideClosed:function(){if("classic"==facade.selectedLevelType){this.finger=cc.director.getScene().getChildByName("Canvas").getChildByName("levelPlay").getChildByName("finger"),this.finger.active=!0;var e=cc.rotateTo(.8,-30),t=cc.rotateTo(.8,0);e.easing(cc.easeSineOut()),t.easing(cc.easeSineIn()),this.finger.runAction(cc.sequence(cc.repeat(cc.sequence(e,t),3),cc.fadeOut(.5)))}},checkGuide:function(){window.facade.getComponent("LevelModel").playingLevel>1||window.facade.getComponent("LevelModel").isNewLevel()&&popUp.getComponent("Pop").addPopByName("Guide"+facade.selectedLevelType,null,!0,!0)},bulletShoted:function(){window.audio.getComponent("SoundManager").playEffect("empty")},bulletUsed:function(){if(window.facade.getComponent("LevelModel").lastBullets<=0){if(this.passed)return;this.failure()}},isBulletFlying:function(){for(var e=cc.director.getScene().getChildByName("Canvas").getChildByName("levelPlay").getChildren(),t=0;t<e.length;t++)if(e[t].name.match("bullet"))return!0;return!1},backMain:function(){this.isBulletFlying()||cc.systemEvent.emit(i.BACK_MAIN)},retry:function(){window.facade.getComponent("LevelModel").resetLevel(),cc.systemEvent.emit(i.RELOAD_LEVEL)},onFailureKill:function(){this.node.stopAllActions(),this.failure(!0)},failure:function(e){cc.director.getScene().getChildByName("Canvas").getComponent("GameLogic").hasPassed&&!e||this.failed||(20!=window.facade.getComponent("GameModel").oneShotLevel?(cc.systemEvent.emit(i.FAILURE),window.facade.getComponent("LevelModel").resultLevel=window.facade.getComponent("LevelModel").playingLevel,this.failed=!0,this.showResult(!1)):this.levelShotShowTotal())},onLevelShotPassed:function(e){this.node.stopAllActions(),this.passed=!0;popUp.getComponent("FloatTip").showTip("\u6311\u6218\u80dc\u5229")},levelShotShowTotal:function(){this.showResult(!0)},showResult:function(e){this.backBtn.active=!0,cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1,0!=e&&(e=!0),this.result.active=!0,this.result.getComponent("ResultShotOne").init(e)},getThreeStarOrJumpResult:function(e){2!=e&&(this.backBtn.active=!0,cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1,this.result.active=!0,this.result.getComponent("ResultPanel").take3StarGet())},showSkip:function(){this.skipBtn.active=!1,this.retryBtn.active=!1,this.skipPanel.active=!0,this.skipPanel.opacity=0,this.skipPanel.runAction(cc.fadeIn(.2)),this.skipPanel.getComponent("SkipPanel").init()},hideSkip:function(){this.skipBtn.active=!0,this.retryBtn.active=!0,this.skipPanel.active=!1,this.bulletsBox.getChildren().length<=0&&this.retry()},update:function(e){this.align()},align:function(){if(!this.reAligned){var e=this.node.getChildren();if(window.facade.Screenratio&&window.facade.Screenratio<.47){for(var t=0;t<e.length;t++)"resultPanel"!=e[t].name&&"skipPanel"!=e[t].name&&e[t].getComponent(cc.Widget)&&(e[t].getComponent(cc.Widget).top+=50,e[t].getComponent(cc.Widget).updateAlignment());this.reAligned=!0}}}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],Pitcher:[function(e,t,n){"use strict";cc._RF.push(t,"5ff50GxvZVF9Ii7D2BAPZ49","Pitcher");e("MathUtils");cc.Class({extends:cc.Component,properties:{handGun:cc.Node,grenadePre:cc.Prefab,powerLine:cc.Node,powerPoint:cc.Node,grenadeInHand:cc.Node,isInUI:!1,hand:cc.Node},onLoad:function(){this.isInUI||(this.aim=new cc.Node,this.aim.addComponent(cc.Sprite),this.aim.getComponent(cc.Sprite).spriteFrame=cc.loader.getRes("roles",cc.SpriteAtlas).getSpriteFrame("aim"),this.handGun.addChild(this.aim,999),this.aim.active=!1,this.aim.scale=.5,this.aim.y=10)},start:function(){this.node.parent.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.parent.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.parent.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.parent.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this),this.powerPoints=[]},onEnable:function(){this.node.parent.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.parent.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.parent.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.parent.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},onDisable:function(){this.node.parent.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.parent.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.parent.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.parent.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},onDestroy:function(){this.node.parent.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.parent.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.parent.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.parent.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},onTouchStart:function(e){var t=e.getLocation();this._inTouch=!0,this.gunPos=this.handGun.convertToWorldSpaceAR(cc.v2()),this.gunDir=t.sub(this.gunPos);var n=this.gunDir.signAngle(cc.v2(1,0));this.handGun.angle=-n/Math.PI*180,this.powerLine&&(this.powerLine.active=!0)},onTouchMove:function(e){var t=e.getLocation();if(this._inTouch){this.gunPos=this.handGun.convertToWorldSpaceAR(cc.v2()),this.gunDir=t.sub(this.gunPos),this.gunDis=this.gunDir.mag();var n=this.gunDir.signAngle(cc.v2(1,0));this.handGun.angle=-n/Math.PI*180,this.aim&&(this.aim.active=!0,this.aim.x=this.gunDis);for(var i=0;i<this.powerPoints.length;i++)this.powerPoints[i].removeFromParent();this.powerPoints=[];var o=(this.gunDis-150)/30;o>12&&(o=12);for(i=0;i<o;i++){var a=cc.instantiate(this.powerPoint);this.powerLine.addChild(a),this.powerPoints.push(a),a.scale=1+.25*i}}},onTouchEnd:function(e){this.isInUI?this.createAGrenade():(this.aim&&(this.aim.active=!1),window.facade.getComponent("Facade").levelPassed||(facade.getComponent("LevelModel").shotedBullets>=facade.getComponent("LevelModel").bulletFilled?window.audio.getComponent("SoundManager").playEffect("empty"):(this.createAGrenade(),window.facade.getComponent("LevelModel").shotABullet(),this.powerLine&&(this.powerLine.active=!1),this.pitchAction())))},pitchAction:function(){this.grenadeInHand.active=!1;var e=cc.rotateBy(.5,360);e.easing(cc.easeSineOut()),this.handGun.runAction(cc.sequence(e,cc.callFunc(function(){this.grenadeInHand.active=!0},this)))},createAGrenade:function(){var e=cc.instantiate(this.grenadePre);e.position=this.node.parent.convertToNodeSpaceAR(this.hand.convertToWorldSpaceAR(cc.v2()));var t=this.gunDir.normalizeSelf();this.node.parent.addChild(e),e.getComponent(cc.RigidBody).applyForceToCenter(t.mulSelf(300*this.powerPoints.length)),this._inTouch=!1},onTouchCancel:function(e){e.getLocation();this._inTouch=!1,this.handGun.angle=-90,this.powerLine&&(this.powerLine.active=!1),this.aim&&(this.aim.active=!1)},update:function(e){}}),cc._RF.pop()},{MathUtils:"MathUtils"}],PlayerModel:[function(e,t,n){"use strict";cc._RF.push(t,"df6037eLmNDUbR4V2RaPJmY","PlayerModel");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{},initConfig:function(){},onLoad:function(){facade.isMiniGame&&(this.userObject=null,this.rewardTplId=null,this.inviteTypeId=null,this.node.addComponent("WxAdaptor"),this.wxAdaptor=this.node.getComponent("WxAdaptor"),this.wxAdaptor.init(this),cc.systemEvent.on(i.GOT_HTTP_RES,this.httpResDeal.bind(this)),facade.isMiniGame&&(cc.systemEvent.on(i.WX_REGISTERED,this.onGotToken.bind(this)),cc.systemEvent.on(i.INIT_ROLEINFO_COMPLETED,this.onRoleInfo,this)))},onGotToken:function(){var e={game_id:window.facade.GameId,token:this.token};window.net.getComponent("Net").httpRequest(window.net.Setting,e),this.checkFuncOpen()},onRoleInfo:function(){this.wxAdaptor.checkBroadcastReward()},httpResDeal:function(e){if(e&&e.data){var t=e.data;t.extra_config&&t.extra_config.online_version&&this.checkVersion(t.extra_config.online_version),t[0]&&t[0].func_id&&(this.addFuncOpenList(t),window.facade.getFunc=!0)}},checkFuncOpen:function(){var e={};e.game_id=window.facade.GameId,e.token=this.token,window.net.getComponent("Net").httpRequest(window.net.CheckFuncOpen,e)},gotServerData:function(e){this.servers=e,cc.systemEvent.emit(i.GOT_SERVER_INFO)},checkVersion:function(e){this.verisonValue=Number(e),this.verisonValue<facade.VERSION?facade.SAVE_MODE=!0:facade.SAVE_MODE=!1,cc.systemEvent.emit(i.SAVE_MODE_CHANGE)},addNoticeData:function(e){this.noticeImgs=e},addFuncOpenList:function(e){for(var t in console.log("func opens:",e),this.funcList={},this.funcParams={},e)this.funcList[e[t].func_id]=e[t].is_open,this.funcParams[e[t].func_id]=e[t].func_params;cc.systemEvent.emit(i.FUNCOPEN_UPDATE)},isIntersADOpen:function(){return!!this.funcList&&!(!this.funcList[11]||"1"!=this.funcList[11])},isIconRandomOrder:function(e){var t=17;switch(e){case"result":t=15;break;case"interstitial":t=16;break;case"bottom":t=17;break;case"banner":t=18}return!!this.funcList&&!(!this.funcList[t]||"1"!=this.funcList[t])},checkVirBannerShow:function(e){if(!facade.SAVE_MODE){if(!this.funcList||!this.funcList[10]||"1"!=this.funcList[10])return!1;var t=this.funcParams[10].split(",");for(var n in t)if(t[n]===String(facade.uiNames[e]))return!0;return!1}},getRecommondType:function(){return!!this.funcList&&!(!this.funcList[12]||"1"!=this.funcList[12])},getRecommondCount:function(){return this.funcParams&&this.funcParams[12]?Number(this.funcParams[12]):19},getBottomRecommondRandomCount:function(){return this.funcParams&&this.funcParams[17]?Number(this.funcParams[17]):0},getInterstiRecommondRandomCount:function(){return this.funcParams&&this.funcParams[16]?Number(this.funcParams[16]):0},getResultRecommondRandomCount:function(){return this.funcParams&&this.funcParams[15]?Number(this.funcParams[15]):0},getBannerRecommondRandomCount:function(e){if(!this.funcParams||!this.funcParams[18])return 0;null==this.virBannerList&&(this.virBannerList=this.funcParams[18].split(","));var t=[];t=t.concat(e);for(var n=0;n!=this.virBannerList.length;){var i=parseInt(this.virBannerList[n]),o=t.splice(0,i);if(this.checkItem(o),console.log("checklist is : ",o),n++,0!=o.length)return o}return parseInt(this.virBannerList[n-1])},checkItem:function(e){for(var t=0;t!=e.length;)e[t].navout_cnt>0?e.splice(t,1):t++},isClickCountLimit:function(e){if(!this.funcParams)return!1;if(!this.funcParams[14])return!1;for(var t=this.funcParams[14].split(","),n=0;n<t.length;n++)if(t[n]==String(e))return!0;return!1},isLoginInterOpen:function(){if(!this.funcParams)return!1;if(!this.funcParams[13])return!1;for(var e=this.funcParams[13].split(","),t=facade.channel_id+"_"+facade.channel_sub,n=0;n<e.length;n++)if(t==e[n])return!0;return!1},connectGameServer:function(e){0==e&&facade.isMiniGame&&window.facade.VERSION>this.verisonValue&&(e=facade.SERVER_ID_BETA,facade.SAVE_MODE=!0),this.currentServer=this.servers[e],this.serverAddresss=this.servers[e].websocket,window.net.getComponent("Net").connect(this.serverAddresss)},onConnected:function(){if(console.log("onConnected...1"),facade.isMiniGame||window.facade.inQQ){console.log("onConnected...2"),this._adultType=3,this._osType=null==window.facade.PhoneInfo.system.match("iOS")?1:2;var e=String(this.userId);e=this.serverAddresss.match("wss://")?String(this.userId):String(this.privateUid),this.loginGameServer(e)}else this._adultType=3,this._osType=3,cc.systemEvent.emit(i.NEED_INPUT_ID)},loginGameServer:function(e){var t=1,n=this.wxAdaptor.getAdScource();console.log("got adSource:",n),n&&0!=n&&n.chanId&&(n=n.chanId+"_"+n.subCid,this.wxAdaptor.chanId=null);var i=this.currentServer.id;facade.isMiniGame?(t=1,window.net.getComponent("Net").behaveReport(window.facade.BEHAVE_LOGIN)):window.facade.inQQ&&(t=window.facade.PhoneInfo.system.match("iOS")?3:2);var o=new Message_login.CGReqUserLoginMessage;o.ctor(e,t,this._osType,i,n,this._adultType),window.net.getComponent("Net").send(o)},getTargetRoleInfo:function(e){var t=new Message_role.CSReqViewTargetProfileMessage;t.ctor(e),window.net.getComponent("Net").send(t)},recordRoleProfile:function(){if(this.platUserInfo){var e={game_id:window.facade.GameId,token:this.token,wx_data:this.wxAdaptor.wxEncryptedData,wx_iv:this.wxAdaptor.wxIv};window.net.getComponent("Net").httpRequest(window.net.RefreshUserInfo,e)}},parseRoleData:function(e){for(var t=e,n=0;n<e.attrList.length;n++){var i=e.attrList[n];t[window.facade.PlayerAtrriKeys[i.type]]=i.value}for(n=0;n<e.resList.length;n++){i=e.resList[n];t[window.facade.PlayerAtrriKeys["res"+i.type]]=i.value}return t},updateRoleData:function(e){var t={},n=0,o=0;if(this.roleInfo&&(o=this.roleInfo.level),e.resList)for(var a=0;a<e.resList.length;a++){var s=e.resList[a];t[window.facade.PlayerAtrriKeys["res"+s.type]]=s.value}if(e.attrList)for(a=0;a<e.attrList.length;a++){s=e.attrList[a];t[window.facade.PlayerAtrriKeys[s.type]]=s.value}if(this.roleInfo){var c=!1;for(var r in t)this.roleInfo[r]=t[r],"energyLastRev"==r&&!0,"level"==r&&(n=t[r]),"vip"==r&&t[r]>0&&!0,"province"!=r&&"city"!=r||!0,"midAutumnShop"!=r&&"midAutumnRank"!=r||(c=!0);c&&cc.systemEvent.emit(i.TITLE_MIDAUTUMNPOINT),n&&0!=n&&window.facade.getComponent("RankModel").saveScore(n),this.levelChange=this.roleInfo.level-o,cc.systemEvent.emit(i.ROLE_INFO_UPDATED)}}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],Pool:[function(e,t,n){"use strict";cc._RF.push(t,"8c2bdWWTadN7p+agiTMJjf4","Pool");var i=cc.Class({ctor:function(){this._pools={}},create:function(e,t,n){var i=this._pools[e];null==i&&(i=new cc.NodePool,this._pools[e]=i);for(var o=0;o<t;o++)0==o?i.put(n):i.put(cc.instantiate(n))},put:function(e,t){var n=this._pools[e];null==n&&(cc.error("\u540d\u4e3a{0}\u7684\u6c60\u5bf9\u8c61\u4e0d\u5b58\u5728,\u65b0\u521b\u5efa\u4e00\u4e2a".format(e)),n=new cc.NodePool,this._pools[e]=n),n.put(t)},get:function(e){var t=this._pools[e];return null==t?(cc.error("\u540d\u4e3a{0}\u7684\u6c60\u5bf9\u8c61\u4e0d\u5b58\u5728".format(e)),null):0==t.size()?null:t.get()},from:function(e){var t=this._pools[e.name];return null==t||0==t.size()?e.parent?(this.create(e.name,1,cc.instantiate(e)),this.get(e.name)):(this.create(e.name,1,e),this.get(e.name)):this.get(e.name)},has:function(e){return null!=this._pools[e]&&0!=this._pools[e].size()},clear:function(e){var t=this._pools[e];null!=t?(t.clear(),cc.error("\u540d\u4e3a{0}\u7684\u6c60\u5bf9\u8c61\u5df2\u6e05\u7a7a".format(e)),delete this._pools[e]):cc.error("\u540d\u4e3a{0}\u7684\u6c60\u5bf9\u8c61\u4e0d\u5b58\u5728".format(e))},clearAll:function(){for(var e in this._pools)this.clear(e)}});t.exports=new i,cc._RF.pop()},{}],Pop:[function(e,t,n){"use strict";cc._RF.push(t,"bb9875TLphPWriapFTUWXk/","Pop");var i=e("ModuleEventEnum"),o=e("VirBannerCtrl");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.loadedKeys={},this.popList=[],this.modeShowed=!1,this.doAction=!0,cc.loader.loadRes("modeBg",cc.SpriteFrame),this.IN_POOL_POPS={DailyReward:1,DatingEdit:1,LoveSeaLucky:1,VipReward:1,WXRank:1,InfoEdit:1,GoodInfo:1,Alert:1,Claim:1}},reset:function(){this.removeAll(),this.popList=[],this.modeShowed=!1},start:function(){},addAlert:function(e,t,n,i){var o={detailString:e,enterCallBack:t,needCancel:n,animSpeed:i};this.addPopByName("Alert",o,!0,!0)},addGuide:function(e){this.addPopByName("Guide",e,!1,!1)},showCurtainIn:function(){this._curtainType="in",this.curtainDeal()},showCurtainOut:function(e){this._curtainType="out",this._curtainOutFunc=e,this.curtainDeal()},curtainDeal:function(){if(this.changeAniName="spine/zhuanchang",window.facade.deviceLow&&(this.changeAniName="spine_low/zhuanchang_low"),cc.loader.getRes(this.changeAniName,sp.SkeletonData)){var e=cc.loader.getRes(this.changeAniName,sp.SkeletonData);this.curtainResDeal(e)}else cc.loader.loadRes(this.changeAniName,sp.SkeletonData,function(e,t){this.curtainResDeal(t)}.bind(this))},curtianEnded:function(){this.curtainAnimate.getComponent(sp.Skeleton).setCompleteListener(null),"out"==this._curtainType&&this._curtainOutFunc?(this._curtainOutFunc(),this._curtainOutFunc=null):(this.curtainAnimate.removeFromParent(),this.curtainAnimate=null)},curtainResDeal:function(e){if(null==e&&(e=this.curtainRes),this.curtainRes=e,this.curtainAnimate=new cc.Node,this.curtainAnimate.addComponent(sp.Skeleton),this.curtainAnimate.getComponent(sp.Skeleton).skeletonData=e,this.curtainAnimate.getComponent(sp.Skeleton).premultipliedAlpha=!1,cc.director.getScene().getChildByName("Canvas")||cc.director.getScene().runAction(cc.sequence(cc.delayTime(.2),this.curtainResDeal,this)),cc.director.getScene().getChildByName("Canvas").addChild(this.curtainAnimate,1e3),"out"==this._curtainType){var t=cc.find("Canvas");t&&t.pauseSystemEvents(!0),this.curtainAnimate.getComponent(sp.Skeleton).setAnimation(0,"play",!1)}else this.curtainAnimate.getComponent(sp.Skeleton).setAnimation(0,"play2",!1);this.curtainAnimate.getComponent(sp.Skeleton).setCompleteListener(this.curtianEnded.bind(this))},addPopByName:function(e,t,n,i,o,a,s){console.log("addPopByName:",e),this._tempDatas||(this._tempDatas={}),this._tempDatas[e]=null,this.loadingUrls||(this.loadingUrls={});for(var c=0;c<this.popList.length;c++)if(this.popList[c].getName()==e){this._clearOne=this.popList[c],null!=this._clearOne.getComponent(this._clearOne.name).doClose&&this._clearOne.getComponent(this._clearOne.name).doClose(),this.clearPop();break}if(null==i&&(i=!0),this.doAction=0!=o,this.loadedKeys[e]||cc.loader.getRes("pfb/"+e)){var r=cc.loader.getRes("pfb/"+e),l=this.createNew(r,e,t);l.setName(e),this.addPop(l,n,i,a,s)}else this._tempDatas[e]=t,this.showLoading(),this.loadingUrls[e]=!0,cc.loader.loadRes("pfb/"+e,function(t,o){if(this.hideLoading(),this.loadingUrls[e]){delete this.loadingUrls[e];var c=this.createNew(o,e,this._tempDatas[e]);c.setName(e),this.addPop(c,n,i,a,s)}}.bind(this))},showLoading:function(){null==this.loading?(this.loading=new cc.Node,this.loading.addComponent(cc.Sprite),this.loading.getComponent(cc.Sprite).spriteFrame=cc.loader.getRes("modeBg",cc.SpriteFrame),this.loading.scale=100,this.loading.opacity=40,this.loading.addComponent(cc.Button),cc.director.getScene().getChildByName("Canvas").addChild(this.loading,window.facade.PopOrder-1)):this.loading.active=!0},hideLoading:function(){null!=this.loading&&(this.loading.removeFromParent(),this.loading=null),null!=this.loadingAni&&(this.loadingAni.removeFromParent(),this.loadingAni=null)},createNew:function(e,t,n){console.log("createNew:",t);var i=null;return(i=(this.IN_POOL_POPS[t],cc.instantiate(e))).getComponent(t)&&n&&i.getComponent(t).initData(n),i},addPop:function(e,t,n,a,s){if(cc.director.getScene()&&cc.director.getScene().getChildByName("Canvas")){if(t&&this.showMode(n),cc.director.getScene().getChildByName("Canvas").addChild(e,window.facade.PopOrder+this.popList.length+1),this.popList.push(e),console.log("addPop:",e.name,e.zIndex),o.inited||o.init(),this.doAction)this.fadeInPop(e,a,s);else{var c=e.getComponent(e.name);c&&null!=c.viewDidAppear&&c.viewDidAppear(),facade.getComponent("PlayerModel").checkVirBannerShow(e.name)&&(o.curShowName=e.name,o.callData())}cc.systemEvent.emit(i.POP_ADDED)}},fadeInPop:function(e,t,n){if(e.fadeType=t,null==n&&(n=cc.v2(0,0)),"top"==t){e.y=2e3;var i=cc.moveTo(.3,n);return i.easing(cc.easeElasticOut(2)),void e.runAction(i)}if("bottom"==t){e.y=-2e3;var o=cc.moveTo(.3,n);return o.easing(cc.easeElasticOut(2)),void e.runAction(o)}e.scale=.1,e.runAction(cc.sequence(cc.scaleTo(.1,1.1),cc.scaleTo(.1,1),cc.callFunc(this.popFadeIn,this)))},popFadeIn:function(e){var t=e.getComponent(e.name);t&&null!=t.viewDidAppear&&t.viewDidAppear(),facade.getComponent("PlayerModel").checkVirBannerShow(e.name)&&(o.curShowName=e.name,o.callData())},showMode:function(e){if(this.modeShowed&&this.mode&&this.mode.parent)return this.mode.opacity=255,this.mode.zIndex=window.facade.PopOrder+this.popList.length+1,void console.log("addMode:",this.mode.zIndex);this.mode=new cc.Node,this.mode.addComponent(cc.Sprite),this.mode.getComponent(cc.Sprite).spriteFrame=cc.loader.getRes("modeBg",cc.SpriteFrame),this.mode.color="#383838",this.mode.scale=100,this.modeShowed=!0,this.mode.runAction(cc.sequence(cc.delayTime(.21),cc.callFunc(function(){this.mode.addComponent(cc.Button),this.mode.on("click",this.modeClick,this),this.modeClose=e}.bind(this)))),cc.director.getScene().getChildByName("Canvas").addChild(this.mode,window.facade.PopOrder)},removeTop:function(){if(!(null==this.popList||this.popList.length<=0)){var e=this.popList[this.popList.length-1];if(this._clearOne=e,this.doAction){var t=0;if(this._clearOne.getComponent(this._clearOne.name)&&null!=this._clearOne.getComponent(this._clearOne.name).closeActTime&&(t=this._clearOne.getComponent(this._clearOne.name).closeActTime),this._clearOne.getComponent(this._clearOne.name)&&null!=this._clearOne.getComponent(this._clearOne.name).doClose&&this._clearOne.getComponent(this._clearOne.name).doClose(),"top"==e.fadeType)return void e.runAction(cc.sequence(cc.delayTime(t),cc.moveBy(.3,cc.v2(0,2e3)),cc.callFunc(this.clearPop,this)));"bottom"==e.fadeType&&e.runAction(cc.sequence(cc.delayTime(t),cc.moveBy(.3,cc.v2(0,-2e3)),cc.callFunc(this.clearPop,this))),e.runAction(cc.sequence(cc.delayTime(t),cc.scaleTo(.1,1.1),cc.scaleTo(.1,0),cc.callFunc(this.clearPop,this)))}else e.runAction(cc.sequence(cc.delayTime(t),cc.callFunc(this.clearPop,this)))}},clearPop:function(){for(var e=0;e<this.popList.length;e++)if(this.popList[e]==this._clearOne){this.popList.splice(e,1);break}o.virBannerNode&&o.virBannerNode.active&&o.hideVirBanner(),this.modeShowed&&this.mode&&this.mode.parent&&(this.mode.zIndex=window.facade.PopOrder+this.popList.length-1),this.releasePop(this._clearOne),this.popList.length<=0&&this.mode&&(this.mode.removeFromParent(),this.mode=null,this.modeShowed=!1,cc.systemEvent.emit(i.POP_REMOVED),facade.getComponent("BannerModel").hideBanner())},removeByName:function(e){if(!(null==this.popList||this.popList.length<=0)){for(var t=null,n=0;n<this.popList.length;n++)if(this.popList[n].name==e){t=this.popList[n];break}if(t)if(this._clearOne=t,this.doAction){var i=0;if(null!=this._clearOne.getComponent(this._clearOne.name).closeActTime&&(i=this._clearOne.getComponent(this._clearOne.name).closeActTime),null!=this._clearOne.getComponent(this._clearOne.name).doClose&&this._clearOne.getComponent(this._clearOne.name).doClose(),"top"==t.fadeType)return void t.runAction(cc.sequence(cc.delayTime(i),cc.moveBy(.3,cc.v2(0,2e3)),cc.callFunc(this.clearPop,this)));"bottom"==t.fadeType&&t.runAction(cc.sequence(cc.delayTime(i),cc.moveBy(.3,cc.v2(0,-2e3)),cc.callFunc(this.clearPop,this))),t.runAction(cc.sequence(cc.delayTime(i),cc.scaleTo(.1,1.1),cc.scaleTo(.1,0),cc.callFunc(this.clearPop,this)))}else this._clearOne.runAction(cc.sequence(cc.delayTime(i),cc.callFunc(this.clearPop,this)))}},getPopByName:function(e){if(null==this.popList||this.popList.length<=0)return!1;for(var t=null,n=0;n<this.popList.length;n++)if(this.popList[n].name==e){t=this.popList[n];break}return t||null},getTop:function(){return this.popList[this.popList.length-1]},getPopComponent:function(e){if(null==this.popList||this.popList.length<=0)return null;for(var t=null,n=0;n<this.popList.length;n++)if(this.popList[n].name==e){t=this.popList[n];break}return t?t.getComponent(e+"JS"):null},removeAll:function(e){for(var t in this.loadingUrls)t!=e&&delete this.loadingUrls[t];for(var n=0;n<this.popList.length;n++)this.popList[n].name!=e&&(null!=this.popList[n].getComponent(this.popList[n].name).doClose&&this.popList[n].getComponent(this.popList[n].name).doClose(),this.releasePop(this.popList[n]),this.popList.splice(n,1),n--);this.popList.length<=0&&this.mode&&(this.mode.removeFromParent(),this.mode=null,this.modeShowed=!1),cc.systemEvent.emit(i.POP_REMOVED)},releasePop:function(e){this.IN_POOL_POPS[e.name]?window.pool.has(e.name)?window.pool.put(e.name,e):window.pool.create(e.name,1,e):(e.removeFromParent(),e.destroy())},modeClick:function(e){this.modeClose&&this.removeTop()},showGoodTip:function(e,t){var n=function(e){for(var t=null,n=0;n<this.popList.length;n++)if("GoodTips"==this.popList[n].getName()){t=this.popList[n];break}return t}.bind(this);window.popUp.getComponent("Pop").addPopByName("GoodTips",e,!1,!1,!0,"top",t),this.node.runAction(cc.sequence(cc.delayTime(.21),cc.callFunc(function(){var e=n();e&&e.runAction(cc.sequence(cc.delayTime(1.5),cc.callFunc(function(){window.popUp.getComponent("Pop").removeByName("GoodTips")}.bind(this))))}.bind(this))))}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum",VirBannerCtrl:"VirBannerCtrl"}],RankItem:[function(e,t,n){"use strict";cc._RF.push(t,"750a4cPhSxMZYkHDq0Jm6Dl","RankItem"),cc.Class({extends:cc.Component,properties:{rankL:cc.Node,starL:cc.Node,head:cc.Sprite,nameL:cc.Label,rankSF1:cc.SpriteFrame,rankSF2:cc.SpriteFrame,rankSF3:cc.SpriteFrame,rankImgLay:cc.Node,cashLabel:cc.Label},onLoad:function(){this.frameCount=0},start:function(){},initRecommond:function(){},close:function(){},onDisable:function(){},cutNick:function(e){for(var t="",n=0,i=0;i<e.length;i++)if(e.charCodeAt(i)>127||94==e.charCodeAt(i)?n+=2:n++,t+=e[i],n>=5){t+="...";break}return t},setItemData:function(e,t,n,i){if(this.itemID=t,this.nameL.string=this.cutNick(n.nick_name),console.log("rank sign:",n),n.rankNo<4?(this.rankL.active=!1,this.rankImgLay.active=!0,this.rankImgLay.getComponent(cc.Sprite).spriteFrame=this["rankSF"+n.rankNo]):(this.rankImgLay.active=!1,this.rankL.active=!0,this.rankL.getComponent("TextureLabel").setText(String(n.rankNo))),n.avatar&&n.avatar.length>0){this.head.node.active=!1;n.avatar;"/132"==n.avatar.slice(-4)&&(n.avatar=n.avatar.substr(0,n.avatar.length-4),n.avatar+="/46"),this.loadHead(n.avatar),this.head.node.active=!0}else this.head.node.active=!1,this.head.node.parent.active=!1;var o=this.getRankCashNum(n.rankNo);this.cashLabel.string="+"+o,2==i?this.starL.getComponent("TextureLabel").setText(String(n.today_best_score)):this.starL.getComponent("TextureLabel").setText(String(n.best_score))},getRankCashNum:function(e){if(0==e)return 0;for(var t=facade.getComponent("ShareADModel").GameConfig.RankReward.Value.split(","),n=0,i=0;i<t.length;i++){if(e<=t[i].split(":")[0]){n=t[i].split(":")[1];break}}return n},setSelfItem:function(e){var t=e;if(this.nameL.string=this.cutNick(t.nick_name),console.log("rank sign:",t),t.rank_order<4?(this.rankL.active=!1,this.rankImgLay.active=!0,this.rankImgLay.getComponent(cc.Sprite).spriteFrame=this["rankSF"+t.rank_order]):(this.rankImgLay.active=!1,this.rankL.active=!0,this.rankL.getComponent("TextureLabel").setText(String(t.rank_order))),!t.avatar&&t.avatar_url&&(t.avatar=t.avatar_url),t.avatar&&t.avatar.length>0){this.head.node.active=!1;t.avatar;"/132"==t.avatar.slice(-4)&&(t.avatar=t.avatar.substr(0,t.avatar.length-4),t.avatar+="/46"),this.loadHead(t.avatar),this.head.node.active=!0}else this.head.node.active=!1,this.head.node.parent.active=!1;var n=this.getRankCashNum(t.rank_order);this.cashLabel.string="+"+n,t.best_score&&this.starL.getComponent("TextureLabel").setText(String(t.best_score))},loadHead:function(e){textureManager.getComponent("TextureManager").getTextureOneByOne(e,this.head)}}),cc._RF.pop()},{}],RankModel:[function(e,t,n){"use strict";cc._RF.push(t,"5d6b3c7eRZD8YHT+lHpedrA","RankModel");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.systemEvent.on(i.GOT_HTTP_RES,this.httpResDeal.bind(this))},httpResDeal:function(e){var t=e.data;t&&t.nick_name?(this.selfdata=t,cc.systemEvent.emit(i.PLAYER_RANK_DATA,this.selfdata)):t&&t[0]&&t[0].best_score?(this.ranks=t,cc.systemEvent.emit(i.RANK_LIST,this.ranks)):t&&t[0]&&t[0].today_best_score&&(this.ranks=t,cc.systemEvent.emit(i.RANK_LIST,this.ranks))},requestRankList:function(e){var t=1;2==e?t=3:1==e&&(t=1);var n={game_id:window.facade.GameId,token:window.facade.getComponent("PlayerModel").token,rank_type:t,score_type:e,region_id:1,page_count:300,page_num:1};window.net.getComponent("Net").httpRequest(window.net.RankList,n)},requestSelfRank:function(e){var t=1;2==e?t=3:1==e&&(t=1);var n={game_id:window.facade.GameId,token:window.facade.getComponent("PlayerModel").token,rank_type:t,score_type:e};window.net.getComponent("Net").httpRequest(window.net.SelfRankData,n)}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],Rank:[function(e,t,n){"use strict";cc._RF.push(t,"42a6c8+TH1EL705RRFDlmAl","Rank");e("CommonFunc");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{scroll:cc.Node,content:cc.Node,recommendPre:cc.Prefab},onLoad:function(){var e=this;this.frameCount=0;if(facade.isMiniGame){window.facade.getComponent("PlayerModel").wxAdaptor.wxGetUserInfo(),cc.systemEvent.on(i.USER_INFO_ALLOWED,function(){var e=facade.getComponent("PlayerModel").platUserInfo,t={channel:"wx",appId:"wxf88c93d96e079e42",openid:window.facade.getComponent("PlayerModel").userId,nickName:e.nickName,image:e.avatarUrl,score:window.facade.getComponent("LevelModel").getTotalStar()};facade.getComponent("GameModel").postRequest("https://games.qdos.com/game/commit/score","p="+JSON.stringify(t),{success:function(e){console.error(e)}})});var t={appId:"wxf88c93d96e079e42",openid:window.facade.getComponent("PlayerModel").userId};facade.getComponent("GameModel").postRequest("https://games.qdos.com/game/update/rank","p="+JSON.stringify(t),{success:function(t){for(var n=[],i=0;i<t.length;i++)n.push({avatar:t[i].image,nick_name:t[i].nickName,best_score:t[i].score});e.gotRank(n)}})}},onEnable:function(){cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1e4},onDisable:function(){cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1},initData:function(e){window.facade.getComponent("GameModel").setOpenRankfFlag(2)},start:function(){window.facade.getComponent("RankModel").requestRankList(1)},doClose:function(){cc.systemEvent.off(i.RANK_LIST,this.gotRank,this)},gotRank:function(e){for(var t=0;t<e.length;t++)e[t].rankNo=t+1;this.scroll.getComponent("ListViewCtrl").setList(e,!1,null)},close:function(){window.popUp.getComponent("Pop").removeTop()},jumpTadayRank:function(){window.popUp.getComponent("Pop").removeTop(),window.popUp.getComponent("Pop").addPopByName("GunMasterRank",this,!0,!0,!1)},setupList:function(e){}}),cc._RF.pop()},{CommonFunc:"CommonFunc",ModuleEventEnum:"ModuleEventEnum"}],RecommendBar:[function(e,t,n){"use strict";cc._RF.push(t,"d982ekeE49BjakyzAVGjtFd","RecommendBar");var i=e("MoreGameManager");cc.Class({extends:cc.Component,properties:{itemPrefab:cc.Prefab,content:cc.Node},onLoad:function(){this.itemId=1,this.node.opacity=0,this.dir=-1,this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this,!0),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMoved,this,!0),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this,!0),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancelled,this,!0)},start:function(){this.delayRequest()},delayRequest:function(){var e=this;i.requestMoreGameList(function(t){e.showRecommendGameList(t)})},showRecommendGameList:function(e){if(this.node.opacity=255,this.node.active=!0,this.content.x=0,this.content.removeAllChildren(),e&&!(e.length<=5)){this.datas=e;for(var t=[],n=8,i=0;i<n;i++){var o=this.itemId-5+i;o<0?o=this.datas.length+o:o>=this.datas.length&&(o-=this.datas.length),t[i]=this.datas[o]}n=Math.min(t.length,n);for(i=0;i<n;i++){var a=cc.instantiate(this.itemPrefab);a.data=i,a.getComponent("RecommendGameItem").setupItemData(t[i]),a.x=134*i-400,this.content.addChild(a)}this.updateContent()}},updateContent:function(){this.content.width=134*this.content.getChildren().length},insertToRight:function(e){var t=this.content.getChildren(),n=t[t.length-1],i=n.data+1;i>this.datas.length-1&&(i=0),e.data=i,e.getComponent("RecommendGameItem").setupItemData(this.datas[i]),e.x=n.x+134},insertToLeft:function(e){var t=this.content.getChildren()[0],n=t.data-1;n<0&&(n=this.datas.length-1),e.data=n,e.getComponent("RecommendGameItem").setupItemData(this.datas[n]),e.x=t.x-134},autoRoll:function(){this.deltaMove=cc.v2(this.dir,0),this.content.x+=this.deltaMove.x},_onTouchBegan:function(e,t){var n=e.touch;this._startTouch=n.getLocation().clone(),this._startContentX=this.content.x},_onTouchMoved:function(e,t){var n=e.touch;this.deltaMove=n.getLocation().sub(n.getStartLocation()),this._touchMoved?this.content.x=this._startContentX+this.deltaMove.x:this.deltaMove.mag()>7&&(this.content.x=this._startContentX+this.deltaMove.x,this._touchMoved=!0),this.rollType||(this.content.x>=(this.content.width-this.node.width)/2-60&&(this.content.x=(this.content.width-this.node.width)/2-60),this.content.x<=-(this.content.width-this.node.width)/2+60&&(this.content.x=-(this.content.width-this.node.width)/2+60))},_onTouchEnded:function(e,t){e.touch;this._touchMoved&&e.stopPropagation(),this._touchMoved&&(this._touchMoved=!1)},_onTouchCancelled:function(e,t){this._touchMoved=!1},update:function(e){1==this.rollType?(this.dir=-1,this.rollOneSide()):this.rollReverse()},rollReverse:function(){this._touchMoved||(-1==this.dir?this.content.x--:this.content.x++,this.content.x>=(this.content.width-this.node.width)/2-60&&(this.dir=-1),this.content.x<=-(this.content.width-this.node.width)/2+60&&(this.dir=1),this.autoRoll())},rollOneSide:function(){this._touchMoved||this.autoRoll();for(var e=this.content.getChildren(),t=0;t<e.length;t++){var n=e[t],i=n.convertToWorldSpaceAR(cc.v2(100,0));if(i.x<0&&this.deltaMove.x<0){this.insertToRight(n),this.dir=-1;break}if(i.x>840&&this.deltaMove.x>0){this.insertToLeft(n),this.dir=1;break}}e.sort(function(e,t){return e.x<t.x?-1:1})}}),cc._RF.pop()},{MoreGameManager:"MoreGameManager"}],RecommendGameItem:[function(e,t,n){"use strict";cc._RF.push(t,"c49d74J+qxC15K1IfwvNU5U","RecommendGameItem");var i=e("MoreGameManager");cc.Class({extends:cc.Component,properties:{iconImg:cc.Sprite,name1:cc.Label,itemID:0,startC:0,endC:0,count:0,pointImg:cc.Node,effcount:0,effStartC:0,effEndC:0,effImg:cc.Sprite},update:function(){if(this.frameCount||(this.frameCount=0),this.frameCount++,this.frameCount%5==0){if(this.endC>this.startC){var e=this;if((n=parseInt(this.count)+parseInt(this.startC))<=this.endC){var t=this.data.animUrl+n.toString()+"."+this.type;cc.loader.load({url:t,type:"png"},function(t,n){e.iconImg&&n&&(e.iconImg.spriteFrame=new cc.SpriteFrame(n))}),this.count++}else this.count=1}if(this.effEndC>this.effStartC){var n;e=this;if((n=parseInt(this.effcount)+parseInt(this.startC))<=this.effEndC){t=this.data.effectUrl+n.toString()+"."+this.effType;cc.loader.load({url:t,type:"png"},function(t,n){e.effImg&&n&&(e.effImg.spriteFrame=new cc.SpriteFrame(n),e.effNode.width=120,e.effNode.height=120)}),this.effcount++}else this.effcount=1}}},setupItemData:function(e){if(e&&e.name){this.node.active=!0,this._historyDataArr||(this._historyDataArr=[]),this._historyDataArr.push(e),this._historyDataArr.length>=i.getData().length&&(this._historyDataArr=[]),this.type,this.data=JSON.parse(JSON.stringify(e)),this.appId=this.data.appId,this.path=this.data.extra;var t=this;if(""!=e.icon&&e.icon&&0==e.icon.indexOf("http")&&(cc.loader.load({url:e.icon,type:"png"},function(e,n){t.iconImg&&n&&(t.iconImg.spriteFrame=new cc.SpriteFrame(n))}),this.startC=this.endC=0),e.name&&this.name1&&(this.name1.string=e.name),e.animation&&""!=e.animation){var n=e.animation.split(",");n.length>=4&&(this.data.animUrl=n[0],this.startC=n[1],this.endC=n[2],this.type=n[3])}if(e.effect&&""!=e.effect){this.effNode||(this.effNode=new cc.Node,this.effImg=this.effNode.addComponent(cc.Sprite),this.effNode.parent=this.node);var o=e.effect.split(",");o.length>=4&&(this.data.effectUrl=o[0],this.effStartC=parseInt(o[1]),this.effEndC=parseInt(o[2]),this.effType=o[3])}else this.effNode&&(this.effNode.destroy(),this.effNode.parent=null,this.effNode=null,this.data.effectUrl=null,this.effStartC=0,this.effEndC=0,this.effType=null)}else this.node.active=!1},isInHistory:function(e){for(var t=0;t<this._historyDataArr.length;t++)if(e.icon==this._historyDataArr[t].icon)return!0;return!1},btnGoGameOnClick:function(){i.navigateToMiniProgram(this.appId,this.path)}}),cc._RF.pop()},{MoreGameManager:"MoreGameManager"}],RecommendGameJS:[function(e,t,n){"use strict";cc._RF.push(t,"fe845VTH15D8L7ukyhSIK5a","RecommendGameJS"),cc.Class({extends:cc.Component,properties:{itemNode:cc.Node,scrollView:cc.Node,itemNodes:[]},onDisable:function(){console.log("recommend onDisable"),cc.systemEvent.off(ME.RECOMMEND_GAME),this.scrollView.getComponent("ListViewCtrl").close()},onEnable:function(){console.log(""),this.scrollView.getComponent("ListViewCtrl").initialize()},onLoad:function(){},requestRecommend:function(){facade.isMiniGame&&(window.facade.SAVE_MODE||(cc.systemEvent.on(ME.RECOMMEND_GAME,this.showRecommendGameList.bind(this)),window.facade.getComponent("RecommendGameModel").requestRecommendGame()))},showRecommendGameList:function(e){this.node.active=!0;var t=e;this.scrollView.getComponent("ListViewCtrl").setList(t,!1,null)},btnToMoreGameOnClick:function(){window.popUp.getComponent("Pop").addPopByName("MoreGame",this,!0,!0,!1)}}),cc._RF.pop()},{}],RecommendGameModel:[function(e,t,n){"use strict";cc._RF.push(t,"8958dDzzrVOUJhC+RnPzxBX","RecommendGameModel");var i=e("Network");cc.Class({extends:cc.Component,properties:{recommendList:[]},uploadNavigateOut:function(e,t,n){var i={game_id:window.facade.GameId,to_game_id:t,final_to_game_id:n,token:window.facade.getComponent("PlayerModel").token};window.net.getComponent("Net").httpRequest(window.net.NavigateOut,i),1==e?this.requestHomeRecommend():(this.requestRecommendGame(),this.requestHomeRecommend())},showRecommendGameList:function(e){this.node.opacity=255,this.node.active=!0,this.content.x=0,this.content.removeAllChildren();for(var t=0;t<e.length;t++){var n=null;(n=cc.instantiate(this.itemPrefab)).x=134*t+67,n.active=!0,n.getComponent("RecommendGameItem").setupItemData(e[t]),this.content.addChild(n)}this.content.width=134*e.length,this.content.width<=this.node.width-40?this.isOpen=!1:(this.isOpen=!0,this.isLeft=!0)},requestHomeRecommend:function(){var e=this,t=window.facade.httpServerAdress+window.net.RecommendGame,n={game_id:window.facade.GameId,token:window.facade.getComponent("PlayerModel").token};i.postRequest(t,n,{success:function(t){var n=facade.getComponent("PlayerModel").getRecommondCount(),i=e.setupRecommendList(t.recommend_info,n,3,[]);cc.systemEvent.emit(ME.HOME_RECOMMEND,i)},failure:function(e){}})},requestResultRecommend:function(){var e=this,t=window.facade.httpServerAdress+window.net.RecommendGame,n={game_id:window.facade.GameId,token:window.facade.getComponent("PlayerModel").token};i.postRequest(t,n,{success:function(t){var n=e.setupRecommendList(t.recommend_info,50,5,[]);cc.systemEvent.emit(ME.RESULT_RECOMMEND,n)},failure:function(e){}})},requestRecommendGame:function(){var e=this,t=window.facade.httpServerAdress+window.net.RecommendGame,n={game_id:window.facade.GameId,token:window.facade.getComponent("PlayerModel").token};i.postRequest(t,n,{success:function(t){var n=e.setupRecommendList(t.recommend_info,4,4,[]);cc.systemEvent.emit(ME.RECOMMEND_GAME,n)},failure:function(e){}})},setupRecommendList:function(e,t,n,i){for(var o=[],a=0;a<e.length;a++){var s=e[a];parseInt(s.group)==n&&o.push(s)}o=o.sort(function(e,t){return parseInt(e.weight)<parseInt(t.weight)?1:parseInt(e.weight)>parseInt(t.weight)?-1:0});for(var c=[],r=[],l=0;l<o.length;l++){var h=o[l];parseInt(h.navout_cnt)<=0?c.push(h):r.push(h)}var d=[];d=o.length<=t?o:c.length>t?c.slice(0,t):c.length<t?c.concat(r.slice(0,t-c.length)):c;for(var p=0;p<d.length;p++){var u=d[p];d[p].status=2;for(var g=0;g<i.length;g++){var m=i[g];u.game_id==m&&(d[p].status=1)}}return this.recommendList=d,console.log("this.recommendList3 =",d),d}}),cc._RF.pop()},{Network:"Network"}],RecommendPage:[function(e,t,n){"use strict";cc._RF.push(t,"85d0620yYpEzZzY/Nko2iiA","RecommendPage");var i=e("MoreGameManager");cc.Class({extends:cc.Component,properties:{itemPrefab:cc.Prefab,content:cc.Node,gameRun:cc.Node},show:function(){this.content.y=0,this.node.active=!0},onEnable:function(){this.initData()},initData:function(){var e=this;i.requestMoreGameList(function(t){e.showRecommendGameList(t)})},showRecommendGameList:function(e){if(this.content.removeAllChildren(),e&&0!=e.length){for(var t=0;t<e.length;t++){var n=cc.instantiate(this.itemPrefab),i=JSON.parse(JSON.stringify(e[t]));i.icon=i.previewUrl,n.getComponent("RecommendGameItem").setupItemData(i),this.content.addChild(n)}this.content.height=252*e.length/2}},start:function(){},scrollEvent:function(e,t){},close:function(){this.node.active=!1}}),cc._RF.pop()},{MoreGameManager:"MoreGameManager"}],ReplayUI:[function(e,t,n){"use strict";cc._RF.push(t,"58860leim1IgZIZt6A7ycS0","ReplayUI");e("ModuleEventEnum");var i=e("AnalyticsUtilities").AnalyticsUtilities,o=e("AdsSingleton");e("Singleton");cc.Class({extends:cc.Component,properties:{retryCostEnergyLabel:cc.Label},onLoad:function(){},onEnable:function(){this.retryCostEnergyLabel.active=!1;var e=this;setTimeout(function(){e.retryCostEnergyLabel.active=!0},2e3);facade.getComponent("LevelModel").costEnergy;this.retryCostEnergyLabel.string="\u6d88\u80171\u4f53\u529b\u91cd\u73a9",i.logEvent("\u8fdb\u5165\u4f53\u529b\u4e0d\u8db3\u754c\u9762"),o.getInstance().stopRepeatBanner(),o.getInstance().showBannerAds()},onDisable:function(){window.tt?(o.getInstance().initOneBanner("bottom"),o.getInstance().destroyTableScreen()):o.getInstance().createBannerAds("bottom",60)},doClose:function(){this.node.active=!1}}),cc._RF.pop()},{AdsSingleton:"AdsSingleton",AnalyticsUtilities:"AnalyticsUtilities",ModuleEventEnum:"ModuleEventEnum",Singleton:"Singleton"}],ResultPanel:[function(e,t,n){"use strict";cc._RF.push(t,"1b5573J1MtI/6DtEPwZCR7w","ResultPanel");var i=e("ModuleEventEnum"),o=e("AnalyticsUtilities").AnalyticsUtilities,a=e("AdsSingleton"),s=e("Singleton");cc.Class({extends:cc.Component,properties:{star1:cc.Node,star2:cc.Node,star3:cc.Node,reward:cc.Node,linkBox:cc.Node,linkItemPre:cc.Prefab,failNode:cc.Node,passNode:cc.Node,goNextBtn:cc.Node,restartBtn:cc.Node,restartLabel:cc.Node,retryCostEnergy:cc.Node,skipBtn:cc.Node,upBtn:cc.Node,doubleBtn:cc.Node,replayPanel:cc.Node,recommendPage:cc.Node,shareBtn:cc.Node,shareVideoNode:cc.Node,resultLabel:cc.Node,result3LabelSkin:cc.SpriteFrame,result2LabelSkin:cc.SpriteFrame,result1LabelSkin:cc.SpriteFrame,resultPassLabelSkin:cc.SpriteFrame,btnVideoSkin:cc.SpriteFrame,btnShareSkin:cc.SpriteFrame,bigVideoSkin:cc.SpriteFrame,bigShareSkin:cc.SpriteFrame,iconVideoSkin:cc.SpriteFrame,iconShareSkin:cc.SpriteFrame,btnNextSkin:cc.SpriteFrame,bigNextSkin:cc.SpriteFrame,btnRetrySkin:cc.SpriteFrame,bigRetrySkin:cc.SpriteFrame},onLoad:function(){},start:function(){window.facade.Screenratio&&window.facade.Screenratio<.47?this.skipBtn.parent.getComponent(cc.Widget).bottom=200:this.skipBtn.parent.getComponent(cc.Widget).bottom=10,this.skipBtn.parent.getComponent(cc.Widget).updateAlignment()},onEnable:function(){window.audio.getComponent("SoundManager").stopAllEffects(),this.losePlayed=!1,this.replayPanel.active=!1,this.shareBtn.active=!0,this.shareVideoNode.active=!1,this.shareVideoNode.opacity=0;var e=cc.sequence(cc.delayTime(2),cc.callFunc(function(){this.node.parent.getComponent("LevelUI").recordTime>3?10*Math.random()>5?(this.shareVideoNode.active=!0,this.shareVideoNode.runAction(cc.fadeIn(.4))):a.getInstance().createTableScreen():a.getInstance().createTableScreen()},this));this.node.runAction(e),console.log("\u7ed3\u679c\u9875\u9762")},onDisable:function(){this.losePlayed=!1,this.replayPanel.active=!1},init:function(e){this.passNode.active=!1,this.failNode.active=!1,this.goNextBtn.parent.active=!1,this.rewardCash=0,this._passed=e,cc.systemEvent.on(i.RESULT_RECOMMEND,this.gotLinks,this),this.goNextBtn.getComponent(cc.Button).interactable=!0,this.restartBtn.getComponent(cc.Button).interactable=!0,this.restartLabel.getComponent(cc.Button).interactable=!0,this.retryCostEnergy.getComponent(cc.Button).interactable=!0,this.skipBtn.getComponent(cc.Button).interactable=!0,this.upBtn.getComponent(cc.Button).interactable=!0,this.doubleBtn.getComponent(cc.Button).interactable=!0,this.restartBtn.getComponent(cc.Widget).isAlignHorizontalCenter=!1,this.updateRewardType(),this.initResult(),this.initLinks(),o.logEvent("\u8fdb\u5165\u7ed3\u7b97\u754c\u9762")},updateRewardType:function(){this.rewardType=window.facade.getComponent("ShareADModel").getShareADType(),2!=this.rewardType?(this.skipBtn.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=this.iconVideoSkin,this.upBtn.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=this.iconVideoSkin,this.doubleBtn.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=this.iconVideoSkin,this.restartBtn.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=this.iconVideoSkin,this.type="Video"):(this.skipBtn.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=this.iconShareSkin,this.upBtn.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=this.iconShareSkin,this.doubleBtn.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=this.iconShareSkin,this.restartBtn.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=this.iconShareSkin,this.type="Share")},initResult:function(){this.passNode.active=!0,this.failNode.active=!1,this.resultLabel.active=!1,this._passed?(o.logEvent("\u8fdb\u5165\u95ef\u5173\u6210\u529f\u754c\u9762: "+window.facade.getComponent("LevelModel").playingLevel),this.reward.getComponent("TextureLabel").setText("0"),this.star1.getChildByName("light").active=!1,this.star2.getChildByName("light").active=!1,this.star3.getChildByName("light").active=!1,this.reward.parent.opacity=0,this.node.runAction(cc.sequence(cc.delayTime(.03),cc.callFunc(this.showResult,this)))):this.initFailed()},initFailed:function(){this.losePlayed||(window.audio.getComponent("SoundManager").playEffect("lose"),this.losePlayed=!0),o.logEvent("\u8fdb\u5165\u95ef\u5173\u5931\u8d25\u754c\u9762: "+window.facade.getComponent("LevelModel").playingLevel),this.passNode.active=!1,this.failNode.active=!0,this.goNextBtn.active=!1,this.restartLabel.active=!1,this.upBtn.active=!1,this.doubleBtn.active=!1,this.restartBtn.active=!0,this.skipBtn.active=!0;var e=this;e.retryCostEnergy.active=!1,setTimeout(function(){e.retryCostEnergy.active=!0},2e3);facade.getComponent("LevelModel").costEnergy;this.retryCostEnergy.active=!0,this.retryCostEnergy.getComponent(cc.Label).string="\u6d88\u80171\u4f53\u529b\u91cd\u73a9",this.goNextBtn.parent.active=!0,window.facade.Screenratio&&window.facade.Screenratio<.47?this.failNode.getComponent(cc.Widget).bottom=381:this.failNode.getComponent(cc.Widget).bottom=170,this.failNode.getComponent(cc.Widget).updateAlignment(),facade.SAVE_MODE?(this.skipBtn.active=!1,this.restartBtn.getComponent(cc.Widget).isAlignHorizontalCenter=!0,this.restartBtn.getComponent(cc.Widget).isAlignRight=!1,this.restartBtn.getComponent(cc.Widget).isAlignLeft=!1,this.restartBtn.getComponent(cc.Widget).horizontalCenter=0,this.restartBtn.getComponent(cc.Widget).updateAlignment()):(this.restartBtn.getComponent(cc.Sprite).spriteFrame=this.bigRetrySkin,this.restartBtn.getComponent(cc.Widget).isAlignRight=!1,this.restartBtn.getComponent(cc.Widget).isAlignLeft=!0,this.restartBtn.getComponent(cc.Widget).left=50,this.restartBtn.getComponent(cc.Widget).updateAlignment(),this.skipBtn.width=205,this.skipBtn.getComponent(cc.Sprite).spriteFrame=this["btn"+this.type+"Skin"],this.skipBtn.getComponent(cc.Widget).right=50,this.skipBtn.getComponent(cc.Widget).updateAlignment()),this.checkLast()},initNeedUp:function(){this.updateRewardType(),this.passNode.active=!0,this.failNode.active=!1,this.restartBtn.active=!1,this.skipBtn.active=!1,this.doubleBtn.active=!1,this.retryCostEnergy.active=!1;var e=this;e.restartLabel.active=!1,setTimeout(function(){e.restartLabel.active=!0},2e3),this.goNextBtn.active=!0,this.upBtn.active=!0,this.goNextBtn.parent.active=!0,this.goNextBtn.width=205,this.goNextBtn.getComponent(cc.Sprite).spriteFrame=this.btnNextSkin,this.goNextBtn.getComponent(cc.Widget).isAlignRight=!1,this.goNextBtn.getComponent(cc.Widget).isAlignLeft=!0,this.goNextBtn.getComponent(cc.Widget).left=50,this.goNextBtn.getComponent(cc.Widget).updateAlignment(),this.upBtn.getComponent(cc.Sprite).spriteFrame=this["big"+this.type+"Skin"],this.upBtn.getComponent(cc.Widget).right=50,this.upBtn.getComponent(cc.Widget).updateAlignment(),this.checkLast()},initDefault:function(){this.updateRewardType(),this.passNode.active=!0,this.failNode.active=!1,this.skipBtn.active=!1,this.restartLabel.active=!1,this.upBtn.active=!1,this.doubleBtn.active=!1,this.goNextBtn.active=!0,this.restartBtn.active=!0,this.goNextBtn.parent.active=!0,this.goNextBtn.width=205,this.goNextBtn.getComponent(cc.Sprite).spriteFrame=this.bigNextSkin,this.goNextBtn.getComponent(cc.Widget).left=50,this.goNextBtn.getComponent(cc.Widget).updateAlignment(),this.restartBtn.getComponent(cc.Sprite).spriteFrame=this.btnRetrySkin,this.restartBtn.getComponent(cc.Widget).isAlignRight=!0,this.restartBtn.getComponent(cc.Widget).isAlignLeft=!1,this.restartBtn.getComponent(cc.Widget).right=50,this.restartBtn.getComponent(cc.Widget).updateAlignment(),this.checkLast()},initDouble:function(){this.updateRewardType(),this.passNode.active=!0,this.failNode.active=!1,this.skipBtn.active=!1,this.restartLabel.active=!1,this.retryCostEnergy.active=!1,this.upBtn.active=!1,this.restartBtn.active=!1,this.goNextBtn.active=!0,this.doubleBtn.active=!0,this.goNextBtn.parent.active=!0,this.goNextBtn.width=205,this.goNextBtn.getComponent(cc.Sprite).spriteFrame=this.btnNextSkin,this.goNextBtn.getComponent(cc.Widget).left=50,this.goNextBtn.getComponent(cc.Widget).updateAlignment(),this.doubleBtn.getComponent(cc.Sprite).spriteFrame=this["big"+this.type+"Skin"],this.doubleBtn.getComponent(cc.Widget).right=50,this.doubleBtn.getComponent(cc.Widget).updateAlignment(),this.checkLast()},checkLast:function(){window.facade.getComponent("LevelModel").isLastLevel()&&(this.goNextBtn.active=!1,this.skipBtn.active=!1)},initLinks:function(){facade.SAVE_MODE?this.linkBox.active=!1:window.facade.getComponent("RecommendGameModel").requestResultRecommend()},showResult:function(){this.star=window.facade.getComponent("LevelModel").star,this.star<3&&this.initNeedUp(),this.star<=0?this.showTitle():(this.starIndex=1,this.node.runAction(cc.sequence(cc.repeat(cc.sequence(cc.callFunc(this.addStar.bind(this)),cc.delayTime(.5)),this.star),cc.delayTime(.5),cc.callFunc(this.showTitle,this))))},showTitle:function(){this.checkGfit()},addStar:function(){var e=this["star"+this.starIndex].getChildByName("light");e.active=!0,e.opacity=0,e.scale=0;var t=cc.spawn(cc.fadeIn(.4),cc.scaleTo(.4,1));t.easing(cc.easeElasticOut(.2)),e.runAction(t),window.audio.getComponent("SoundManager").playEffect("star"),this.starIndex>=3&&(this.reward.parent.opacity=255,this.reward.parent.getChildByName("moneyEffect").getComponent(cc.ParticleSystem).resetSystem(),this.rewardCash=window.facade.getComponent("LevelModel").playingLevelConfig.Reward,this.reward.getComponent("TextureLabel").setText("+"+this.rewardCash),window.facade.getComponent("GameModel").addCash(Number(this.rewardCash)),this.initDouble()),this.starIndex++},goNext:function(){this.goNextBtn.getComponent(cc.Button).interactable=!1;var e=facade.getComponent("LevelModel").getTotalStar(),t=facade.getComponent("LevelModel").getLevelConfig(window.facade.getComponent("LevelModel").playingLevel+1);if(window.facade.getComponent("LevelModel").getLevelVideo(facade.selectedLevelType+"_"+t.Level)>0)3==t.BonusType&&window.facade.getComponent("LevelModel").getLevelStar(facade.selectedLevelType+"_"+t.Level)<3&&(t.Reward=2*window.facade.getComponent("LevelModel").playingLevelConfig.Reward);else if(t.Level==window.facade.getComponent("LevelModel").playingLevel+1&&t.BonusType>0)return this.goNextBtn.getComponent(cc.Button).interactable=!0,void this.watchVideo();var n=facade.getComponent("LevelModel").costEnergy;if(facade.getComponent("GameModel").energy<n)return cc.systemEvent.emit(i.ENERGY_NEEDED),void this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){this.goNextBtn.getComponent(cc.Button).interactable=!0}.bind(this))));t.Star>e?popUp.getComponent("FloatTip").showTip("\u6536\u96c6"+t.Star+"\u9897\u661f\u661f\u89e3\u9501\u4e0b\u4e00\u5173"):(cc.systemEvent.emit(i.GO_NEXT),o.logEvent("\u95ef\u5173\u6210\u529f\u70b9\u51fb\u4e0b\u4e00\u5173"))},watchVideo:function(){s.getInstance().gameMode=this,a.getInstance().showVideoAds("watchVideo")},watchVideoFunc:function(){this.jumpToLevlUi()},jumpToLevlUi:function(){window.facade.getComponent("LevelModel").setOverVideo();var e=facade.getComponent("LevelModel").getLevelConfig(window.facade.getComponent("LevelModel").playingLevel+1);if(facade.getComponent("LevelModel").costEnergy=1,1==e.BonusType){facade.getComponent("LevelModel").costEnergy=0;var t=facade.getComponent("LevelModel").costEnergy;if(facade.getComponent("GameModel").energy<t)return void cc.systemEvent.emit(i.ENERGY_NEEDED)}2==e.BonusType&&(e.LuckyPoint=2*window.facade.getComponent("LevelModel").playingLevelConfig.Reward),3==e.BonusType&&(e.Reward=2*window.facade.getComponent("LevelModel").playingLevelConfig.Reward);var n=facade.getComponent("LevelModel").getTotalStar();e.Star>n?popUp.getComponent("FloatTip").showTip("\u6536\u96c6"+e.Star+"\u9897\u661f\u661f\u89e3\u9501\u4e0b\u4e00\u5173"):cc.systemEvent.emit(i.GO_NEXT)},onRetryLabelHandler:function(){this.replayPanel.active=!0,o.logEvent("\u95ef\u5173\u6210\u529f\u70b9\u51fb\u91cd\u73a9")},onRetry:function(){this.doRetry()},doRetry:function(){s.getInstance().gameMode=this,a.getInstance().showVideoAds("doRetryNoEnergyVideo"),o.logEvent("\u4f53\u529b\u4e0d\u8db3\u754c\u9762\u770b\u89c6\u9891\u6216\u5206\u4eab")},doRetryFunc:function(){window.facade.getComponent("GameModel").levelRetryTouch=!0,this.node.parent.getComponent("LevelUI").retry()},doRetryCostEnergy:function(){this.restartBtn.getComponent(cc.Button).interactable=!1,this.restartLabel.getComponent(cc.Button).interactable=!1,this.retryCostEnergy.getComponent(cc.Button).interactable=!1,window.facade.getComponent("GameModel").levelRetryTouch=!0,this.node.parent.getComponent("LevelUI").retryCostEnergy(),o.logEvent("\u95ef\u5173\u5931\u8d25\u70b9\u51fb\u6d88\u8017\u4f53\u529b")},onTake3Star:function(){facade.isMiniGame?this.rewardType>2?popUp.getComponent("FloatTip").showTip("\u5df2\u7ecf\u8d85\u51fa\u4eca\u5929\u7684\u5956\u52b1\u4e0a\u9650\u5566\uff01"):(s.getInstance().gameMode=this,a.getInstance().showVideoAds("onTake3Star")):this.take3Star()},onTake3StarFunc:function(){this.take3Star()},take3Star:function(){this.upBtn.getComponent(cc.Button).interactable=!1,window.facade.getComponent("LevelModel").force3Star(),this.showResult()},take3StarGet:function(){window.facade.getComponent("LevelModel").force3Star(),this.showResult()},skip:function(){if(!facade.isMiniGame)return this.hide(),void cc.systemEvent.emit(i.SKIP);this.rewardType>2?popUp.getComponent("FloatTip").showTip("\u5df2\u7ecf\u8d85\u51fa\u4eca\u5929\u7684\u8df3\u5173\u4e0a\u9650\u5566\uff01"):(s.getInstance().gameMode=this,a.getInstance().showVideoAds("skip"))},skipFunc:function(){this.hide(),cc.systemEvent.emit(i.SKIP)},onDouble:function(){facade.isMiniGame?this.rewardType>2?popUp.getComponent("FloatTip").showTip("\u5df2\u7ecf\u8d85\u51fa\u4eca\u5929\u7684\u5956\u52b1\u4e0a\u9650\u5566\uff01"):(console.log("\u4e94\u500d\u9886\u53d6"),s.getInstance().gameMode=this,a.getInstance().showVideoAds("onDouble")):this.takeDouble()},onDoubleFunc:function(){this.takeDouble()},takeDouble:function(){this.doubleBtn.getComponent(cc.Button).interactable=!1,this.reward.parent.opacity=255,this.reward.parent.getChildByName("moneyEffect").getComponent(cc.ParticleSystem).resetSystem(),this.rewardCash=Number(window.facade.getComponent("LevelModel").playingLevelConfig.Reward);var e=5*this.rewardCash;this.reward.getComponent("TextureLabel").setText("+"+e),window.facade.getComponent("GameModel").addCash(Number(4*this.rewardCash))},hide:function(){cc.systemEvent.off(i.RESULT_RECOMMEND,this.gotLinks,this),this.node.active=!1,this.restartLabel.active=this.retryCostEnergy.active=!1},gotLinks:function(e){if(this.linkBox.removeAllChildren(),!e||0==e.length)return this.linkBox.opacity=0,void(this.linkBox.active=!1);if(this.linkBox.opacity=255,this.linkBox.active=!0,window.facade.getComponent("PlayerModel").isClickCountLimit(3))for(var t=0;t<e.length;t++)e[t].navout_max_cnt&&""!=e[t].navout_max_cnt&&0!=Number(e[t].navout_max_cnt)&&e[t].navout_cnt>=Number(e[t].navout_max_cnt)&&(e.splice(t,1),t--);if(facade.getComponent("PlayerModel").isIconRandomOrder("result")){var n=facade.getComponent("PlayerModel").getResultRecommondRandomCount(),i=e.slice(0,n),o=e.slice(n,e.length);i&&i.length>1&&i.sort(function(){return.5-Math.random()}),e=[],e=i.concat(o)}else e.sort(function(e,t){return Number(e.weight)>Number(t.weight)?-1:1});for(var a=Math.min(e.length,12),s=0;s<a;s++){var c=null;(c=cc.instantiate(this.linkItemPre)).active=!0,c.scale=1.1,c.getComponent("RecommendGameItem").setupItemData(e[s]),this.linkBox.addChild(c)}},onDestroy:function(){},checkGfit:function(){if(!facade.SAVE_MODE){var e=facade.getComponent("GameModel").checkNewerShowCondtition();0!=e&&window.popUp.getComponent("Pop").addPopByName(e+"View",null,!0,!0)}},update:function(e){}}),cc._RF.pop()},{AdsSingleton:"AdsSingleton",AnalyticsUtilities:"AnalyticsUtilities",ModuleEventEnum:"ModuleEventEnum",Singleton:"Singleton"}],ResultShotOne:[function(e,t,n){"use strict";cc._RF.push(t,"9c66eFpRhNF4LYuO+O19Z3v","ResultShotOne");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{goNextBtn:cc.Node,restartBtn:cc.Node,linkBox:cc.Node,linkItemPre:cc.Prefab,chanllenLabel:cc.Label,fauilNode:cc.Node,cupNumLabel:cc.Label,returnPlayBt:cc.Node,cupNumNode:cc.Node},onLoad:function(){},start:function(){},onEnable:function(){this.losePlayed=!1},onDisable:function(){this.losePlayed=!1},init:function(e){if(cc.systemEvent.on(i.RESULT_RECOMMEND,this.gotLinks,this),e){this.returnPlayBt.active=!0,this.returnPlayBt.getComponent(cc.Button).interactable=!0,this.cupNumNode.active=!0,this.goNextBtn.active=!1,this.restartBtn.active=!1,this.fauilNode.active=!1;var t=window.facade.getComponent("GameModel").oneShotLevelCupNum;this.cupNumLabel.string="+"+t}else this.returnPlayBt.active=!1,this.cupNumNode.active=!1,this.goNextBtn.active=!0,this.restartBtn.active=!0,this.restartBtn.getComponent(cc.Button).interactable=!0,this.fauilNode.active=!0,this.setChanllenLabel();this.initLinks()},setChanllenLabel:function(){this.chanllenNum=window.facade.getComponent("GameModel").chanllenTimes;var e=facade.getComponent("ShareADModel").GameConfig.OneBulletCnt.Value;this.chanllenLabel.string="\u5269\u4f59\u6b21\u6570:"+(e-this.chanllenNum)+"/"+e},goReturnBegin:function(){this.restartBtn.getComponent(cc.Button).interactable=!1,this.returnPlayBt.getComponent(cc.Button).interactable=!1,this.chanllenNum=window.facade.getComponent("GameModel").chanllenTimes;var e=facade.getComponent("ShareADModel").GameConfig.OneBulletCnt.Value;if(this.chanllenNum<e){if(0==window.facade.getComponent("GameModel").levelShotUpdate)if(window.facade.getComponent("GameModel").getLocalTimeHour()>=21){window.facade.getComponent("GameModel").setShotUpdateData(1);var t="\u4eca\u65e5\u6311\u6218\u65f6\u95f4\u5df2\u7ed3\u675f\uff0c\u8bf7\u9886\u53d6\u5956\u52b1\uff01";popUp.getComponent("FloatTip").showTip(t),this.node.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(this.backMain,this)))}else window.facade.getComponent("GameModel").setAddChanllenNum(),this.chanllenNum++,window.facade.getComponent("GameModel").setOneShotLeves(),this.node.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(this.goToShotNextLevel,this)))}else{t="\u4eca\u65e5\u6311\u6218\u6b21\u6570\u5df2\u7528\u5b8c\uff0c\u8bf7\u660e\u65e5\u518d\u6765\uff01";popUp.getComponent("FloatTip").showTip(t),this.node.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(this.backMain,this)))}},initLinks:function(){facade.SAVE_MODE?this.linkBox.active=!1:window.facade.getComponent("RecommendGameModel").requestResultRecommend()},backMain:function(){cc.systemEvent.emit(i.BACK_MAIN)},goToShotNextLevel:function(){this.node.active=!1,cc.systemEvent.emit(i.GO_SHOT_NEXT)},goNext:function(){this.node.active=!1,window.facade.getComponent("GameModel").onLevelShotNext()},onRetry:function(){this.restartBtn.getComponent(cc.Button).interactable=!1;var e=facade.getComponent("ShareADModel").GameConfig.OneBulletCnt.Value;if(this.chanllenNum<e){window.facade.getComponent("GameModel").setAddChanllenNum(),this.chanllenNum++;var t={inviteId:0,videoId:21109,assistId:0,interstitalId:31106};window.facade.getComponent("ShareADModel").showShareAD(t,{succ:function(e){console.log("\u91cd\u73a9\u89c6\u9891:",e),this.node.active=!1,cc.systemEvent.emit(i.GO_SHOT_NEXT)}.bind(this),fail:function(e,t){popUp.getComponent("FloatTip").showTip(e)}.bind(this)})}},hide:function(){cc.systemEvent.off(i.RESULT_RECOMMEND,this.gotLinks,this),this.node.active=!1},gotLinks:function(e){if(this.linkBox.removeAllChildren(),!e||0==e.length)return this.linkBox.opacity=0,void(this.linkBox.active=!1);if(this.linkBox.opacity=255,this.linkBox.active=!0,window.facade.getComponent("PlayerModel").isClickCountLimit(3))for(var t=0;t<e.length;t++)e[t].navout_max_cnt&&""!=e[t].navout_max_cnt&&0!=Number(e[t].navout_max_cnt)&&e[t].navout_cnt>=Number(e[t].navout_max_cnt)&&(e.splice(t,1),t--);if(facade.getComponent("PlayerModel").isIconRandomOrder("result")){var n=facade.getComponent("PlayerModel").getResultRecommondRandomCount(),i=e.slice(0,n),o=e.slice(n,e.length);i&&i.length>1&&i.sort(function(){return.5-Math.random()}),e=[],e=i.concat(o)}else e.sort(function(e,t){return Number(e.weight)>Number(t.weight)?-1:1});for(var a=Math.min(e.length,12),s=0;s<a;s++){var c=null;(c=cc.instantiate(this.linkItemPre)).active=!0,c.scale=1.1,c.getComponent("RecommendGameItem").setupItemData(e[s]),this.linkBox.addChild(c)}},onDestroy:function(){},checkGfit:function(){if(!facade.SAVE_MODE){var e=facade.getComponent("GameModel").checkNewerShowCondtition();0!=e&&window.popUp.getComponent("Pop").addPopByName(e+"View",null,!0,!1)}},update:function(e){}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],RewardCPAModel:[function(e,t,n){"use strict";var i;function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cc._RF.push(t,"a71dci2buhBjqyQTP17/sjL","RewardCPAModel");var a=e("ModuleEventEnum"),s=e("Network");cc.Class((o(i={extends:cc.Component,properties:{isCPA:!1,maxCarTerm:0,cpaGameTime:0,boxGameTime:0,resourceMarkup:0,carMarkup:0,cpaRecord:[],boxReward:null},navigateToGame:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e.link,o=e.link_params,a=e.link_game_id,s=e.game_id;if(wx.navigateToMiniProgram){this.callback=t,o="pages/index/index?"+o,console.log("lc \u6e38\u620f\u8df3\u8f6c : appId=",i,", path=",o," extraData = ",e);var c=this;wx.navigateToMiniProgram({appId:i,extraData:{info:e},path:o,envVersion:n?"develop":"release",success:function(){console.log("lc \u6e38\u620f\u8df3\u8f6c : \u6210\u529f"),c.sendTravelGame(a,s),t&&t.success(),c.isCPA=!0},fail:function(){t&&t.failure(),console.log("lc \u6e38\u620f\u8df3\u8f6c : \u5931\u8d25"),popUp.getComponent("Pop").getPopByName("FakeInterUI")||popUp.getComponent("Pop").addPopByName("FakeInterUI",null,!0)},complete:function(){}})}},sendTravelGame:function(e,t){console.log("lc \u8df3\u8f6c\u6e38\u620f-- \u4e0a\u62a5 webSocket",e,t);var n={game_id:window.facade.GameId,to_game_id:e,final_to_game_id:t,token:window.facade.getComponent("PlayerModel").token};window.net.getComponent("Net").httpRequest(window.net.NavigateOut,n),console.log("lc \u8df3\u8f6c\u6e38\u620f-- \u4e0a\u62a5 \u884c\u884c\u884c ",t),window.net.getComponent("Net").appLinkReport(t)},onLoad:function(){cc.systemEvent.on(a.GAMESENE_ENTERED,this.loadingEnd.bind(this)),cc.systemEvent.on(a.RELOGIN_SUCCESS,this.reLoginSuccess.bind(this)),cc.systemEvent.on(a.SERVER_RESPONSE,this.onServerResponse.bind(this)),this.monitorWXLifeCycle()},monitorWXLifeCycle:function(){if(facade.isMiniGame){var e=this;wx.onShow(function(){setTimeout(function(){"Game"==cc.director.getScene().name&&window.net.getComponent("Net").inConnecting?(console.log("lc cpa-- wx.onShow \u68c0\u6d4b\u5956\u52b1",window.net.getComponent("Net").inConnecting),e.getCPAReward()):console.log("lc cpa-- wx.onShow \u4e0d\u6ee1\u8db3\u9886\u53d6\u6761\u4ef6")},200)})}},loadingEnd:function(){var e=this;setTimeout(function(){"Game"==cc.director.getScene().name&&window.net.getComponent("Net").inConnecting&&(console.log("lc cpa \u52a0\u8f7d\u5b8c\u6210 \u9886\u53d6\u5956\u52b1"),e.getCPAReward())},200)},reLoginSuccess:function(){"Game"==cc.director.getScene().name&&window.net.getComponent("Net").inConnecting&&(console.log("lc cpa \u91cd\u8fde\u6210\u529f \u68c0\u6d4b\u5956\u52b1"),this.getCPAReward())},onServerResponse:function(e){var t=e.detail;switch(t.messageName){case"Message_reward.SCResLinkRewardFetchMessage":console.log("lc cpa -- \u9886\u53d6\u76d2\u5b50\u5956\u52b1 ",t.linkGameId);var n={type:3,content:this.boxReward.content};window.popUp.getComponent("Pop").addPopByName("Prop",[n],!0);break;case"Message_reward.SCResLinkRewardFetchedInfoMessage":console.log("lc cpa -- \u5df2\u7ecf\u9886\u53d6\u4fe1\u606f ",t.linkGameIds),this.callback.success(t.linkGameIds)}},receiveCPAReward:function(e,t,n){var i=this;if(5==(e=parseInt(e)))this.getBoxGameReward(t);else{if(1==e){var o=t;facade.getComponent("GameModel").requestUpGradeACar(o,1),window.facade.getComponent("RewardBoxModel").carId=0,console.log("lc cpa-- \u5f00\u7bb1\u5b50",e,t)}else 2==e?(window.facade.getComponent("RewardOnlineModel").requestOpenEgg(1),console.log("lc cpa-- \u5f00\u7bb1\u5b50",e,t)):3==e?window.facade.getComponent("RewardSubsidyModel").freeMoneyFetch(1):4==e&&cc.systemEvent.emit(a.CAN_FREE_BUY_CAR,t);window.facade.getComponent("RewardCPAModel").getBoxGameRewardInfo({success:function(e){for(var t=!1,o=0;o<e.length;o++)if(e[o]==n){t=!0;break}0==t?setTimeout(function(){i.getBoxGameReward(n),console.log("lc cpa \u76d2\u5b50\u4e2d \u6ca1\u6709\u9886\u53d6\u8fc7")},100):console.log("lc cpa \u76d2\u5b50\u4e2d \u5df2\u7ecf\u9886\u53d6\u8fc7")}})}this.removeCPAReward()},saveCPAReward:function(e,t,n){cc.sys.localStorage.setItem("cpaGame",n),cc.sys.localStorage.setItem("cpaTime",this.clientTimeStamp()),cc.sys.localStorage.setItem("cpaType",e),null!=t&&cc.sys.localStorage.setItem("cpaContent",t),console.log("lc cpa-- \u4fdd\u5b58\u5956\u52b1",e,t)},getCPAReward:function(){var e=cc.sys.localStorage.getItem("cpaGame"),t=cc.sys.localStorage.getItem("cpaTime"),n=cc.sys.localStorage.getItem("cpaType"),i=cc.sys.localStorage.getItem("cpaContent");(console.log("lc cpa-- \u83b7\u53d6\u5956\u52b1",t,n,i),t&&""!=t)?(console.log("lc cpa \u6709\u5956\u52b1"),this.clientTimeStamp()-t<1e3*(5!=n?this.cpaGameTime:this.boxGameTime)?(console.log("lc cpa \u6ca1\u6709\u8fbe\u5230\u65f6\u95f4\u8981\u6c42"),this.removeCPAReward()):(console.log("lc cpa \u8fbe\u5230\u65f6\u95f4\u8981\u6c42, \u9886\u53d6\u5956\u52b1"),this.receiveCPAReward(n,i,e))):(console.log("lc cpa \u6ca1\u6709\u5956\u52b1"),this.removeCPAReward())},getBoxGameRewardInfo:function(e){this.callback=e,console.log("lc cpa \u67e5\u8be2\u76d2\u5b50\u5956\u52b1")},getBoxGameReward:function(e){console.log("lc cpa \u9886\u53d6\u76d2\u5b50\u5956\u52b1")},removeCPAReward:function(){cc.sys.localStorage.removeItem("cpaGame"),cc.sys.localStorage.removeItem("cpaTime"),cc.sys.localStorage.removeItem("cpaType"),cc.sys.localStorage.removeItem("cpaContent"),console.log("lc cap \u79fb\u9664\u5956\u52b1")},clientTimeStamp:function(){return(new Date).getTime()}},"clientTimeStamp",function(){return(new Date).getTime()}),o(i,"requestCPAGame",function(e){var t=window.facade.httpServerAdress+window.net.RecommendGame,n={game_id:window.facade.GameId,token:window.facade.getComponent("PlayerModel").token},i=this;s.postReq(t,n,{success:function(t){var n=i.setupRecommendList(t.recommend_info);e.success(n)},failure:function(t){e.success(null)}})}),o(i,"setupRecommendList",function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];5==parseInt(i.group)&&t.push(i)}t=t.sort(function(e,t){return parseInt(e.weight)<parseInt(t.weight)?1:parseInt(e.weight)>parseInt(t.weight)?-1:0});for(var o=[],a=[],s=0;s<t.length;s++){var c=t[s];parseInt(c.navout_cnt)<=0?o.push(c):a.push(c)}if(console.log("lc cpa recommendList =",o,a),o.length>0){var r=parseInt(Math.random()*o.length);return console.log("lc cpa random showParams = ",r,o.length),o[r]}r=parseInt(Math.random()*a.length);return console.log("lc cpa random clickParams = ",r,a.length),a[r]}),o(i,"initConfig",function(){for(var e in this.globalDB=cc.loader.getRes("config/GlobalDB"),this.globalDB){if("47104"==e){var t=this.globalDB[e].value.split("|");this.headOrderIds=t[0].split(":")[1].split(","),this.loopOrderIds=t[0].split(":")[1].split(",")}if("47201"==e&&(this.maxCarTerm=parseInt(this.globalDB[e].value),console.log("lc cpa-- maxCarTerm = ",this.maxCarTerm)),"47202"==e&&(this.cpaGameTime=parseInt(this.globalDB[e].value),console.log("lc cpa-- cpaGameTime = ",this.cpaGameTime)),"47203"==e&&(this.resourceMarkup=parseInt(this.globalDB[e].value),console.log("lc cpa-- resourceMarkup = ",this.resourceMarkup)),"47204"==e&&(this.carMarkup=parseInt(this.globalDB[e].value),console.log("lc cpa-- carMarkup = ",this.carMarkup)),"47301"==e){var n=this.globalDB[e].value;this.boxReward={},this.boxReward.type=n.split(":")[0],this.boxReward.content=n.split(":")[1],console.log("lc cpa-- boxReward = ",this.boxReward)}"47302"==e&&(this.boxGameTime=parseInt(this.globalDB[e].value),console.log("lc cpa-- boxGameTime = ",this.boxGameTime))}}),i)),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum",Network:"Network"}],ShareADModel:[function(e,t,n){"use strict";cc._RF.push(t,"635022/PNBBYpoWUCycUJQX","ShareADModel");var i=e("ModuleEventEnum");e("Network"),e("AlertTool");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.dayId=1,this.shareCount=0,this.videoCount=0,this.loginCount=1,this.dayShareADCount=0,this.dayShareCount=0,this.dayADCount=0,this.lastLoginTime=this.getLocalTime(),this.shareInterval=500,this.shareOpen=!0,this.initConfig(),facade.isMiniGame&&(cc.systemEvent.on(i.WX_REGISTERED,this.onWxRegistered,this),cc.systemEvent.on(i.GOT_HTTP_RES,this.httpResDeal2.bind(this)),cc.systemEvent.on(i.WX_SHOW,this.onWxShow.bind(this)),cc.systemEvent.on(i.WX_HIDE,this.onWxHide.bind(this)))},initConfig:function(){cc.loader.loadResArray(["config/ASOrderConfig","config/ASRuleConfig","config/GameConfig"],cc.JsonAsset,this.configLoaded.bind(this))},httpResDeal2:function(e){var t;(e=e.data)&&e.invite_newbie&&(this.newerCount=e.invite_newbie.length,this.newbieList=e.invite_newbie,this.newbieList&&this.newbieList.length>1&&(t=this.sortList(this.newbieList,"newbieFetchList")),this.generateOrder(),cc.systemEvent.emit(i.GAME_OPEN_NEWBIE_INVITE,t));e&&e.invite_alive&&(this.activityCount=e.invite_alive.length,this.activityList=e.invite_alive,this.generateOrder(),cc.systemEvent.emit(i.GAME_OPEN_DAILY_INVITE,this.activityList))},httpResDeal:function(e){if(e&&e.record){var t=JSON.parse(e.record);console.log("ShareADModel data:",t),this.dayCheck(t),this.saveRecord()}},sortList:function(e,t){for(var n=[],i=facade.getComponent("GameModel")[t],o=0;o<e.length;o++){for(var a=0;a<i.length&&i[a].user_id!=e[o].user_id;a++);n.push(e[o])}return n.sort(function(e,t){return e.add_ts>t.add_ts?1:-1}),n},getLocalTime:function(){var e=new Date;return e.getTime()-6e4*e.getTimezoneOffset()},dayCheck:function(e){this.lastLoginTime=Number(e.lastLoginTime),this.dayId=Number(e.dayId),this.loginCount=Number(e.loginCount),this.dayADCount=Number(e.dayADCount),this.dayShareCount=Number(e.dayShareCount),this.dayShareADCount=Number(e.dayShareADCount),this.shareCount=Number(e.shareCount),this.videoCount=Number(e.videoCount);var t=this.getLocalTime(),n=Math.floor(this.lastLoginTime/86400/1e3),o=Math.floor(t/86400/1e3),a=new Date(86400*o*1e3),s=new Date(86400*n*1e3);console.log("lastDay:",s.toString()),console.log("today:",a.toString()),console.log("day check:",n,"----------",o),n<o&&(this.dayId++,this.dayADCount=0,this.dayShareCount=0,this.dayShareADCount=0),this.lastLoginTime=t,this.loginCount++,this.generateOrder(),cc.systemEvent.emit(i.LOGININFO_GOT)},generateOrder:function(){if(this.GameConfig){this.activityCount||(this.activityCount=0),this.newerCount||(this.newerCount=0);var e=this.dayId-1;if(e<1&&(e=1),this.videoFactor=this.videoCount/e,this.newerFactor=this.newerCount/e,this.activityFactor=this.activityCount/e,this.shareFactor=this.newerFactor*Number(this.GameConfig.NewerValue.Value)/100+this.activityFactor*Number(this.GameConfig.OnlineValue.Value)/100,1==this.dayId)this.headOrderIds=this.GameConfig["Day_"+this.dayId+"_AS_Order"].Value.split(":")[0].split(","),this.loopOrderIds=this.GameConfig["Day_"+this.dayId+"_AS_Order"].Value.split(":")[1].split(",");else if(this.dayId<=3){var t=this.GameConfig["Day_"+this.dayId+"_AS_Order"].Value.split("|")[0],n=this.GameConfig["Day_"+this.dayId+"_AS_Order"].Value.split("|")[1],i=t.split(":")[0],o=t.split(":")[1];if(this.newerFactor==Number(i)&&this.shareCount/e<Number(o)&&(this.headOrderIds=n.split(":")[0].split(",")),this.loopOrderIds=n.split(":")[1].split(","),this.videoFactor<1){for(var a=0;a<this.headOrderIds.length;a++)"2"==this.headOrderIds[a]&&(this.headOrderIds[a]="4");for(a=0;a<this.loopOrderIds.length;a++)"2"==this.loopOrderIds[a]&&(this.loopOrderIds[a]="4")}}else{var s=this.GameConfig.Day_4_AS_OrderA.Value.split("|")[0],c=this.GameConfig.Day_4_AS_OrderB.Value.split("|")[0];if(this.loginCount/e<Number(s))this.headOrderIds=this.GameConfig.Day_4_AS_OrderA.Value.split("|")[1].split(",");else if(this.newerCount<Number(c))this.headOrderIds=this.GameConfig.Day_4_AS_OrderB.Value.split("|")[1].split(",");else{var r=this.getRulesId(1,e);this.headOrderIds=this.ASOrderConfig[r].Value}var l=this.getRulesId(2,e);this.loopOrderIds=this.ASOrderConfig[l].Value}}},getRulesId:function(e,t){for(var n=[],i=1;i<=3;i++){for(var o=this.asRules["type_"+i],a=0,s=0;s<o.length;s++){var c=0;1==i?c=this.shareCount/t:2==i?c=this.videoFactor:3==i&&(c=this.shareFactor),c>=o[s].value&&(a=o[s].id)}n.push(a)}var r=e+"";for(i=0;i<n.length;i++)r+="_"+n[i];return r},saveRecord:function(){if("SkipPage"!=facade.CurrentScene){var e={};e.dayId=this.dayId,e.loginCount=this.loginCount,e.lastLoginTime=this.lastLoginTime,e.shareCount=this.shareCount,e.videoCount=this.videoCount,e.dayShareADCount=this.dayShareADCount,e.dayShareCount=this.dayShareCount,e.dayADCount=this.dayADCount,console.log("save shareModel data:",e);var t={game_id:window.facade.GameId,token:window.facade.getComponent("PlayerModel").token,record_type:3,record:JSON.stringify(e)};window.net.getComponent("Net").httpRequest(window.net.SaveRecord,t)}},configLoaded:function(e,t){for(var n=0;n<t.length;n++)"ASOrderConfig"==t[n].name?this.ASOrderConfig=t[n].json:"ASRuleConfig"==t[n].name?this.ASRuleConfig=t[n].json:"GameConfig"==t[n].name&&(this.GameConfig=t[n].json);if(this.GameConfig&&(this.headOrderIds=this.GameConfig.Day_1_AS_Order.Value.split(":")[0].split(","),this.loopOrderIds=this.GameConfig.Day_1_AS_Order.Value.split(":")[1].split(","),this.maxADCount=Number(this.GameConfig.VideoLimit.Value),this.maxShareCount=Number(this.GameConfig.ShareLimit.Value),facade.getComponent("LevelModel").vipStarNeed=Number(this.GameConfig.VipUnlockLevel.Value),facade.getComponent("LevelModel").injuryStarNeed=Number(this.GameConfig.InjuryUnlockLevel.Value),facade.getComponent("LevelModel").gndStarNeed=Number(this.GameConfig.GrenadegrUnlockLevel.Value)),this.ASRuleConfig)for(var i in this.asRules={},this.ASRuleConfig){var o=this.ASRuleConfig[i];this.asRules["type_"+String(o.Type)]||(this.asRules["type_"+String(o.Type)]=[]);var a={};a.id=o.ID,a.value=1==o.ValueType?o.Value:o.Value/1e4,this.asRules["type_"+String(o.Type)].push(a)}this.generateOrder()},getShareADType:function(){console.log("lc shareAD-- \u5206\u4eab\u6b21\u6570 = ",this.dayShareCount),console.log("lc shareAD-- \u89c6\u9891\u6b21\u6570 = ",this.dayADCount),console.log("lc shareAD-- \u5206\u4eab\u89c6\u9891\u5408\u4f53 \u6b21\u6570 =",this.dayShareADCount);var e=void 0;if(this.dayShareADCount<this.headOrderIds.length)e=Number(this.headOrderIds[this.dayShareADCount]),console.log("lc shareAD--  \u521d\u59cb\u5e8f\u5217: \u7c7b\u578b= ",1==parseInt(e)?"\u89c6\u9891":"\u5206\u4eab");else{var t=this.dayShareADCount%this.loopOrderIds.length;e=Number(this.loopOrderIds[t]),console.log("lc shareAD--  \u5faa\u73af\u5e8f\u5217: \u7c7b\u578b= ",1==parseInt(e)?"\u89c6\u9891":"\u5206\u4eab")}return 1==e?this.dayADCount<this.maxADCount?(console.log("lc shareAD-- type \u968f\u673a\uff1a\u770b\u89c6\u9891",this.dayADCount,this.maxADCount),1):this.dayShareCount<this.maxShareCount?(console.log("lc shareAD-- type \u968f\u673a\uff1a \u89c6\u9891\u770b\u5b8c \u53bb\u5206\u4eab",this.dayShareCount,this.maxShareCount),2):(console.log("lc shareAD-- type \u968f\u673a\uff1a \u89c6\u9891\u770b\u5b8c \u5206\u4eab\u8d85\u8fc7\u6b21\u6570",this.dayShareCount,this.dayADCount),3):2==e?this.dayShareCount<this.maxShareCount?(console.log("lc shareAD-- type \u968f\u673a\uff1a \u53bb\u5206\u4eab",this.dayShareCount,this.maxShareCount),2):this.dayADCount<this.maxADCount?(console.log("lc shareAD-- type \u968f\u673a\uff1a\u5206\u4eab\u6b21\u6570\u5b8c\u6210 \u53bb\u770b\u89c6\u9891",this.dayADCount,this.maxADCount),1):(console.log("lc shareAD-- type \u968f\u673a\uff1a\u5206\u4eab\u8d85\u8fc7\u6b21\u6570\uff0c \u89c6\u9891\u770b\u5b8c ",this.dayShareCount,this.dayADCount),3):e},clientTimeStamp:function(){return(new Date).getTime()},showShareAD:function(e,t){(this.callback=t,this.type=e,facade.isMiniGame)?this.setupShareInfo(t):t.succ(e)},setupVideoInfo:function(){var e=this;null==this.gameVideo?(console.log("lc shareAD--  \u521d\u59cb\u5316 gameVideo"),this.sendMggfBehaveReport(1,1),this.gameVideo=wx.createRewardedVideoAd({adUnitId:"adunit-5b4582e3072248c3"}),this.gameVideo.onError(function(t){e.sendMggfBehaveReport(4,1),console.log("lc shareAD--  \u89c6\u9891\u52a0\u8f7d\u5931\u8d25 = ",t.errMsg),e.setupShareInfo(null)}),this.gameVideo.onClose(function(t){t.isEnded?(console.log("lc shareAD-- \u89c2\u770b\u5b8c\u6210 \u5173\u95ed = "),e.callback&&(e.callback.succ(e.type),e.callback=null),e.sendMggfBehaveReport(3,1)):(console.log("lc shareAD--  \u89c2\u770b\u672a\u5b8c\u6210 \u5173\u95ed = "),e.callback&&(e.callback.fail("\u8fd8\u6ca1\u6709\u770b\u5b8c\u89c6\u9891,\u6ca1\u6cd5\u9886\u53d6\u5956\u52b1\u54e6~",e.type),e.callback=null))})):console.log("lc shareAD--  \u5df2\u7ecf\u521b\u5efa gameVideo"),this.gameVideo.load().then(function(){e.gameVideo.show().then(function(){e.sendMggfBehaveReport(2,1),console.log("lc shareAD--  \u663e\u793a\u6210\u529f, \u4e0a\u62a5")})}).catch(function(t){e.sendMggfBehaveReport(4,1),console.log("lc shareAD--  load \u770b\u89c6\u9891\u5931\u8d25 \u53bb\u5206\u4eab",t),e.setupShareInfo(null)}),this.dayADCount++,this.videoCount++,this.dayShareADCount++,this.saveRecord()},setupShareInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";this.shareDataArr=facade.getComponent("GameModel").shareConfig;var o=this,a=this.shareDataArr[c(0,this.shareDataArr.length)];""==t&&(t=a.title,n=a.img),this.shareTime=(new Date).getTime();function s(t){if(e){var n=void 0;t?((n=c(0,3)-1)<0&&(n=0),wx.showToast({title:[" \u5206\u4eab\u6210\u529f","\u5206\u4eab\u6210\u529f"][n]})):((n=c(0,4)-1)<0&&(n=0),wx.showToast({title:["\u5206\u4eab\u5931\u8d25","\u5206\u4eab\u5931\u8d25","\u5206\u4eab\u5931\u8d25"][n]}))}}function c(e,t){return Math.random()*(t-e)+e<<0}wx.onShow(function a(){var c=this;e&&(setTimeout(function(){if((new Date).getTime()-o.shareTime>=3e3)Math.random()>.1?(e&&e.succ(),s(!0)):(e&&e.fail(),s(!1));else if(Math.random()>.8)e&&e.succ(),s(!0);else{if(1==o.shareTimes)return e&&e.fail(),s(!1),void(o.shareTimes=0);s(!1),e&&setTimeout(function(){wx.showModal({title:"\u63d0\u793a",content:"\u83b7\u53d6\u5931\u8d25\uff0c\u6362\u6362\u5176\u4ed6\u7684\u597d\u53cb\u8bd5\u8bd5\u5427",showCancel:!0,cancelText:"\u77e5\u9053\u4e86",confirmText:"\u91cd\u65b0\u83b7\u53d6",success:function(a){a.confirm?(o.shareTimes++,o.share(t,n,i,e)):a.cancel&&console.log("\u7528\u6237\u70b9\u51fb\u786e\u5b9a")}})},c,1e3)}},1e3),wx.offShow(a))}),wx.shareAppMessage({title:t,imageUrl:n,query:function(e){if(!e)return"";var t="";for(var n in e)t+=n+"="+e[n]+"&";return t}(i),cancel:function(e){}}),this.dayShareCount++,this.shareCount++,this.dayShareADCount++,this.saveRecord()},onWxRegistered:function(){this.initDefaultShare(),this.requestOnlineInfo(),this.reportInviteInfo(),this.requestInvitee(),this.saveRecord(),cc.systemEvent.emit(i.LOGININFO_GOT)},requestInvitee:function(){var e={game_id:window.facade.GameId,token:window.facade.getComponent("PlayerModel").token};window.net.getComponent("Net").httpRequest(window.net.InviteeList,e)},requestOnlineInfo:function(){var e={game_id:window.facade.GameId,token:window.facade.getComponent("PlayerModel").token,record_type:3},t="",n=0;for(var i in e)n>0&&(t+="&"),n++,t+=i+"="+e[i];var o=window.facade.httpServerAdress+window.net.GetRecord,a=new XMLHttpRequest;a.onreadystatechange=function(){4==a.readyState&&200==a.status&&this.httpResDeal(JSON.parse(a.responseText).data)}.bind(this),a.onerror=function(e){},a.open("POST",o,!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send(t)},reportInviteInfo:function(){var e=window.facade.getComponent("PlayerModel").wxAdaptor.getinviteRid(),t=window.facade.getComponent("PlayerModel").wxAdaptor.getinviteType(),n={game_id:window.facade.GameId,token:window.facade.getComponent("PlayerModel").token,invite_type:t,inviter_uid:e};window.net.getComponent("Net").httpRequest(window.net.AcceptInvite,n)},countWhetherShare:function(){return!0},getShareConfig:function(e){this.shareConfig=[{count:1,random:0},{count:2,random:500},{count:3,random:1e3},{count:4,random:1500},{count:5,random:8e3}];for(var t=0;t<this.shareConfig.length;t++){var n=this.shareConfig[t];if(n.count==e)return console.log("lc shareAD-- config =  ",n),n}return console.log("lc shareAD-- config1 =  ",{count:2,random:1500}),{count:6,random:1e4}},getShareCount:function(){var e=cc.sys.localStorage.getItem("ShareFailCount");return e||(e=0),console.log("lc shareAD-- getShareErrCount = ",e),e},saveShareFailCount:function(e){if(0==e)cc.sys.localStorage.setItem("ShareFailCount",0);else{var t=cc.sys.localStorage.getItem("ShareFailCount");t||(t=0),t+=1,console.log("lc shareAD-- saveShareErrCount = ",t),cc.sys.localStorage.setItem("ShareFailCount",t)}},initDefaultShare:function(){wx.onShareAppMessage(function(){return{title:"\u5f00\u5c40\u4e00\u6761\u547d\u4e00\u628a98K\uff0c\u4f60\u80fd\u95ef\u591a\u5c11\u5173",imageUrl:"https://gcdn.qdos.com/game/common/file/201911061730043511/ab12312.png"}}),wx.showShareMenu({withShareTicket:!0})},defaultShareParamsInit:function(e,t,n){var i=this;console.log("defaultShareParamsInit...",e,t,n),this.defaultShareText=e,this.defaultShareImge=t,this.defaultShareQuery=n,wx.onShareAppMessage(function(){return console.log("defaultShare..."),i.shareCount++,i.dayShareADCount++,i.dayShareCount++,window.net.getComponent("Net").behaveReport(window.facade.BEHAVE_SHARE),{title:i.defaultShareText,imageUrl:i.defaultShareImge,query:i.defaultShareQuery}})},sendMggfBehaveReport:function(e,t){var n={};n.da_action=e,n.da_position=void 0==this.showId?0:this.showId,n.da_type=t,n.game_id=facade.GameId,n.user_id=window.facade.getComponent("PlayerModel").privateUid,n.time=Math.floor((new Date).getTime()/1e3);var i=this.getMggfSign(n);n.sign=i;var o=window.facade.httpServerAdress+"log/collectorDa",a=new XMLHttpRequest;a.onreadystatechange=function(e){}.bind(this),a.onerror=function(e){},a.open("POST",o,!1),a.send(n)},getMggfSign:function(e){var t="da_action="+e.da_action+"&da_position="+e.da_position+"&da_type="+e.da_type+"&game_id="+e.game_id+"&time="+e.time+"&user_id="+e.user_id+"|"+facade.Client_Secret;return console.log("lc getMggfSign =",t,cc.md5Encode(t).toLowerCase()),cc.md5Encode(t).toLowerCase()},onWxShow:function(){},onWxHide:function(){},onShowInterstital:function(){var e={inviteId:0,videoId:0,assistId:0,interstitalId:31107};this.showShareAD(e,{succ:function(e){}.bind(this),fail:function(e,t){}.bind(this)})}}),cc._RF.pop()},{AlertTool:"AlertTool",ModuleEventEnum:"ModuleEventEnum",Network:"Network"}],ShareVideoNodeScript:[function(e,t,n){"use strict";cc._RF.push(t,"45b67NfdaFEobDAdm2w9Guq","ShareVideoNodeScript");e("AdsSingleton");var i=e("Singleton");cc.Class({extends:cc.Component,properties:{shareBtn:cc.Node,shareVideoNode:cc.Node},start:function(){},confirmBtnClick:function(){i.getInstance().gameMode=this,i.getInstance().doShare("video","doShare")},shutBtnClick:function(){this.node.active=!1}}),cc._RF.pop()},{AdsSingleton:"AdsSingleton",Singleton:"Singleton"}],SignIn:[function(e,t,n){"use strict";cc._RF.push(t,"02583WiMTlDYYkJoW2yQZ2M","SignIn");var i=e("AdsSingleton"),o=e("Singleton");cc.Class({extends:cc.Component,properties:{sDayImg:cc.Node,sDayIsGet:cc.Node,sDayNow:cc.Node,sDayNum:cc.Label,uiName:cc.Node,title:cc.Label,content:cc.Node,item:cc.Prefab,doubleBtn:cc.Node,normalBtn:cc.Node},onLoad:function(){this.closeActTime=.18,this.normalBtn.scale=1},viewDidAppear:function(){this.content.active=!0,this.initContent(),this.setupShare(),e("VirBannerCtrl").hideVirBanner()},initContent:function(){var e=facade.getComponent("GameModel").getRewardConfig();console.log("config: ",e);var t,n=facade.getComponent("GameModel").fetchDays,i=Math.floor(facade.getComponent("GameModel").lastFetchSignInTime/86400/1e3),o=Math.floor(facade.getComponent("GameModel").getLocalTime()/86400/1e3);console.log("gameModel\u91cc\u85cf\u4e86\u4ec0\u4e48",facade.getComponent("GameModel")),null==n&&(n=0),null==i&&(i=0),i>=o&&(this.doubleBtn.active=!1,this.normalBtn.active=!1),0==n?(this.title.string="\u7b2c1\u5929",t=1):(t=n%7==0?7:n%7,i<o&&(t=7==t?1:t+1),this.title.string="\u7b2c"+t+"\u5929"),7==t&&(o>i?(this.sDayNow.active=!0,this.sDayIsGet.active=!1):(this.sDayNow.active=!1,this.sDayIsGet.active=!0)),this.doubleBtn.active=o>i,this.normalBtn.active=o>i,console.log("\u770b\u770b\u91cc\u9762\u6709\u4ec0\u4e48",t,e);for(var a=0;a<e.length-1;a++){var s=cc.instantiate(this.item);s.getComponent("SigninItem").initData(e[a],t),s.parent=this.content,s.opacity=0,s.scaleY=0,console.log("\u521d\u59cb\u6570\u636e\u7684\u65f6\u5019",a,e[a],t)}this.sDayNum.string="x"+e[e.length-1].AwardNum;var c="";switch(e[e.length-1].AwardType){case 1:c="cash";break;case 2:c="strength";break;case 3:c="video",this.sDayNum.node.active=!1;break;case 4:c="skin",this.sDayNum.node.active=!1,cc.loader.loadRes("roles",cc.SpriteAtlas,this.updateSkin.bind(this))}this.sDayImg.getChildByName(c).active=!0,this.reward=e[t-1],this.sDayReward=e[6],this.doAction()},doAction:function(){this.title.node.runAction(cc.moveBy(.3,cc.v2(-500,0)).easing(cc.easeInOut(3))),this.uiName.runAction(cc.moveBy(.3,cc.v2(500,0)).easing(cc.easeInOut(3)));for(var e=cc.spawn(cc.fadeIn(.3),cc.scaleTo(.3,1).easing(cc.easeIn(3))),t=(cc.spawn(cc.fadeIn(.3),cc.scaleTo(.3,1).easing(cc.easeIn(3))),[]),n=[],i=this.content.children,o=0;o<i.length;o++)o<3?t.push(i[o]):n.push(i[o]);this.count=1,this.actId=setInterval(function(){if(4!=this.count){if(3==this.count)return this.sDayIsGet.parent.runAction(e.clone()),void this.count++;var i=2==this.count?n:t;for(var o in i)i[o].runAction(e.clone());this.count++}else clearInterval(this.actId)}.bind(this),250);var a=cc.sequence(cc.delayTime(1.5),cc.callFunc(function(){this.doubleBtn.active=!0,this.doubleBtn.runAction(cc.sequence(cc.rotateTo(.05,-7),cc.rotateTo(.1,7),cc.rotateTo(.05,0),cc.rotateTo(.05,-7),cc.rotateTo(.1,7),cc.rotateTo(.05,0)))},this),cc.delayTime(2),cc.callFunc(function(){this.normalBtn.active=!0},this));this.node.runAction(a),console.log("this.doubleBtn",this.doubleBtn)},setupShare:function(){2!=facade.getComponent("ShareADModel").getShareADType()?this.doubleBtn.getChildByName("video").active=!0:this.doubleBtn.getChildByName("share").active=!0},updateSkin:function(e,t){if(e)console.error(e);else{var n=t.getSpriteFrame("MrBullet_Role_Body_0"+this.sDayReward.AwardNum);this.sDayImg.getChildByName("skin").getChildByName("head").getComponent(cc.Sprite).spriteFrame=n}},onClickNormalGet:function(){facade.getComponent("GameModel").applySignReward(!1,this.reward)},onClickDoubleGet:function(){o.getInstance().gameMode=this,i.getInstance().showVideoAds("getDoubleSignIn")},onClickDoubleGetFunc:function(){console.log("\u4e03\u65e5\u767b\u9646 \u5206\u4eab/\u89c6\u9891:"),facade.getComponent("GameModel").applySignReward(!0,this.reward),window.popUp.getComponent("Pop").removeTop()},onClickClose:function(){popUp.getComponent("Pop").removeTop()},doClose:function(){console.log("\u5173\u95ed\u7b7e\u5230\u9875\u9762");var e=cc.scaleTo(.2,1.4);this.sDayIsGet.parent.runAction(e.clone());var t=this.content.children;for(var n in t)t[n].runAction(e.clone());this.doubleBtn.runAction(e.clone()),this.title.node.runAction(e.clone()),this.uiName.runAction(e.clone())}}),cc._RF.pop()},{AdsSingleton:"AdsSingleton",Singleton:"Singleton",VirBannerCtrl:"VirBannerCtrl"}],SigninItem:[function(e,t,n){"use strict";cc._RF.push(t,"ce226vSGbNOUazJPrIKRQLw","SigninItem"),cc.Class({extends:cc.Component,properties:{now:cc.Node,isGet:cc.Node,day:cc.Label,rewardNode:cc.Node,rewardCount:cc.Label},initData:function(e,t){this.curDay=t,this.mainData=e},start:function(){var e=Math.floor(facade.getComponent("GameModel").lastFetchSignInTime/86400/1e3),t=Math.floor(facade.getComponent("GameModel").getLocalTime()/86400/1e3);this.now.active=!1,this.isGet.active=this.curDay>this.mainData.Day,this.curDay==this.mainData.Day&&(e<t?(this.now.active=!0,this.isGet.active=!1):e==t&&(this.now.active=!1,this.isGet.active=!0)),this.day.string="\u7b2c"+this.mainData.Day+"\u5929",this.rewardCount.string="x"+this.mainData.AwardNum;var n="";switch(this.mainData.AwardType){case 1:n="cash";break;case 2:n="strength";break;case 3:n="video",this.rewardCount.node.active=!1;break;case 4:n="skin",this.rewardCount.node.active=!1,cc.loader.loadRes("roles",cc.SpriteAtlas,this.updateSkin.bind(this))}this.rewardNode.getChildByName(n).active=!0},updateSkin:function(e,t){if(e)console.error(e);else{var n=this;cc.loader.loadRes("m_picture/roleFull/role"+this.mainData.AwardNum,cc.SpriteFrame,function(e,t){n.rewardNode.getChildByName("skin").getChildByName("head").getComponent(cc.Sprite).spriteFrame=t}),cc.loader.loadRes("m_picture/roleFull/role"+this.mainData.AwardNum+"_hand",cc.SpriteFrame,function(e,t){n.rewardNode.getChildByName("skin").getChildByName("New Sprite").getComponent(cc.Sprite).spriteFrame=t})}}}),cc._RF.pop()},{}],Singleton:[function(e,t,n){"use strict";cc._RF.push(t,"b0234VRZ4dK8Iu/2mSKQ9uE","Singleton");var i=cc.Class({platform:null,gameType:null,musicPlay:null,bgMusicPlay:null,allCoin:null,allFuKa:null,allDiamond:null,allBlood:null,hightestLevel:null,currentScore:null,ads_Open:null,gameLastTime:null,hightest:null,homeSceneName:null,canvasScript:null,fixNodeScript:null,videoPath:null,praiseType:null,isShareRecordVideo:null,shareVideoTimes:null,shareChallengeTimes:null,dangerRemindTimes:null,stageNum:null,stageAllData:null,stageData:null,recordData:null,gameMode:null,currentBannerBaseHeight:null,currentBannerRate:null,screenWidth:null,screenHeight:null,appName:null,shareBeforeTime:null,wx_sharePraiseType:null,safeTime:null,isSafeTime:function(){var e=Date.parse(new Date);return Date.parse(new Date(this.safeTime.replace(/-/g,"/")))<e},numToUnit:function(e){var t=this.scientificNotationToString(e),n=t.toString().length;if(n<4)return t;var i=Math.floor(n/3);return 0==Math.floor(n%3)&&(i-=1),(t/Math.pow(1e3,i)).toFixed(2)+["K","M","G","B","T","aa","ab","ac","ad","ae","af","ag","ah","ai"][i-1]},scientificNotationToString:function(e){var t=String(e);if(!/e/.test(t))return e;var n=!0;/e-/.test(t)&&(n=!1);var i=Number(t.match(/\d+$/)[0]),o=t.match(/^[\d\.]+/)[0].replace(/\./,"");return n?o.padEnd(i+1,0):o.padStart(i+o.length,0).replace(/^0/,"0.")},audioPlay:function(e,t){"yes"==this.musicPlay&&cc.audioEngine.play(e,!1,t)},bgAudioPlay:function(e,t){"yes"==this.bgMusicPlay&&cc.audioEngine.play(e,!0,t)},gainCoin:function(e){console.log("\u589e\u52a0\u91d1\u5e01ddddd",e),this.allCoin=Number(this.allCoin)+Number(e),cc.sys.localStorage.setItem("allCoin",this.allCoin),this.setTipLabelAppear("\u91d1\u5e01 +"+e),null!=cc.find("Canvas").getChildByName("confirmNode")&&(cc.find("Canvas").getChildByName("confirmNode").getChildByName("bg").getChildByName("board").getChildByName("allCoinLabel").getComponent(cc.Label).string=this.allCoin),this.fixNodeScript.node.getChildByName("coinNode").getComponent("CoinAnimScript").playCoinAnim()},gainDiamond:function(e){this.allDiamond=Number(this.allDiamond)+Number(e),cc.sys.localStorage.setItem("allDiamond",this.allDiamond),this.setTipLabelAppear("\u94bb\u77f3 +"+e),null!=cc.find("Canvas").getChildByName("confirmNode")&&(cc.find("Canvas").getChildByName("confirmNode").getChildByName("bg").getChildByName("board").getChildByName("allCoinLabel").getComponent(cc.Label).string=this.allDiamond),this.fixNodeScript.node.getChildByName("coinNode").getComponent("CoinAnimScript").playCoinAnim()},reduceCoin:function(e){var t;return this.allCoin<e?(t="\u91d1\u5e01\u4e0d\u8db3",this.setTipLabelAppear(t),!1):(this.allCoin=Number(this.allCoin)-Number(e),cc.sys.localStorage.setItem("allCoin",this.allCoin),t="\u91d1\u5e01 -"+e,this.setTipLabelAppear(t),cc.find("Canvas").getChildByName("confirmNode").getChildByName("bg").getChildByName("board").getChildByName("allCoinLabel").getComponent(cc.Label).string=this.allCoin,console.log("\u91d1\u5e01\u51cf\u5c11"),!0)},coinNumIncreaseAnim:function(e,t){var n=0,i=cc.sequence(cc.delayTime(.6),cc.repeat(cc.sequence(cc.callFunc(function(){n++,e.getComponent(cc.Label).string=n,this.audioPlay(this.fixNodeScript.clickMusic),n==t&&this.gainCoin(t)},this),cc.delayTime(.1)),t));cc.find("Canvas").runAction(i)},setTipLabelAppear:function(e){cc.find("Canvas").getComponent("MainUI")&&(console.log("\u663e\u793a\u4e00"),cc.find("Canvas").getComponent("MainUI").showTip(e))},giftCome:function(){},s_to_hs:function(e){var t;return t=Math.floor(e/60),e%=60,e+="",(t=1==(t+="").length?"0"+t:t)+":"+(e=1==e.length?"0"+e:e)},doShare:function(e,t){return window.tt?(console.log("\u662f\u5934\u6761\u5e73\u53f0"),void this.ttShareFunc(e,t)):window.qq?(console.log("\u662fQQ\u5e73\u53f0"),void this.qqShareFunc(e,t)):CC_WECHATGAME?(console.log("\u662f\u5fae\u4fe1\u5e73\u53f0"),void this.wxShareFunc(e,t)):void 0},ttShareFunc:function(e,t){var n=this;this.movieRecorder=tt.getGameRecorderManager(),console.log("\u5934\u6761\u5206\u4eab",this.movieRecorder,this.gameType),100==this.gameType&&(console.log("\u5f00\u59cb\u5206\u4eab",e,t,this.gameType),tt.shareAppMessage({channel:e,title:"\u5f00\u62a2\u5427,\u6211\u63a5\u5f97\u4f4f!",imageUrl:"",query:"",extra:{videoPath:i.getInstance().videoPath,videoTopics:["\u6700\u67aa\u738b\u8005"]},success:function(){if(console.log("\u5206\u4eab\u89c6\u9891\u6210\u529f",e,t),"article"==e){if(n.shareChallengeTimes++,n.shareChallengeTimes>1)return void n.setTipLabelAppear("\u5206\u4eab\u6210\u529f!")}else if("video"==e)n.getPropSuccessFunc(t);else if("token"==e);else if(""==e&&(n.shareChallengeTimes++,n.shareChallengeTimes>1))return void n.setTipLabelAppear("\u5206\u4eab\u6210\u529f!")},fail:function(e){n.setTipLabelAppear("\u6ca1\u6709\u5206\u4eab\u6210\u529f\u54e6!"),console.log("\u6ca1\u6709\u5206\u4eab\u6210\u529f")}}))},wxShareFunc:function(e,t){switch(this.shareBeforeTime=(new Date).getTime(),this.wx_sharePraiseType=t,this.gameType){case 1:wx.shareAppMessage({title:"\u6570\u5b57\u5408\u6210\u6015\u8fc7\u8c01,\u5feb\u6765\u6311\u6218\u6211!",imageUrl:"res/timg.png"}),wx.onShareAppMessage(function(){return{title:"\u6570\u5b57\u5408\u6210\u5927\u96c6\u5408",imageUrl:canvas.toTempFilePathSync({destWidth:500,destHeight:400})}});break;case 30:case 31:wx.shareAppMessage({title:"\u5fae\u4fe1\u60ca\u73b0\u7206\u706b\u7684\u6ce1\u6ce1\u9f99,\u5feb\u6765\u6311\u6218\u6211!",imageUrl:"res/timg.png"}),wx.onShareAppMessage(function(){return{title:"\u6ce1\u6ce1\u9f99",imageUrl:canvas.toTempFilePathSync({destWidth:500,destHeight:400})}});break;default:wx.shareAppMessage({title:"\u8bc4\u52069.7\u7684\u6e38\u620f, \u80fd\u8fc7\u5230\u7b2c\u4e09\u5173\u7684\u4eba\u6ca1\u51e0\u4e2a",imageUrl:"res/timg.png"}),wx.onShareAppMessage(function(){return{title:"\u5f53\u4e0b\u6700\u6d41\u884c\u7684\u5c0f\u6e38\u620f",imageUrl:canvas.toTempFilePathSync({destWidth:500,destHeight:400})}})}},qqShareFunc:function(e,t){switch(this.shareBeforeTime=(new Date).getTime(),this.wx_sharePraiseType=t,this.gameType){case 1:case 30:break;case 32:qq.shareAppMessage({title:"2019\u5e74\u60ca\u73b0\u7206\u706b\u7684\u6ce1\u6ce1\u9f99,\u5feb\u6765\u6311\u6218\u6211!",imageUrl:"res/timg.png"}),qq.onShareAppMessage(function(){return{title:"\u6ce1\u6ce1\u9f99",imageUrl:canvas.toTempFilePathSync({destWidth:500,destHeight:400})}});break;default:qq.shareAppMessage({title:"\u8bc4\u52069.7\u7684\u6e38\u620f, \u80fd\u8fc7\u5230\u7b2c\u4e09\u5173\u7684\u4eba\u6ca1\u51e0\u4e2a",imageUrl:"res/timg.png"}),qq.onShareAppMessage(function(){return{title:"\u5f53\u4e0b\u6700\u6d41\u884c\u7684\u5c0f\u6e38\u620f",imageUrl:canvas.toTempFilePathSync({destWidth:500,destHeight:400})}})}},doShareRecordVideo:function(){cc.find("Canvas").getChildByName("TTGameRecordManager").getComponent("TTGameRecordManagerScript").shareRecordVideoClick(),console.log("\u5206\u4eab\u6ce1\u6ce1\u9f99\u89c6\u9891")},getPropSuccessFunc:function(e){console.log("\u9053\u5177\u83b7\u53d6\u6210\u529f",this.gameType,e),"getFreeCash"==e?cc.find("Canvas")&&cc.find("Canvas").getComponent("MainUI").getFreeCashFunc():"getFreeEnergy"==e?cc.find("Canvas")&&cc.find("Canvas").getComponent("MainUI").getFreeEnergyFunc():"getDoubleSignIn"==e?this.gameMode.onClickDoubleGetFunc():"doShare"==e?(console.log("\u5206\u4eab\u5f55\u5c4f\u7684\u56de\u8c03"),this.gameMode.shareBtn.active=!1,this.gameMode.shareVideoNode.active=!1,window.facade.getComponent("GameModel").rewardEnergy(5),this.setTipLabelAppear("\u83b7\u5f97\u80fd\u91cf+5")):"doRetryNoEnergyVideo"==e?i.getInstance().gameMode.doRetryFunc():"onDouble"==e?(console.log("\u4e94\u500d\u9886\u53d61",i.getInstance().gameMode),i.getInstance().gameMode.onDoubleFunc()):"onTake3Star"==e?i.getInstance().gameMode.onTake3StarFunc():"skip"==e?i.getInstance().gameMode.skipFunc():"watchVideo"==e?i.getInstance().gameMode.watchVideoFunc():"watchACharacter"==e?window.facade.getComponent("GameModel").watchACharacterFunc():"levelWatchVideo"==e?i.getInstance().gameMode.levelWatchVideoFunc():"AdvanceView"==e?i.getInstance().gameMode.takeAwardSuccess():"BackEnergyView"==e?i.getInstance().gameMode.backEnergyViewFunc():"energyNeedView"==e?i.getInstance().gameMode.energyNeedViewFunc():"GetThreeStarView"==e?i.getInstance().gameMode.confirmFunc():"NewerView"==e?i.getInstance().gameMode.takeAwardSuccess():"SkipPanel"==e&&i.getInstance().gameMode.skipFunc()},readData:function(e){return this.stageAllData[e]},calcluteAdsRate:function(){this.screenWidth=cc.view.getVisibleSize().width,this.screenHeight=cc.view.getVisibleSize().height,this.physicsWidth=cc.view.getFrameSize().width,this.physicsHeight=cc.view.getFrameSize().height,this.physicsWidth/this.screenWidth<=this.physicsHeight/this.screenHeight?this.currentBannerRate=this.screenWidth/this.physicsWidth:this.currentBannerRate=this.screenHeight/this.physicsHeight,this.screenRate=this.physicsHeight/this.physicsWidth,this.screenRate>1334/750&&(this.screenHeight=this.physicsHeight/this.physicsWidth*750),console.log("\u5355\u5229\u5206\u8fa8\u7387",this.currentBannerRate)},creatPrefab:function(e,t,n){var i=cc.instantiate(e);return i.parent=t,i.setPosition(n),i.active=!0,i},creatOtherGames:function(e,t){this.creatPrefab(this.canvasScript.otherGamesPre,e,t)},creatMoreGameBtn:function(e,t){"Toutiao"!=this.appName&&"Douyin"!=this.appName&&"news_article_lite"!=this.appName||window.tt&&window.tt.createMoreGamesButton&&(this.moreGameBtn=tt.createMoreGamesButton({type:"image",image:"res/moreGameBtn.png",style:{left:e,top:t,width:60,height:60,lineHeight:40,backgroundColor:"#ff0000",textColor:"#ffffff",textAlign:"center",fontSize:16,borderRadius:0,borderWidth:0,borderColor:"#ff0000"},appLaunchOptions:[{appId:"tt41bc3701de96f690",query:"foo=bar&baz=qux",extraData:{}},{appId:"tt833ff5821c150f08",query:"foo=bar&baz=qux",extraData:{}},{appId:"tt83fef5431cd437b6",query:"foo=bar&baz=qux",extraData:{}}],onNavigateToMiniGame:function(e){console.log("\u8df3\u8f6c\u5176\u4ed6\u5c0f\u6e38\u620f",e)}}),this.moreGameBtn.onTap(function(){console.log("\u70b9\u51fb\u66f4\u591a\u6e38\u620f")}))},get_time_diff_string:function(e){var t="",n=(new Date).getTime()-e,i=Math.floor(n/864e5);i>0&&(t+=i+"\u5929");var o=n%864e5,a=Math.floor(o/36e5);a>0?t+=a+"\u5c0f\u65f6":""!==t&&(t+=a+"\u5c0f\u65f6");var s=o%36e5,c=Math.floor(s/6e4);c>0?t+=c+"\u5206":""!==t&&(t+=c+"\u5206");var r=s%6e4,l=Math.round(r/1e3);return l>0?t+=l+"\u79d2":""!==t&&(t+=l+"\u79d2"),t},get_time_diff_second:function(e){var t="",n=(new Date).getTime()-e,i=Math.round(n/1e3);return i>0?t+=i:""!==t&&(t+=i),t},get_time_diff_day:function(e){var t=(new Date).getTime()-e,n=Math.floor(t/864e5)},checkAndCreatFollowButton:function(e,t){var n=this;window.tt&&tt.checkFollowState({success:function(i){console.log(i.result),1==i.result?console.log("\u5173\u6ce8\u8fc7"):(console.log("\u6ca1\u5173\u6ce8\u8fc7"),n.creatFollowButton(e,t))},fail:function(e){console.log("\u8c03\u7528\u5931\u8d25",e)}})},creatFollowButton:function(e,t){var n=this;window.tt&&window.tt.createFollowButton&&(n.followBtn=tt.createFollowButton({type:"image",image:"res/follow.png",style:{left:e,top:t,width:130,height:50,lineHeight:40,backgroundColor:"#ff0000",textColor:"#ffffff",textAlign:"center",fontSize:16,borderRadius:0,borderWidth:0},data:{}}),n.followBtn.onTap(function(e){0===e.errCode&&(cc.find("Canvas").getChildByName("FocusLayer")&&cc.find("Canvas").getChildByName("FocusLayer").destroy(),n.followBtn.destroy())}))},videoRecordStart:function(){if(window.tt){var e=cc.sequence(cc.delayTime(1),cc.callFunc(function(){tt.getGameRecorderManager().onStop(function(e){console.log("\u5f55\u5c4f\u7ed3\u675f"),i.getInstance().videoPath=e.videoPath}),window.tt&&tt.getGameRecorderManager().start({duration:60})},this));cc.find("Canvas").runAction(e)}else if(window.baidu){e=cc.sequence(cc.delayTime(1),cc.callFunc(function(){var e=swan.getVideoRecorderManager();e.start({duration:60}),e.onStop(function(e){console.log("\u767e\u5ea6\u5f55\u5c4f\u7ed3\u675f",e.videoPath),i.getInstance().videoPath=e.videoPath})},this));cc.find("Canvas").runAction(e)}},videoRecordStop:function(){if(window.tt)1==tt.getGameRecorderManager()._recording&&(i.getInstance().isShareRecordVideo=!1,tt.getGameRecorderManager().stop());else if(window.baidu){swan.getVideoRecorderManager().stop()}},videoRecordShare:function(){},ctor:function(){this.platform="",this.gameType=0,this.musicPlay="yes",this.bgMusicPlay="yes",this.allCoin=0,this.allFuKa=0,this.allDiamond=0,this.allBlood=0,this.hightestLevel=0,this.currentScore=0,this.gameLastTime=0,this.hightest=0,this.canvasScript="",cc.find("FixNode")&&(this.fixNodeScript=cc.find("FixNode").getComponent("FixNodeScript")),this.videoPath="",this.praiseType="",this.isShareRecordVideo=!1,this.shareVideoTimes=0,this.shareChallengeTimes=0,this.dangerRemindTimes=0,this.stageNum=0,this.stageAllData="",this.stageData="",this.recordData="",this.gameMode="",this.currentBannerBaseHeight=120,this.currentBannerRate=1,this.screenWidth=0,this.screenHeight=0,this.shareBeforeTime=0,this.wx_sharePraiseType="",this.safeTime="2019-09-08 16:56:00",this.ads_Open=!0,this.appName="",this.homeSceneName="S_2048liujiaoxiaochu"}});i._instance=null,i.getInstance=function(){if(!i._instance){i._instance=new i,i._instance.calcluteAdsRate();this.platform="baidu",window.tt?tt.getSystemInfo({success:function(e){i.getInstance().appName=e.appName,console.log("\u83b7\u53d6\u7cfb\u7edf\u4fe1\u606f\u6210\u529f",i.getInstance().appName)},fail:function(e){console.log("\u83b7\u53d6\u7cfb\u7edf\u4fe1\u606f\u5931\u8d25")}}):CC_WECHATGAME?wx.onShow(function(e){if(Number(i.getInstance().get_time_diff_second(i.getInstance().shareBeforeTime))>=3)""==i.getInstance().wx_sharePraiseType||(console.log("\u6b63\u5e38\u5206\u4eab"),i.getInstance().getPropSuccessFunc(i.getInstance().wx_sharePraiseType));else{Math.floor(5*Math.random());i.getInstance().setTipLabelAppear("\u5206\u4eab\u5931\u8d25")}i.getInstance().wx_sharePraiseType=""}):window.qq&&qq.onShow(function(e){Number(i.getInstance().get_time_diff_second(i.getInstance().shareBeforeTime))>=3?""==i.getInstance().wx_sharePraiseType||(console.log("\u6b63\u5e38\u5206\u4eab"),i.getInstance().getPropSuccessFunc(i.getInstance().wx_sharePraiseType)):i.getInstance().setTipLabelAppear("\u5206\u4eab\u5931\u8d25"),i.getInstance().wx_sharePraiseType=""})}return i._instance},t.exports=i,cc._RF.pop()},{}],SkinPanel:[function(e,t,n){"use strict";cc._RF.push(t,"cd0bcDc5epDureK6lVcTz12","SkinPanel");var i=e("AdsSingleton");e("Singleton");cc.Class({extends:cc.Component,properties:{recommendPre:cc.Prefab},onLoad:function(){},onEnable:function(){"qq"!=net.platformName?cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1e4:facade.getComponent("BannerModel").showBanner(),i.getInstance().stopRepeatBanner(),i.getInstance().showBannerAds()},start:function(){},init:function(){this.inited=!0},onClose:function(){cc.director.getScene().getChildByName("Canvas").getComponent("MainUI").hideSkinPanel()},onDisable:function(){this.inited=!1,"qq"!=net.platformName?(cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1,cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").active=!0):facade.getComponent("BannerModel").hideBanner(),window.tt?(i.getInstance().initOneBanner("bottom"),i.getInstance().destroyTableScreen()):i.getInstance().createBannerAds("bottom",60)},update:function(e){this.node.active&&!this.inited&&this.init()}}),cc._RF.pop()},{AdsSingleton:"AdsSingleton",Singleton:"Singleton"}],SkipPanel:[function(e,t,n){"use strict";cc._RF.push(t,"55030g5ChdKTIn/5UiCpRGa","SkipPanel");var i=e("ModuleEventEnum"),o=e("AdsSingleton"),a=e("Singleton");cc.Class({extends:cc.Component,properties:{skipButton:cc.Sprite,skipByShareSkin:cc.SpriteFrame,skipByVedioSkin:cc.SpriteFrame,recommendPre:cc.Prefab},onLoad:function(){},start:function(){},onEnable:function(){cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1e4},initRecommond:function(){},init:function(){this.rewardType=window.facade.getComponent("ShareADModel").getShareADType(),2!=this.rewardType?this.skipButton.spriteFrame=this.skipByVedioSkin:this.skipButton.spriteFrame=this.skipByShareSkin,this.initRecommond()},hide:function(){this.node.parent.getComponent("LevelUI").hideSkip()},onDisable:function(){this.inited=!1,cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").zIndex=1,cc.director.getScene().getChildByName("Canvas").getChildByName("recommendBar").active=!0},skip:function(){if(!facade.isMiniGame)return this.hide(),void cc.systemEvent.emit(i.SKIP);this.rewardType>2?popUp.getComponent("FloatTip").showTip("\u5df2\u7ecf\u8d85\u51fa\u4eca\u5929\u7684\u8df3\u5173\u4e0a\u9650\u5566\uff01"):(a.getInstance().gameMode=this,o.getInstance().showVideoAds("SkipPanel"))},skipFunc:function(){this.hide(),cc.systemEvent.emit(i.SKIP)},update:function(e){}}),cc._RF.pop()},{AdsSingleton:"AdsSingleton",ModuleEventEnum:"ModuleEventEnum",Singleton:"Singleton"}],SoundManager:[function(e,t,n){"use strict";cc._RF.push(t,"90890qbQ4ZAzbJfXpRW4aCT","SoundManager"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){this._soundActive=!0,this.isPlayingBgm=!1,this._effectSources={},this._currentMusicVolume=100,this._loadEffectWaits=[]},playEffect:function(e,t,n){t||(t=!1),n||(n=100);var i="audio/"+e+".mp3";if(null==this._effectSources[i]){if(this._soundActive){var o={};o.file=i,o.isLoop=t,o.volume=n,this._loadEffectWaits.push(o)}}else{this._currentVolume=n;var a=cc.audioEngine.play(cc.loader.getRes(i),t,this._currentVolume/100);this._effectSources[i]=a}},loadBGMResCallBack:function(e,t){cc.audioEngine.stop(this.bgmId),this.bgmId=cc.audioEngine.play(t,!0,this._currentMusicVolume/300)},loadEffectResCallBack:function(e,t){this._isLoading=!1;var n=cc.audioEngine.play(t,!1,this._currentVolume/100);this._effectSources[this._currentFile]=n},stopEffect:function(e){var t="audio/"+e+".mp3";cc.audioEngine.stop(this._effectSources[t])},stopAllEffects:function(){for(var e in this._effectSources)cc.audioEngine.stop(this._effectSources[e]),cc.audioEngine.uncache(e),delete this._effectSources[e];this._effectSources={}},setBGM:function(e){if(this._currentBGMKey=e,this._soundActive){if(this._currentBGM==e)return void this.resumeBGM();var t="audio/"+e+".mp3";if(this._currentBGM==t)return void this.resumeBGM();this._currentBGM=t,cc.loader.loadRes(t,this.loadBGMResCallBack.bind(this)),this.isPlayingBgm=!0}},playBGM:function(){},resumeBGM:function(){if(this._soundActive)return null!=this.bgmId&&(this.isPlayingBgm=!0,cc.audioEngine.resume(this.bgmId),!0)},pauseBGM:function(){this.isPlayingBgm=!1,cc.audioEngine.pause(this.bgmId)},stopBGM:function(){this.isPlayingBgm=!1,cc.audioEngine.stop(this.bgmId),cc.audioEngine.uncache(this._currentBGM),this.bgmId=null},setBGMVolume:function(e){this._currentMusicVolume=e},stopAllSound:function(){this.stopAllEffects()},update:function(e){if(0!=this._loadEffectWaits.length&&1!=this._isLoading){var t=this._loadEffectWaits.shift();this._currentFile=t.file,this._currentLoop=t.isLoop,this._currentVolume=t.volume,cc.loader.loadRes(this._currentFile,this.loadEffectResCallBack.bind(this)),this._isLoading=!0}},setSoundEnabled:function(e){this._soundActive=e,e?this.resumeBGM()||(this._currentBGMKey?this.setBGM(this._currentBGMKey):"Game"==window.facade.CurrentScene&&(this._currentBGM=null,this.setBGM("Bgm"))):(this.pauseBGM(),this.stopAllEffects())}}),cc._RF.pop()},{}],SoundSwitch:[function(e,t,n){"use strict";cc._RF.push(t,"c5144yKuW9O4KuGYiJAD6x1","SoundSwitch"),cc.Class({extends:cc.Component,properties:{skinOn:cc.SpriteFrame,skinOff:cc.SpriteFrame},onLoad:function(){this._soundSwitch=!0;var e=cc.sys.localStorage.getItem("Shooter_Sound");this._soundSwitch=!e||"true"==e,this.updateStatus()},start:function(){},trigger:function(){if(facade.FOR_DEVELOP){var e={game_id:window.facade.GameId,token:window.facade.getComponent("PlayerModel").token,record_type:2,record:"{}"};window.net.getComponent("Net").httpRequest(window.net.SaveRecord,e);var t={game_id:window.facade.GameId,token:window.facade.getComponent("PlayerModel").token,record_type:1,record:"{}"};window.net.getComponent("Net").httpRequest(window.net.SaveRecord,t);var n={game_id:window.facade.GameId,token:window.facade.getComponent("PlayerModel").token,record_type:3,record:"{}"};window.net.getComponent("Net").httpRequest(window.net.SaveRecord,n)}this._soundSwitch=!this._soundSwitch,this.updateStatus();var i=this._soundSwitch?"true":"false";cc.sys.localStorage.setItem("Shooter_Sound",i)},updateStatus:function(){audio.getComponent("SoundManager").setSoundEnabled(this._soundSwitch)},update:function(e){this.node.getComponent(cc.Sprite).spriteFrame=this._soundSwitch?this.skinOn:this.skinOff}}),cc._RF.pop()},{}],Start:[function(e,t,n){"use strict";cc._RF.push(t,"55616u2pOBPmphrfhKinP2i","Start");var i=e("GameConfig");cc.Class({extends:cc.Component,properties:{platformList:{default:[],type:cc.String},facade:cc.Node,soundInstance:cc.Node,net:cc.Node,popUp:cc.Node,texturemanager:cc.Node,guidemanager:cc.Node},onLoad:function(){for(var t in cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().gravity=cc.v2(0,-300),window.facade=this.facade,window.audio=this.soundInstance,window.net=this.net,window.textureManager=this.texturemanager,window.popUp=this.popUp,window.net.platformName="",window.net.checkName="",window.facade.isMiniGame=!("wx"!=i.PLATFORM),this.platformList){var n=this.platformList[t].split(","),o=n[0];if(null!=window[""+o]){window.net.platformName=o,window.net.checkName=n[1],console.log("\u5f53\u524d\u5e73\u53f0\uff1a ",window.net.platformName);break}}cc.view.enableRetina(!0),cc.view.enableAntiAlias(!1),window.pool=e("Pool"),cc.game.addPersistRootNode(this.facade),cc.game.addPersistRootNode(this.soundInstance),cc.game.addPersistRootNode(this.net),cc.game.addPersistRootNode(this.popUp),cc.game.addPersistRootNode(this.texturemanager),window.facade.addComponent("GameModel"),window.facade.addComponent("LevelModel"),window.facade.addComponent("PlayerModel"),window.facade.addComponent("RecommendGameModel"),window.facade.addComponent("RewardCPAModel"),window.facade.addComponent("ShareADModel"),window.facade.addComponent("BannerModel"),window.facade.addComponent("RankModel"),window.facade.addComponent("InterstitialADModel"),this.doStart()},doStart:function(){cc.director.setClearColor((new cc.Color).fromHEX("#758F89")),this.initModules();var e=cc.sequence(cc.fadeOut(.05),cc.callFunc(this.gogame.bind(this)));this.node.runAction(e)},gogame:function(){var t=e("ModuleEventEnum");cc.systemEvent.emit(t.GO_GAME)},initModules:function(){window.facade.modules={};var t=e("MConfig");for(var n in t){var i=t[n].key,o=e(i);o.init(),window.facade.modules[i]=o}}}),cc._RF.pop()},{GameConfig:"GameConfig",MConfig:"MConfig",ModuleEventEnum:"ModuleEventEnum",Pool:"Pool"}],Sun:[function(e,t,n){"use strict";cc._RF.push(t,"308cd9kKHlJKZlOXLpMgn21","Sun"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){this.node.active=!1},update:function(e){this.node.angle+=10}}),cc._RF.pop()},{}],Switch:[function(e,t,n){"use strict";cc._RF.push(t,"1c411JC1bhFP4pXKBIpeLlX","Switch");e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{target:cc.Node},onLoad:function(){},start:function(){this.offSKin=this.node.getComponent(cc.Sprite).spriteFrame.name,this.onSKin=this.offSKin.replace("01","02"),cc.loader.getRes("roles",cc.SpriteAtlas)?this.rolesAtlas=cc.loader.getRes("roles",cc.SpriteAtlas):cc.loader.loadRes("roles",cc.SpriteAtlas)},onBeginContact:function(e,t,n){this.rolesAtlas||(this.rolesAtlas=cc.loader.getRes("roles",cc.SpriteAtlas)),"switch"==t.node.group&&"border"!=n.node.group&&(e.disabled=!0,this.node.getComponent(cc.Sprite).spriteFrame=this.rolesAtlas.getSpriteFrame(this.onSKin),this.trigger(n.node))},trigger:function(e){if(1!=this.trigged){this.trigged=!0;for(var t=cc.find("Canvas").getChildByName("levelPlay"),n=0;n<t.children.length;n++){var i=t.children[n];this.node.type==i.type&&"boom"==i.group?i.getComponent("Boom").explosive():this.node.type==i.type&&"magic"==i.group&&i.getComponent("Magic").trigger()}}},onPreSolve:function(e,t,n){},update:function(e){}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],TextureLabel:[function(e,t,n){"use strict";cc._RF.push(t,"31c70P6ot5IfYTpMb8m1Erf","TextureLabel"),cc.Class({extends:cc.Component,properties:{color:"y"},onLoad:function(){},start:function(){},setText:function(e){this._word!=e&&(this._word=e,cc.loader.getRes("uis",cc.SpriteAtlas)?this.createWord():cc.loader.loadRes("uis",cc.SpriteAtlas,this.loaded.bind(this)))},loaded:function(){this.createWord()},createWord:function(){this.node.removeAllChildren();for(var e=this._word.split(""),t=e.length-1;t>=0;t--){var n=new cc.Node,i=e[t];"+"==i?i="plus":"/"==i?i="split":":"==i&&(i="colon");var o=cc.loader.getRes("uis",cc.SpriteAtlas);n.addComponent(cc.Sprite).spriteFrame=o.getSpriteFrame("n"+this.color+"_"+i),n.color=this.node.color,this.node.addChild(n)}}}),cc._RF.pop()},{}],TextureManager:[function(e,t,n){"use strict";cc._RF.push(t,"9ef34pSkLJDzKHeFJ2vVe83","TextureManager"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this._lib={},this._curKey="",this._loadedUrls={},this.resLoadings=[],this.altasLoadings=[],this.spineLoadings=[],this._loadedSpineUrls=[],this._loadedFloorBgs=[],this._loadedDecos=[],this.resLoadingIndex=0,this.spineCallback},setCurKey:function(e){this._curKey=e},getCurKey:function(){return this._curKey},updateGameTexture:function(e,t,n){this.updateTexture(this._curKey,t,e,n)},updateTexture:function(e,t,n,i,o,a){var s=void 0,c=void 0,r=void 0,l=void 0,h=void 0;this._lib[e]||((s=this._lib[e]={}).urls=[],s.textures=[],s.refs={},s.sfs={}),c=this._lib[e].urls,r=this._lib[e].textures,l=this._lib[e].refs,h=this._lib[e].sfs,l[n]=t,c.indexOf(t)<0&&(c[c.length]=t),console.log("start load image:",t),cc.loader.load({url:t,type:"png"},function(s,c){if(!s){if(!this._lib[e])return cc.loader.release(t),void c.releaseTexture();if(console.log("texture loaded image:",t),r.indexOf(c)<0&&(r[r.length]=c),t===l[n]){var d=new cc.SpriteFrame;d.setTexture(c),i&&(i.spriteFrame=d,i.node.width>=i.node.height?null!=o&&i.node.width>o&&(i.node.scale=o/i.node.width):null!=a&&i.node.height>a&&(i.node.scale=a/i.node.height)),h[n]=d}}}.bind(this))},getGameTexture:function(e,t,n){this.getTexture(this._curKey,t,e,n)},getTexture:function(e,t,n,i,o,a){if(!this._lib[e]||!this._lib[e].sfs||!this._lib[e].sfs[n])return t?void this.updateTexture(e,t,n,i,o,a):-1;i&&(i.spriteFrame=this._lib[e].sfs[n],i.node.width>=i.node.height?null!=o&&i.node.width>o&&(i.node.scale=o/i.node.width):null!=a&&i.node.height>a&&(i.node.scale=a/i.node.height))},loadTextureOneByOne:function(e,t,n,i){null==this._waitings&&(this._waitings=[]),e&&this._waitings.push({url:e,sp:t,wl:n,hl:i}),this._waitings.length<=0||this._inLoading||(this._inLoading=!0,cc.loader.load({url:this._waitings[0].url,type:"png"},function(e,t){if(!e){var n=new cc.SpriteFrame;if(n.setTexture(t),this._spriteFrameCache[this._waitings[0].url]=n,this._waitings[0].sp)this._waitings[0].sp.spriteFrame=n;this._waitings.shift(),this._inLoading=!1,setTimeout(this.loadTextureOneByOne.bind(this),100)}}.bind(this)))},getTextureOneByOne:function(e,t,n,i){if(this._spriteFrameCache||(this._spriteFrameCache={}),!this._spriteFrameCache[e])return e?void this.loadTextureOneByOne(e,t,n,i):-1;t&&t.node.parent&&(t.spriteFrame=this._spriteFrameCache[e],t.node.width>=t.node.height?null!=n&&t.node.width>n&&(t.node.scale=n/t.node.width):null!=i&&t.node.height>i&&(t.node.scale=i/t.node.height))},cancelSkeletonLoad:function(e){for(var t=0;t<this.spineLoadings.length;t++)this.spineLoadings[t].sk==e&&(this.spineLoadings.splice(t,1),t--)},formaSpineName:function(e){if(window.facade.deviceLow){var t=e.split("/");e=t[0]+"_low/"+t[1]+"_low"}return e},getResSpineForUI:function(e,t,n){this.spineCallback=n;for(var i=0;i<t.length;i++){var o=t[i],a=cc.find(o.ui,e),s=o.url;s=o.preloaded?"spine/"+s:"pre_spine/"+s,null!=a?this.getResSpine(s,a.getComponent(sp.Skeleton),o.initAnimate.split(","),i===t.length-1):console.error("node null:",o.ui)}},getResSpine:function(e,t,n,i){if(window.facade.deviceLow){var o=e.split("/");e=o[0]+"_low/"+o[1]+"_low"}if(cc.loader.getRes(e,sp.SkeletonData)){if(t.skeletonData=cc.loader.getRes(e,sp.SkeletonData),null!=n&&n.length>0)for(var a=0;a<n.length;a++)0==a?a+1==n.length?t.setAnimation(0,n[a],!0):t.setAnimation(0,n[a],!1):a+1==n.length?t.addAnimation(0,n[a],!0):t.addAnimation(0,n[a],!1);i&&this.spineCallback&&this.spineCallback.onResSucc()}else{var s=window.textureManager.getComponent("TextureManager").formaSpineName("spine/loading");t.skeletonData=cc.loader.getRes(s,sp.SkeletonData),t.premultipliedAlpha=!1,t.setAnimation(0,"yangchao",!0),t.node.originScale=t.node.scaleX,this.spineLoadings.push({url:e,sk:t,anis:n}),cc.loader.loadRes(e,sp.SkeletonData,this.gotSpine.bind(this))}},gotSpine:function(e,t){for(var n=0;n<this.spineLoadings.length;n++){var i=this.spineLoadings[n],o=cc.loader.getRes(i.url,sp.SkeletonData);if(o){if(i.sk.skeletonData=o,null!=i.anis&&i.anis.length>0)for(var a=0;a<i.anis.length;a++)0==a?a+1==i.anis.length?i.sk.setAnimation(0,i.anis[a],!0):i.sk.setAnimation(0,i.anis[a],!1):a+1==i.anis.length?i.sk.addAnimation(0,i.anis[a],!0):i.sk.addAnimation(0,i.anis[a],!1);this._loadedSpineUrls.push(i.url),this.spineLoadings.splice(n,1),i.sk.node.scale=i.sk.node.originScale,n--}n==this.spineLoadings.length-1&&this.spineCallback&&this.spineCallback.onResSucc()}},releaseAllResSpine:function(){var e=window.facade.getComponent("PlayerModel").roleInfo;if(e.character){for(var t=window.facade.getComponent("PlayerModel").starConfig[e.character].avatar,n=0;n<this._loadedSpineUrls.length;n++)this._loadedSpineUrls[n]=="character/"+t&&cc.loader.releaseRes(this._loadedSpineUrls[n],cc.SpriteAtlas);this._loadedSpineUrls=[]}},getAtlasTexture:function(e,t,n,i,o){cc.loader.getRes(e,cc.SpriteAtlas)?(n.spriteFrame=cc.loader.getRes(e,cc.SpriteAtlas).getSpriteFrame(t),n.node.width>=n.node.height?null!=i&&n.node.width>i&&(n.node.scale=i/n.node.width):null!=o&&n.node.height>o&&(n.node.scale=o/n.node.height)):(this.altasLoadings.push({url:t,sp:n,atlas:e,wl:i,hl:o}),cc.loader.loadRes(e,cc.SpriteAtlas,this.gotAltas.bind(this)))},gotAltas:function(e,t){for(var n=0;n<this.altasLoadings.length;n++){var i=this.altasLoadings[n],o=cc.loader.getRes(i.atlas,cc.SpriteAtlas).getSpriteFrame(i.url),a=i.wl,s=i.hl;o&&i.sp&&i.sp.node&&(i.sp.spriteFrame=o,i.sp.node.width>=i.sp.node.height?null!=a&&i.sp.node.width>a&&(i.sp.node.scale=a/i.sp.node.width):null!=s&&i.sp.node.height>s&&(i.sp.node.scale=s/i.sp.node.height),this.altasLoadings.splice(n,1),n--)}},getIconTexture:function(e,t,n,i,o){null==this.itemConfig&&(this.itemConfig=cc.loader.getRes("config/ItemDB"));var a="";null!=this.itemConfig[String(e)]&&this.itemConfig[String(e)].iconUrl?1==Number(this.itemConfig[String(e)].isIconRemote)?(a=window.facade.puzzleImgUrl+this.itemConfig[String(e)].iconUrl+".png",this.getTexture(a,a,a,t,n,o)):(a="item/"+this.itemConfig[String(e)].iconUrl,this.getResTexture(a,t,n,o)):("number"==typeof e&&(e=window.facade.PlayerAtrriKeys["res"+e]),"string"==typeof e&&e.length<2&&(e=window.facade.PlayerAtrriKeys["res"+Number(e)]),i&&(e+="_"+i),a="icon_"+e,"energy"==e&&(a="v2_"+a),this.getAtlasTexture("ui/common/main_and_common",a,t,n,o))},getResTexture:function(e,t,n,i,o){if(cc.loader.getRes(e)){if(null==t)return;t.spriteFrame=cc.loader.getRes(e,cc.SpriteFrame),t.node.width>=t.node.height?null!=n&&t.node.width>n&&(t.node.scale=n/t.node.width):null!=i&&t.node.height>i&&(t.node.scale=i/t.node.height)}else 0!=o&&t&&(t.node.opacity=0),this.resLoadings.push({url:e,sp:t,wl:n,hl:i}),this.resLoadingIndex++,cc.loader.loadRes(e,cc.SpriteFrame,this.gotResTexture.bind(this))},gotResTexture:function(e,t){for(var n=0;n<this.resLoadings.length;n++){var i=cc.loader.getRes(this.resLoadings[n].url,cc.SpriteFrame),o=this.resLoadings[n].wl;if(i&&this.resLoadings[n].sp&&this.resLoadings[n].sp.node){this.resLoadings[n].sp.spriteFrame=i;var a=this.resLoadings[n];a.sp.node.opacity=255;o=a.wl;var s=a.hl;a.sp.node.width>=a.sp.node.height?null!=o&&a.sp.node.width>o&&(a.sp.node.scale=o/a.sp.node.width):null!=s&&a.sp.node.height>s&&(a.sp.node.scale=s/a.sp.node.height),this._loadedUrls[this.resLoadings[n].url]=!0,this.resLoadings.splice(n,1),n--}}},getDecoTexture:function(e,t,n,i){this._loadedDecos.push(e),this.getResTexture(e,t,n,i)},getFloorBg:function(e,t){this._loadedFloorBgs.push(e),this.getResTexture(e,t,null,null,!1)},releaseAllFloorRes:function(){for(var e=0;e<this._loadedDecos.length;e++)cc.loader.releaseRes(this._loadedDecos[e],cc.SpriteFrame),cc.loader.releaseRes(this._loadedDecos[e],cc.Texture2D);this._loadedDecos=[];for(e=0;e<this._loadedFloorBgs.length;e++)cc.loader.releaseRes(this._loadedFloorBgs[e],cc.SpriteFrame),cc.loader.releaseRes(this._loadedFloorBgs[e],cc.Texture2D);this._loadedFloorBgs=[]},releaseAllResSprite:function(e){for(var e in this._loadedUrls)cc.loader.releaseRes(e,cc.SpriteFrame),cc.loader.releaseRes(e,cc.Texture2D);this._loadedUrls={}},releaseSprite:function(e){cc.loader.releaseRes(e,cc.SpriteFrame),cc.loader.releaseRes(e,cc.Texture2D)},release:function(e){if(this._lib[e]){var t,n,i=this._lib[e],o=void 0,a=void 0;for(i.refs=null,delete i.refs,i.sfs=null,delete i.sfs,a=i.textures,n=i.urls,t=a.length,o=0;o<t;++o)cc.loader.release(n[o]),a[o].releaseTexture();i.urls.length=0,delete i.urls,a.length=0,delete i.textures,this._lib[e]=null,delete this._lib[e]}},releaseGame:function(){this.release(this._curKey)}}),cc._RF.pop()},{}],TurnCricle:[function(e,t,n){"use strict";cc._RF.push(t,"82e21+CTvpFkKOVLTq8cHIi","TurnCricle"),cc.Class({extends:cc.Component,properties:{},start:function(){},update:function(e){this.node.angle++}}),cc._RF.pop()},{}],VirBannerCtrl:[function(e,t,n){"use strict";cc._RF.push(t,"510d3NBWGdKQr10RXkXiHL3","VirBannerCtrl");var i={inited:!1,curShowName:"",gameInfo:null,init:function(){this.inited=!0;var t=e("ModuleEventEnum");cc.systemEvent.on(t.MORE_GAME,this.checkVirBanner,this),this.virBannerNode=new cc.Node,this.virBannerNode.width=640,this.virBannerNode.height=300,this.virBannerNode.addComponent(cc.Widget),this.virBannerNode.addComponent(cc.Button),this.virBannerNode.addComponent(cc.Sprite),this.virBannerNode.getComponent(cc.Widget).isAlignBottom=!0;var n=cc.director.getScene().getChildByName("Canvas"),i=new cc.Component.EventHandler;i.target=n,i.component="MainUI",i.handler="onClickBanner",this.virBannerNode.getComponent(cc.Button).clickEvents.push(i),n.addChild(this.virBannerNode),this.virBannerNode.active=!1},callData:function(){facade.getComponent("MoreGameModel").requestMoreGameList()},checkVirBanner:function(){if(this.curShowName&&""!=this.curShowName){e("ModuleEventEnum");console.log("cur UI: "+this.curShowName+" need Virbanner");var t=facade.getComponent("MoreGameModel").boxList[0],n=[];for(var i in t)t[i].banner&&""!=t[i].banner&&n.push(t[i]);if(n.sort(function(e,t){return""==e.banner_sort&&(e.banner_sort=0),""==t.banner_sort&&(t.banner_sort=0),parseInt(e.banner_sort)>parseInt(t.banner_sort)?-1:1}),facade.getComponent("PlayerModel").isIconRandomOrder("banner")){var o=facade.getComponent("PlayerModel").getBannerRecommondRandomCount(n);o instanceof Array?(o.sort(function(e,t){return.5-Math.random()}),n=o,console.log("cur show virBanner : ",n),n.length>0&&(this.gameInfo=n[0])):(facade.getComponent("PlayerModel").checkItem(n),n.length>0?this.gameInfo=n[0]:this.gameInfo=null)}this.gameInfo?this.showVirBanner():console.log("\u5df2\u7ecf\u70b9\u5b8c\u6240\u6709cpa")}},showVirBanner:function(){if(this.gameInfo){this.virBannerNode.active=!0;var e=this.gameInfo;""!=e.banner&&e.banner&&0==e.banner.indexOf("http")&&cc.loader.load({url:e.banner,type:"png"},function(e,t){t&&(this.virBannerNode.active=!0,this.virBannerNode.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t),this.virBannerNode.zIndex=99999,this.virBannerNode.getComponent(cc.Widget).bottom=0,this.virBannerNode.getComponent(cc.Widget).updateAlignment())}.bind(this))}},hideVirBanner:function(){this.curShowName="",this.virBannerNode&&(this.virBannerNode.getComponent(cc.Sprite).spriteFrame=null,this.virBannerNode.zIndex=1,this.virBannerNode.active=!1),facade.getComponent("BannerModel").hideBanner()}};t.exports=i,cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],WaveScript:[function(e,t,n){"use strict";cc._RF.push(t,"a2cdck20+RAtLN0nEL/TBdj","WaveScript"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],WxAdaptor:[function(e,t,n){"use strict";cc._RF.push(t,"6d57awxz/FONLGQodaf5c94","WxAdaptor");var i=e("ModuleEventEnum");cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.systemEvent.on(i.GOT_HTTP_RES,this.httpResDeal.bind(this)),window.facade.windowWidth=375,window.facade.windowHeight=667,facade.isMiniGame&&wx.wxOnShowRes&&(this._onShowData=wx.wxOnShowRes,wx.wxOnShowRes=null,this.openToService=!1),this.initListener(),this.initVersionLinstener(),facade.isMiniGame&&(wx.showShareMenu({withShareTicket:!0}),wx.setKeepScreenOn({keepScreenOn:!0}),wx.getSystemInfo({success:function(e){if(window.facade.PhoneInfo=e,window.facade.windowWidth=e.windowWidth,window.facade.windowHeight=e.windowHeight,window.facade.Screenratio=Number(e.windowWidth)/Number(e.windowHeight),window.facade.screenWidth=640,window.facade.screenHeight=640/window.facade.Screenratio,window.facade.isIOS=null!=e.system.match("iOS"),canvas.width=e.screenWidth*e.pixelRatio,canvas.height=e.screenHeight*e.pixelRatio,console.log("phoneinfo----------------\x3e",window.facade.PhoneInfo),window.facade.isIOS){if((t=e.model.split("")).length>=2&&null!=t[1].match("s"))Number(t[1][0])<6&&(window.facade.deviceLow=!0);else if("X"!=t[1]){Number(t[1][0])<=6&&(window.facade.deviceLow=!0)}}else{var t=e.system.replace("Android ","");Number(t.split(".")[0])<6&&(window.facade.deviceLow=!0)}}}),this.setSharedCancas(),this.login())},setSharedCancas:function(e){try{if(void 0==wx||wx){var t=wx.getOpenDataContext().canvas;t&&(t.width=cc.game.canvas.width,t.height=cc.game.canvas.height)}}catch(e){}},start:function(){facade.isMiniGame&&window.facade.isEnabledVideoAd&&this.createVideo()},init:function(e){this._model=e,this.wxCode=null,this.wxUserInfo=null,this.wxSignature=null,this.wxEncryptedData=null,this.wxRawData=null,this.wxIv=null,this.loginDatas={boxId:24,secret:"f3d7964d586629c82bddb22b65c32b3d",boxUid:0,gameId:0,gameOpenid:0,actId:0,chanId:0,subCid:0},this.behaveReportDatas={openid:0,actId:0,platform:0,chan:0,subChan:0},this.appLinkReportDatas={gmId:91,objGmId:0,openid:0,chan:0,subChan:0}},reportEnter:function(){this.login()},relogin:function(){console.log("do relogin()..."),this.needRelogin=!0,this.login()},login:function(){console.log("login: function () {...")},loginWithoutUser:function(){"swan"==window.net.platformName&&wx.getSwanId({success:function(e){this.baidu_swanid=e.data.swanid,this.baidu_swanid_sign=e.data.swanid_signature}.bind(this),complete:function(){this.loginServer()}.bind(this)})},wxGetUserInfo:function(){this.isNewGetInfoApi=!0,wx.getSetting&&wx.getSetting({success:function(e){var t=e.authSetting;!0===t["scope.userInfo"]?(console.log("\u7528\u6237\u5df2\u7ecf\u6388\u6743\uff0c\u53ef\u4ee5\u83b7\u53d6\u7528\u6237\u4fe1\u606f"),this.getUserInfoOldApi()):!1===t["scope.userInfo"]?(console.log("\u7528\u6237\u5df2\u62d2\u7edd\u6388\u6743, \u9700\u8981\u5f15\u5bfc\u7528\u6237\u5230\u8bbe\u7f6e\u9875\u9762\u6253\u5f00\u6388\u6743\u5f00\u5173"),wx.showModal({title:"\u8bf7\u6388\u6743",content:"\u6388\u6743\u9875\u9762\u7684\u8fdb\u5165\u8def\u5f84\u4e3a\uff1a\n\u53f3\u4e0a\u89d2\u83dc\u5355->\u5173\u4e8e->\u53f3\u4e0a\u89d2\u83dc\u5355->\u8bbe\u7f6e",success:function(){console.log("\u70b9\u51fb\u786e\u5b9a")}})):this.createAllowBtn()}.bind(this)})},createAllowBtn:function(){void 0!=cc.sys.os&&0==window.facade.isEnteredGame&&wx.createUserInfoButton&&!window.facade.WXInfoButton?(console.log("====create btn:",window.facade.windowWidth,window.facade.windowHeight),window.facade.WXInfoButton=wx.createUserInfoButton({type:"text",text:"        ",style:{left:0,top:0,width:window.facade.windowWidth,height:window.facade.windowHeight,lineHeight:600,backgroundColor:"#FFFFFF00",borderColor:"#FFFFFF",color:"#FFFFFF",textAlign:"center",fontSize:40,borderRadius:4}}),window.facade.WXInfoButton.onTap(function(e){e.errMsg.indexOf("auth deny")>-1||e.errMsg.indexOf("auth denied")>-1?(console.log("\u7528\u6237\u62d2\u7edd\u6388\u6743"),this.guideActive()):(window.net.getComponent("Net").behaveReport(window.facade.BEHAVE_ALLOWED),this.setUserData(e))}.bind(this)),window.facade.WXInfoButton.show()):this.getUserInfoOldApi()},getUserInfoOldApi:function(){wx.getUserInfo({fail:function(e){(e.errMsg.indexOf("auth deny")>-1||e.errMsg.indexOf("auth denied")>-1)&&(console.log("\u7528\u6237\u62d2\u7edd\u6388\u6743"),this.guideActive())}.bind(this),success:function(e){this.setUserData(e)}.bind(this)})},refreshUserInfo:function(){wx.getUserInfo({success:function(e){this.recordUserData(e)}.bind(this)})},recordUserData:function(e){this.wxUserInfo=e.userInfo,this._model.platUserInfo=e.userInfo,this._model.recordRoleProfile()},setUserData:function(t){window.facade.WXInfoButton&&(window.facade.WXInfoButton.hide(),window.facade.WXInfoButton.destroy(),window.facade.WXInfoButton=null),this.wxUserInfo=t.userInfo,this._model.platUserInfo=t.userInfo,this.wxSignature=t.signature,this.wxEncryptedData=t.encryptedData,this.wxRawData=t.rawData,this.wxIv=t.iv,window.facade.isEnteredGame=!0;var n=e("ModuleEventEnum");cc.systemEvent.emit(n.USER_INFO_ALLOWED),this._model.recordRoleProfile(),cc.systemEvent.emit(n.ENTER_AGREED)},getWxScene:function(){if(this._onShowData&&this._onShowData.scene)return this._onShowData.scene;var e=wx.getLaunchOptionsSync();return e.scene&&e.scene?e.scene:0},checkBroadcastReward:function(){var e=wx.getLaunchOptionsSync();console.log("checkBroadcastReward:",e),"Gongzhonghao"==e.query.lsreward&&(facade.fromBroadcast=!0)},getAdScource:function(){if(facade.isMiniGame){var e=wx.getLaunchOptionsSync();if(e.referrerInfo&&e.referrerInfo.appId&&e.referrerInfo.appId==window.facade.WX_APPID_TENCENTBOX)return e.referrerInfo.appId;if(e.query&&e.query.chanId){var t={};return t.chanId=e.query.chanId,t.subCid=e.query.subCid,t}return"0_0"}return"0_0"},guideActive:function(){wx.showModal({title:"\u8b66\u544a",content:"\u62d2\u7edd\u6388\u6743\u5c06\u65e0\u6cd5\u6b63\u5e38\u6e38\u620f",cancelText:"\u53d6\u6d88",showCancel:!0,confirmText:"\u8bbe\u7f6e",success:function(e){e.confirm&&wx.openSetting({success:function(e){!0===e.authSetting["scope.userInfo"]&&(console.log("openSetting userInfo----------------------\x3e",e),this.getUserInfoOldApi())}.bind(this)})}.bind(this)})},loginServer:function(){var e=this;wx.request({url:"https://games.qdos.com/game/wxLogin",data:{appid:"wxf88c93d96e079e42",js_code:e.wxCode},method:"POST",success:function(t){e._model.userId=t.data.data.openid,cc.systemEvent.emit(i.WX_REGISTERED)}})},httpResDeal:function(e){var t=e.data;if(t&&(console.log(JSON.stringify(t)),t&&t.user_id&&t.token&&t.open_id)){if(this._model.userId=t.token,this._model.privateUid=t.user_id,this._model.token=t.token,this._model.gameGate=t.game_gate,this._model.userState=t.user_state,this.openId=this._model.openId=t.open_id,window.facade.token=this._model.token,window.facade.openId=this._model.openId,window.facade.userId=t.user_id,window.facade.channel_id=t.channel_id,window.facade.channel_sub=t.channel_sub,window.net.getComponent("Net").behaveReport(1001),window.net.getComponent("Net").behaveReport(1002),window.net.getComponent("Net").behaveReport(1),facade.isMiniGame){var n=wx.getLaunchOptionsSync();console.log("lc====== launchData1 :",n),n.query&&n.query.id&&window.net.getComponent("Net").behaveReport(8)}if(this.needRelogin){this.needRelogin=!1;var i={};i.game_id=window.facade.GameId,i.token=this._model.token,window.net.getComponent("Net").httpRequest(window.net.ServerInfo,i)}}},initVersionLinstener:function(){try{if(void 0==wx||wx){if(!wx.getUpdateManager)return;wx.getUpdateManager().onCheckForUpdate(function(e){console.log("hasUpdate",e.hasUpdate),e.hasUpdate&&window.popUp.getComponent("Pop").addAlert("\u5f53\u524d\u6e38\u620f\u7a0b\u5e8f\u4e0d\u662f\u6700\u65b0\u7248\u672c\uff0c\u8fd9\u53ef\u80fd\u4f1a\u9020\u6210\u90e8\u5206\u529f\u80fd\u4f53\u9a8c\u4e0d\u7545\u3002\u4ee3\u7801\u81ea\u884c\u66f4\u65b0\u5b8c\u6210\u540e\u4f1a\u63d0\u9192\u60a8\u54e6\uff01",null,!1)}),wx.getUpdateManager().onUpdateReady(function(){wx.getUpdateManager().applyUpdate()}),wx.getUpdateManager().onUpdateFailed(function(){})}}catch(e){}},checkTicket:function(e){e.query&&e.query.id&&window.net.getComponent("Net").behaveReport(window.facade.BEHAVE_FORM_SHARE),1==window.facade.canShowShareGroup?e.shareTicket&&e.sessionid!=window.facade.lastSessionid&&(window.facade.showShareTicket=e.shareTicket,window.facade.lastSessionid=e.sessionid):window.facade.canShowShareGroup=!0},reEnter:function(){window.facade.reEnter=!0,cc.systemEvent.emit(i.RE_ENTERED)},initListener:function(){try{(void 0==wx||wx)&&(wx.onShow(function(e){if(console.log("lc wxAdaptor ============wx.onShow==========query =",e.query),console.log(e),e.query.id&&(window.facade.queryRoleID=e.query.id),this.checkTicket(e),1==window.facade.isShareOut?window.facade.isShareOut=!1:(window.facade.isEnterGameFirst=!0,this.reEnter()),this._onShowData=e,this._registerList)for(var t=0;t<this._registerList.length;)this._registerList[t].callback(),this._registerList[t].once?this._registerList.splice(t,1):t++;"Gongzhonghao"==e.query.lsreward&&(facade.fromBroadcast=!0)}.bind(this)),wx.onHide(function(e){console.log("wx.onHide==========")}.bind(this)))}catch(e){}},checkIsDebug:function(){if(__wxConfig.envVersion)switch(console.log("__wxConfig.envVersion is :",__wxConfig.envVersion),__wxConfig.envVersion){case"develop":return!0;case"trial":case"release":return!1}},checkClientScene:function(){var e=this.getWxScene();return 1073==e||1081==e},getEnterAnalyzeId:function(){if(this._onShowData&&this._onShowData.query&&this._onShowData.query.enter_analyze_id)return this._onShowData.query.enter_analyze_id;var e=wx.getLaunchOptionsSync();return e.query&&e.query.enter_analyze_id?e.query.enter_analyze_id:0},getinviteRid:function(){if(this._onShowData&&this._onShowData.query&&this._onShowData.query.id)return this._onShowData.query.id;var e=wx.getLaunchOptionsSync();return e.query&&e.query.id?e.query.id:"0"},getinviteType:function(){if(this._onShowData&&this._onShowData.query&&this._onShowData.query.inviteType)return this._onShowData.query.inviteType;var e=wx.getLaunchOptionsSync();return e.query&&e.query.inviteType?e.query.inviteType:0},getInviteId:function(){if(console.log("getInviteId:",wx.getLaunchOptionsSync()),this._onShowData&&this._onShowData.query&&this._onShowData.query.inviteId)return this._onShowData.query.inviteId;var e=wx.getLaunchOptionsSync();return e.query&&e.query.inviteId?e.query.inviteId:0},getInviteQuery:function(){if(this._onShowData&&this._onShowData.query)return this._onShowData.query;var e=wx.getLaunchOptionsSync();return e.query&&e.query?e.query:0},clearShowData:function(){this._onShowData=null},getReferrerInfo:function(){if(this._onShowData&&this._onShowData.referrerInfo)return this._onShowData.referrerInfo;var e=wx.getLaunchOptionsSync();return e.referrerInfo&&e.referrerInfo?e.referrerInfo:0},getLoginParams:function(){if(facade.isMiniGame){var e=this.getInviteQuery(),t=this.getReferrerInfo();if(0!=e)return e.boxId&&(this.loginDatas.boxId=e.boxId,2==e.boxId&&(this.loginDatas.secret="17ed27b11e3bbea460a3a6331361b6f4")),e.boxUid&&(this.loginDatas.boxUid=e.boxUid),e.gameId&&(this.loginDatas.gameId=e.gameId),this.openId&&(this.loginDatas.gameOpenid=this.openId),e.chanId&&(this.loginDatas.chanId=e.chanId),e.subCid&&(this.loginDatas.subCid=e.subCid),t.appId&&(this.loginDatas.appId=t.appId),t.scene&&(this.loginDatas.scene=t.scene),this.loginDatas}},getReportParams:function(){if(facade.isMiniGame){var e=this.getInviteQuery();this.getReferrerInfo();if(0!=e)return this.openId&&(this.behaveReportDatas.openid=this.openId),e.chanId&&(this.behaveReportDatas.chan=e.chanId),e.subCid&&(this.behaveReportDatas.subChan=e.subCid),this.behaveReportDatas}},getAppLinkParams:function(){if(facade.isMiniGame){var e=this.getInviteQuery();this.getReferrerInfo();if(0!=e)return this.openId&&(this.appLinkReportDatas.openid=this.openId),e.chanId&&(this.appLinkReportDatas.chan=e.chanId),e.subCid&&(this.appLinkReportDatas.subChan=e.subCid),this.appLinkReportDatas}},removeKeyboard:function(){try{(void 0==wx||wx)&&(wx.offKeyboardComplete(),wx.hideKeyboard())}catch(e){}},gc:function(){try{(void 0==wx||wx)&&wx.triggerGC()}catch(e){}},compareVersion:function(e,t){null==e&&(e=wx.getSystemInfoSync().SDKVersion),e=e.split("."),t=t.split(".");for(var n=Math.max(e.length,t.length);e.length<n;)e.push("0");for(;t.length<n;)t.push("0");for(var i=0;i<n;i++){var o=parseInt(e[i]),a=parseInt(t[i]);if(o>a)return 1;if(o<a)return-1}return 0},isCanShowVideo:function(){var e=!1;if(facade.isMiniGame){var t=wx.getSystemInfoSync().SDKVersion;-1===this.compareVersion(t,"2.0.4")?console.log("=====\u7248\u672c\u4e0d\u591f2.0.4\uff0c\u89c6\u9891\u5e7f\u544a\u4e0d\u80fd\u7528"):e=!0}return e},createVideo:function(e){},loadVideo:function(e){var t=this;if(!this.isCanShowVideo())return window.popUp.getComponent("FloatTip").showTip("\u5fae\u4fe1\u7248\u672c\u8fc7\u4f4e\u65e0\u6cd5\u52a0\u8f7d\u5e7f\u544a"),void(window.facade.isEnabledVideoAd=!1);this.entrance=e,window.facade.getComponent("UserModel").starVideo(e),window.audio.getComponent("SoundManager").isPlayingBgm&&window.audio.getComponent("SoundManager")._soundActive&&(this.videoPauseBGM=!0,window.audio.getComponent("SoundManager").pauseBGM()),facade.isMiniGame&&this.videoAd.load().then(function(){return t.videoAd.show().catch(function(e){return console.log(e)})})},getMenuPos:function(){if(null==window.wx)return null;var e=wx.getSystemInfoSync().screenWidth,t=wx.getSystemInfoSync().screenHeight,n=wx.getMenuButtonBoundingClientRect();return{x:(n.left+n.width/2)/e-.5,y:.5-n.bottom/t}},checkCollectCondi:function(){if(null==window.wx)return!1;var e=wx.getSystemInfoSync().SDKVersion,t=this.compareVersion(e,"2.2.4"),n=this.getWxScene();return console.log("wxScene: ",n),t?-1!=n&&(1001==n||1089==n):-1!=n&&(1103==n||1104==n||1023==n)},checkHoverWinShow:function(){return 1131==this.getWxScene()},reigsterWXFunc:function(e,t){this._registerList=this._registerList||[];var n={};n.callback=e,n.once=t,this._registerList.push(n)},checkInterstitialAd:function(){return!(facade.SAVE_MODE||!facade.isMiniGame)&&this.compareVersion(null,"2.6.0")>=0},createInterstitialAd:function(e){return wx.createInterstitialAd(e)},getClientReward:function(){var e=this;wx.openCustomerServiceConversation({showMessageCard:!0,sendMessageTitle:"",sendMessagePath:"",sendMessageImg:"",success:function(t){e.openToService=!0},fail:function(t){e.openToService=!1}}),net.getComponent("Net").behaveReport(facade.BEHAVE_OPENSERVICE)},update:function(e){}}),cc._RF.pop()},{ModuleEventEnum:"ModuleEventEnum"}],"ald-game-conf":[function(e,t,n){"use strict";cc._RF.push(t,"b0774dREVRG67lIheYsXN64","ald-game-conf"),n.app_key="62c19f64be73b9a9eb3c53c944079c41",n.getLocation=!1,cc._RF.pop()},{}],"ald-game":[function(e,t,n){"use strict";cc._RF.push(t,"3480bwYZ+hDyaqVJtgAqutU","ald-game");var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};CC_WECHATGAME&&function(){function t(e){function t(e){return Object.prototype.toString.call(e)}var n={};return"Boolean Number String Function Array Date RegExp Object Error Symbol".split(" ").forEach(function(e,t){n["[object "+e+"]"]=e.toLowerCase()}),null==e?e:"object"==(void 0===e?"undefined":i(e))||"function"==typeof e?n[t.call(e)]||"object":void 0===e?"undefined":i(e)}function n(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+e()+e()+e()+e()+e()+e()}function o(e,t){v++,e.as=y,e.at=S,e.rq_c=v,e.ifo=d,e.ak=h.app_key,e.uu=p,e.v=r,e.st=Date.now(),e.ev=t,e.wsr=C,""!==a(e.ufo)&&(e.ufo=e.ufo),e.ec=f,wx.Queue.push(function(){return new Promise(function(t,n){wx.request({url:"https://"+l+".aldwx.com/d.html",data:e,header:{se:g||"",op:m||"",img:L||""},method:"GET",fail:function(){t("")},success:function(e){t(200==e.statusCode?"":"status error")}})})})}function a(e){if(void 0===e||""===e)return"";var t={};for(var n in e)"rawData"!=n&&"errMsg"!=n&&(t[n]=e[n]);return t}function s(e){var t={};for(var n in e)t[n]=e[n];return t}function c(e){for(var t="",n=0;n<e.length;n++)e[n].length>t.length&&(t=e[n]);return t}var r="2.0.0",l="glog",h=e("./ald-game-conf");""===h.app_key&&console.error("\u8bf7\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u586b\u5199\u60a8\u7684app_key"),h.app_key=h.app_key.replace(/\s/g,""),wx.request({url:"https://"+l+".aldwx.com/config/app.json",method:"GET",success:function(e){200===e.statusCode&&(e.data.version!=r&&console.warn("\u60a8\u7684SDK\u4e0d\u662f\u6700\u65b0\u7248\u672c\uff0c\u8bf7\u5c3d\u5feb\u5347\u7ea7\uff01"),e.data.warn&&console.warn(e.data.warn),e.data.error&&console.error(e.data.error))}});var d="",p=function(){var e="";try{e=wx.getStorageSync("aldstat_uuid"),wx.setStorageSync("ald_ifo",!0)}catch(t){e="uuid_getstoragesync"}if(e)d=!1;else{e=n(),d=!0;try{wx.setStorageSync("aldstat_uuid",e)}catch(e){wx.setStorageSync("aldstat_uuid","uuid_getstoragesync")}}return e}(),u={},g="",m="",f=0,v="",C=wx.getLaunchOptionsSync(),w=Date.now(),S=""+Date.now()+Math.floor(1e7*Math.random()),y=""+Date.now()+Math.floor(1e7*Math.random()),_=0,E="",L="",T=!0,A=!1,R=["aldSendEvent","aldOnShareAppMessage","aldShareAppMessage","aldSendSession","aldSendOpenid","aldLevelEvent"],I=["payStart","paySuccess","payFail","die","revive","tools","award"],b=["complete","fail"];void 0===wx.Queue&&(wx.Queue=new function(){this.concurrency=4,this.queue=[],this.tasks=[],this.activeCount=0;var e=this;this.push=function(t){this.tasks.push(new Promise(function(n,i){var o=function(){e.activeCount++,t().then(function(e){n(e)}).then(function(){e.next()})};e.activeCount<e.concurrency?o():e.queue.push(o)}))},this.all=function(){return Promise.all(this.tasks)},this.next=function(){e.activeCount--,e.queue.length>0&&e.queue.shift()()}},wx.Queue.all()),Promise.all([new Promise(function(e,t){wx.getSetting({success:function(t){t.authSetting["scope.userInfo"]?wx.getUserInfo({success:function(t){L=c(t.userInfo.avatarUrl.split("/")),e(t)},fail:function(){e("")}}):e("")},fail:function(){e("")}})}),new Promise(function(e,t){wx.getNetworkType({success:function(t){e(t)},fail:function(){e("")}})}),new Promise(function(e,t){h.getLocation?wx.getLocation({success:function(t){e(t)},fail:function(){e("")}}):wx.getSetting({success:function(t){t.authSetting["scope.userLocation"]?(wx.getLocation({success:function(t){e(t)},fail:function(){e("")}}),e("")):e("")},fail:function(){e("")}})})]).then(function(e){""!==e[2]?(u.lat=e[2].latitude||"",u.lng=e[2].longitude||"",u.spd=e[2].speed||""):(u.lat="",u.lng="",u.spd=""),""!==e[1]?u.nt=e[1].networkType||"":u.nt="";var t=s(u);""!==e[0]&&(t.ufo=e[0],E=e[0]),o(t,"init")}),wx.onShow(function(e){if(C=e,_=Date.now(),!T&&!A){S=""+Date.now()+Math.floor(1e7*Math.random()),d=!1;try{wx.setStorageSync("ald_ifo",!1)}catch(e){}}T=!1,A=!1;var t=s(u),n=s(u);t.sm=_-w,e.query.ald_share_src&&e.shareTicket&&"1044"===e.scene?(n.tp="ald_share_click",new Promise(function(e,t){"1044"==C.scene?wx.getShareInfo({shareTicket:C.shareTicket,success:function(t){e(t)},fail:function(){e("")}}):e("")}).then(function(e){n.ct=e,o(n,"event")})):e.query.ald_share_src&&(n.tp="ald_share_click",n.ct="1",o(n,"event")),o(t,"show")}),wx.onHide(function(){var e=s(u);e.dr=Date.now()-_,""===E?wx.getSetting({success:function(t){t.authSetting["scope.userInfo"]?wx.getUserInfo({success:function(t){e.ufo=t,E=t,L=c(t.userInfo.avatarUrl.split("/")),o(e,"hide")}}):o(e,"hide")}}):o(e,"hide")}),wx.onError(function(e){var t=s(u);t.tp="ald_error_message",t.ct=e,f++,o(t,"event")});var N={aldSendEvent:function(e,t){var n=s(u);""!==e&&"string"==typeof e&&e.length<=255?(n.tp=e,"string"==typeof t&&t.length<=255?(n.ct=String(t),o(n,"event")):"object"==(void 0===t?"undefined":i(t))?(JSON.stringify(t).length>=255&&console.error("\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u53c2\u6570\u4e0d\u80fd\u8d85\u8fc7255\u4e2a\u5b57\u7b26"),n.ct=JSON.stringify(t),o(n,"event")):void 0===t||""===t?o(n,"event"):console.error("\u4e8b\u4ef6\u53c2\u6570\u5fc5\u987b\u4e3aString,Object\u7c7b\u578b,\u4e14\u53c2\u6570\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7255\u4e2a\u5b57\u7b26")):console.error("\u4e8b\u4ef6\u540d\u79f0\u5fc5\u987b\u4e3aString\u7c7b\u578b\u4e14\u4e0d\u80fd\u8d85\u8fc7255\u4e2a\u5b57\u7b26")},aldOnShareAppMessage:function(e){wx.onShareAppMessage(function(){A=!0;var n=e(),i="";i=void 0!==C.query.ald_share_src?void 0!==n.query?(C.query.ald_share_src.indexOf(p),n.query+"&ald_share_src="+C.query.ald_share_src+","+p):(C.query.ald_share_src.indexOf(p),"ald_share_src="+C.query.ald_share_src+","+p):void 0!==n.query?n.query+"&ald_share_src="+p:"ald_share_src="+p,"undefined"!=t(n.ald_desc)&&(i+="&ald_desc="+n.ald_desc),n.query=i;var a=s(u);return a.ct=n,a.ct.sho=1,a.tp="ald_share_chain",o(a,"event"),n})},aldShareAppMessage:function(e){A=!0;var n=e,i="";i=void 0!==C.query.ald_share_src?void 0!==n.query?(C.query.ald_share_src.indexOf(p),n.query+"&ald_share_src="+C.query.ald_share_src+","+p):(C.query.ald_share_src.indexOf(p),"ald_share_src="+C.query.ald_share_src+","+p):void 0!==n.query?n.query+"&ald_share_src="+p:"ald_share_src="+p;var a=s(u);"undefined"!=t(n.ald_desc)&&(i+="&ald_desc="+n.ald_desc),n.query=i,a.ct=n,a.tp="ald_share_chain",o(a,"event"),wx.shareAppMessage(n)},aldSendSession:function(e){if(""!==e&&e){var t=s(u);t.tp="session",t.ct="session",g=e,""===E?wx.getSetting({success:function(e){e.authSetting["scope.userInfo"]?wx.getUserInfo({success:function(e){t.ufo=e,o(t,"event")}}):o(t,"event")}}):(t.ufo=E,""!==E&&(t.gid=""),o(t,"event"))}else console.error("\u8bf7\u4f20\u5165\u4ece\u540e\u53f0\u83b7\u53d6\u7684session_key")},aldSendOpenid:function(e){if(""!==e&&e){m=e;var t=s(u);t.tp="openid",t.ct="openid",o(t,"event")}else console.error("openID\u4e0d\u80fd\u4e3a\u7a7a")}};wx.aldStage=new function(){function e(e){return!/^\d+(.\d+)*$/.test(e.stageId)||e.stageId.length>32?(console.warn("\u5173\u5361stageId\u5fc5\u987b\u7b26\u5408\u4f20\u53c2\u89c4\u5219,\u8bf7\u53c2\u8003\u6587\u6863\u3002"),!1):!("string"!==t(e.stageName)||e.stageName.length>32)||(console.warn("\u5173\u5361\u540d\u79f0\u4e3a\u5fc5\u4f20\u5b57\u6bb5,\u4e14\u957f\u5ea6\u5c0f\u4e8e32\u4e2a\u5b57\u7b26,\u8bf7\u53c2\u8003\u6587\u6863"),!1)}var n="",i="",a=0;this.onStart=function(o){if(e(o)){var s={};a=Date.now(),s.sid=o.stageId,s.snm=o.stageName,s.state="start",i=""+Date.now()+Math.floor(1e7*Math.random()),n=s,("string"===t(o.userId)&&o.userId)<32&&(this.uid=o.uid),this.request()}},this.onRunning=function(i){if(e(i)){var o={params:{}};if(("string"===t(i.userId)&&i.userId)<32&&(this.uid=i.uid),!t(i.event)&&-1!=I.join(",").indexOf(i.event+","))return void I.join(",");if(o.event=i.event,"object"===t(i.params)){if("string"!==t(i.params.itemName)||i.params.itemName.length>32)return void console.warn("\u9053\u5177/\u5546\u54c1\u540d\u79f0\u4e3a\u5fc5\u4f20\u5b57\u6bb5\uff0c\u4e14\u957f\u5ea6\u5c0f\u4e8e32\u4e2a\u5b57\u7b26\uff0c\u8be6\u60c5\u8bf7\u53c2\u8003\u6587\u6863");o.params.itnm=i.params.itemName,"string"===t(i.params.itemId)&&i.params.itemId.length<32&&(o.params.itid=i.params.itemId),"number"===t(i.params.itemCount)&&i.params.itemCount.length<32?o.params.itco=i.params.itemCount:o.params.itco=1,-1!==i.event.indexOf("pay")&&("number"===t(i.params.itemMoney)&&i.params.itemMoney.length<32?o.params.money=i.params.itemMoney:o.params.money=0),"string"===t(i.params.desc)&&i.params.desc.length<64&&(o.params.desc=i.params.desc),o.state="running",o.sid=i.stageId,o.snm=i.stageName,n=o,this.request()}}},this.onEnd=function(i){if(e(i)){var o={state:"end"};if(("string"===t(i.userId)&&i.userId)<32&&(this.uid=i.uid),!t(i.event)&&-1!==b.join(",").indexOf(i.event+","))return void b.join(",");o.sid=i.stageId,o.snm=i.stageName,o.event=i.event,o.sdr=0!==a?Date.now()-a:"",o.params={},"object"===t(i.params)&&"string"===t(i.params.desc)&&i.params.desc.length<64&&(o.params.desc=i.params.desc),n=o,this.request()}},this.request=function(){var e=s(u);n.ss=i,e.ct=n,o(e,"screen")}};for(var M=0;M<R.length;M++)!function(e,t){Object.defineProperty(wx,e,{value:t,writable:!1,enumerable:!0,configurable:!0})}(R[M],N[R[M]]);try{var B=wx.getSystemInfoSync();u.br=B.brand||"",u.md=B.model,u.pr=B.pixelRatio,u.sw=B.screenWidth,u.sh=B.screenHeight,u.ww=B.windowWidth,u.wh=B.windowHeight,u.lang=B.language,u.wv=B.version,u.sv=B.system,u.wvv=B.platform,u.fs=B.fontSizeSetting,u.wsdk=B.SDKVersion,u.bh=B.benchmarkLevel||"",u.bt=B.battery||"",u.wf=B.wifiSignal||"",u.lng="",u.lat="",u.nt="",u.spd="",u.ufo=""}catch(e){}}(),cc._RF.pop()},{"./ald-game-conf":"ald-game-conf"}],"use_v2.1.x_cc.Action":[function(e,t,n){"use strict";cc._RF.push(t,"c07b8ME1VVAcIJKp9Sf4PV2","use_v2.1.x_cc.Action"),cc.macro.ROTATE_ACTION_CCW=!0,cc._RF.pop()},{}]},{},["use_v2.1.x_cc.Action","AdsSingleton","AlertTool","ButtonScaler","CommonFunc","FloatTip","ListViewCtrl","MathUtils","ModuleEventEnum","Network","Network1","Pool","Pop","SoundManager","TextureLabel","TextureManager","VirBannerCtrl","ExportLevelDataScript","Facade","Block","Boom","Bullet","CarTouch","Earth","Game","GameLogic","GameModel","Grenade","Guideclassic","Gunner","LevelData","LevelLoader","LevelModel","LevelUI","Light","Magic","MoveBlock","OneShotUI","Pitcher","ResultPanel","ResultShotOne","SkipPanel","Sun","Switch","GameConfig","MConfig","AdvanceView","BackEnergyView","ChangeNameView","Chapter","CharacterBox","CharacterItem","EnergyNeedView","EnergyTimer","GameEntry","GetTreeStarView","GunMasterRank","LevelItem","LevelPanel","MainUI","NewerView","NextLoginView","Rank","RankItem","RankModel","RewardCPAModel","SkinPanel","SoundSwitch","TurnCricle","HttpConnector","Net","PlayerModel","WxAdaptor","ClientServerUI","CollectGift","EntranceItem","EntranceUI","FakeInterUI","HoverWinUI","InviteDailyItem","InviteDailyItem1","InviteDailyUI","InviteNewItem","InviteNewUI","ReplayUI","SignIn","SigninItem","BannerModel","InterstitialADModel","ShareADModel","ShareVideoNodeScript","Singleton","Start","WaveScript","GameoverMoreGame","MoreGame","MoreGameItemOne","MoreGameManager","RecommendBar","RecommendGameItem","RecommendGameJS","RecommendGameModel","RecommendPage","AnalyticsUtilities","ald-game-conf","ald-game"]);